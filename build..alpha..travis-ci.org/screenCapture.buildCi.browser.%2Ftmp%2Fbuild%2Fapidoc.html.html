<html><head></head><body><div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a>mysql (v2.13.0)</a>
</h1>
<h4>A node.js driver for mysql. It is written in JavaScript, does not require compiling, and is 100% MIT licensed.</h4>
<div class="apidocSectionDiv"><a href="#apidoc.tableOfContents" id="apidoc.tableOfContents"><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql">module mysql</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.BufferList">
            function <span class="apidocSignatureSpan">mysql.</span>BufferList
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Connection">
            function <span class="apidocSignatureSpan">mysql.</span>Connection
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.ConnectionConfig">
            function <span class="apidocSignatureSpan">mysql.</span>ConnectionConfig
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PacketWriter">
            function <span class="apidocSignatureSpan">mysql.</span>PacketWriter
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Parser">
            function <span class="apidocSignatureSpan">mysql.</span>Parser
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Pool">
            function <span class="apidocSignatureSpan">mysql.</span>Pool
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PoolCluster">
            function <span class="apidocSignatureSpan">mysql.</span>PoolCluster
            <span class="apidocSignatureSpan">(config)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PoolConfig">
            function <span class="apidocSignatureSpan">mysql.</span>PoolConfig
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PoolConnection">
            function <span class="apidocSignatureSpan">mysql.</span>PoolConnection
            <span class="apidocSignatureSpan">(pool, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PoolNamespace">
            function <span class="apidocSignatureSpan">mysql.</span>PoolNamespace
            <span class="apidocSignatureSpan">(cluster, pattern, selector)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Protocol">
            function <span class="apidocSignatureSpan">mysql.</span>Protocol
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.createConnection">
            function <span class="apidocSignatureSpan">mysql.</span>createConnection
            <span class="apidocSignatureSpan">(config)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.createPool">
            function <span class="apidocSignatureSpan">mysql.</span>createPool
            <span class="apidocSignatureSpan">(config)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.createPoolCluster">
            function <span class="apidocSignatureSpan">mysql.</span>createPoolCluster
            <span class="apidocSignatureSpan">(config)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.createQuery">
            function <span class="apidocSignatureSpan">mysql.</span>createQuery
            <span class="apidocSignatureSpan">(sql, values, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.escape">
            function <span class="apidocSignatureSpan">mysql.</span>escape
            <span class="apidocSignatureSpan">(value, stringifyObjects, timeZone)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.escapeId">
            function <span class="apidocSignatureSpan">mysql.</span>escapeId
            <span class="apidocSignatureSpan">(value, forbidQualified)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.format">
            function <span class="apidocSignatureSpan">mysql.</span>format
            <span class="apidocSignatureSpan">(sql, values, stringifyObjects, timeZone)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mysql.</span>Auth</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mysql.</span>BufferList.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mysql.</span>Connection.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mysql.</span>PacketWriter.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mysql.</span>Parser.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mysql.</span>Pool.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mysql.</span>PoolCluster.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mysql.</span>PoolConfig.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mysql.</span>PoolConnection.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mysql.</span>PoolNamespace.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mysql.</span>PoolSelector</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mysql.</span>Protocol.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mysql.</span>SqlString</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql.Auth">module mysql.Auth</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Auth.add32">
            function <span class="apidocSignatureSpan">mysql.Auth.</span>add32
            <span class="apidocSignatureSpan">(a, b)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Auth.and32">
            function <span class="apidocSignatureSpan">mysql.Auth.</span>and32
            <span class="apidocSignatureSpan">(a, b)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Auth.hashPassword">
            function <span class="apidocSignatureSpan">mysql.Auth.</span>hashPassword
            <span class="apidocSignatureSpan">(password)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Auth.int31Write">
            function <span class="apidocSignatureSpan">mysql.Auth.</span>int31Write
            <span class="apidocSignatureSpan">(buffer, number, offset)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Auth.int32Read">
            function <span class="apidocSignatureSpan">mysql.Auth.</span>int32Read
            <span class="apidocSignatureSpan">(buffer, offset)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Auth.mul32">
            function <span class="apidocSignatureSpan">mysql.Auth.</span>mul32
            <span class="apidocSignatureSpan">(a, b)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Auth.myRnd">
            function <span class="apidocSignatureSpan">mysql.Auth.</span>myRnd
            <span class="apidocSignatureSpan">(r)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Auth.randomInit">
            function <span class="apidocSignatureSpan">mysql.Auth.</span>randomInit
            <span class="apidocSignatureSpan">(seed1, seed2)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Auth.scramble323">
            function <span class="apidocSignatureSpan">mysql.Auth.</span>scramble323
            <span class="apidocSignatureSpan">(message, password)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Auth.sha1">
            function <span class="apidocSignatureSpan">mysql.Auth.</span>sha1
            <span class="apidocSignatureSpan">(msg)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Auth.shl32">
            function <span class="apidocSignatureSpan">mysql.Auth.</span>shl32
            <span class="apidocSignatureSpan">(a, b)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Auth.token">
            function <span class="apidocSignatureSpan">mysql.Auth.</span>token
            <span class="apidocSignatureSpan">(password, scramble)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Auth.xor">
            function <span class="apidocSignatureSpan">mysql.Auth.</span>xor
            <span class="apidocSignatureSpan">(a, b)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Auth.xor32">
            function <span class="apidocSignatureSpan">mysql.Auth.</span>xor32
            <span class="apidocSignatureSpan">(a, b)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql.BufferList">module mysql.BufferList</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.BufferList.BufferList">
            function <span class="apidocSignatureSpan">mysql.</span>BufferList
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql.BufferList.prototype">module mysql.BufferList.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.BufferList.prototype.push">
            function <span class="apidocSignatureSpan">mysql.BufferList.prototype.</span>push
            <span class="apidocSignatureSpan">(buf)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.BufferList.prototype.shift">
            function <span class="apidocSignatureSpan">mysql.BufferList.prototype.</span>shift
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql.Connection">module mysql.Connection</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Connection.Connection">
            function <span class="apidocSignatureSpan">mysql.</span>Connection
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Connection.createQuery">
            function <span class="apidocSignatureSpan">mysql.Connection.</span>createQuery
            <span class="apidocSignatureSpan">(sql, values, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Connection.super_">
            function <span class="apidocSignatureSpan">mysql.Connection.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql.Connection.prototype">module mysql.Connection.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Connection.prototype._handleConnectTimeout">
            function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>_handleConnectTimeout
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Connection.prototype._handleNetworkError">
            function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>_handleNetworkError
            <span class="apidocSignatureSpan">(err)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Connection.prototype._handleProtocolConnect">
            function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>_handleProtocolConnect
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Connection.prototype._handleProtocolDrain">
            function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>_handleProtocolDrain
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Connection.prototype._handleProtocolEnd">
            function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>_handleProtocolEnd
            <span class="apidocSignatureSpan">(err)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Connection.prototype._handleProtocolEnqueue">
            function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>_handleProtocolEnqueue
            <span class="apidocSignatureSpan">(sequence)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Connection.prototype._handleProtocolError">
            function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>_handleProtocolError
            <span class="apidocSignatureSpan">(err)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Connection.prototype._handleProtocolHandshake">
            function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>_handleProtocolHandshake
            <span class="apidocSignatureSpan">(packet)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Connection.prototype._implyConnect">
            function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>_implyConnect
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Connection.prototype._startTLS">
            function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>_startTLS
            <span class="apidocSignatureSpan">(onSecure)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Connection.prototype.beginTransaction">
            function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>beginTransaction
            <span class="apidocSignatureSpan">(options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Connection.prototype.changeUser">
            function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>changeUser
            <span class="apidocSignatureSpan">(options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Connection.prototype.commit">
            function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>commit
            <span class="apidocSignatureSpan">(options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Connection.prototype.connect">
            function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>connect
            <span class="apidocSignatureSpan">(options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Connection.prototype.destroy">
            function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>destroy
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Connection.prototype.end">
            function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>end
            <span class="apidocSignatureSpan">(options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Connection.prototype.escape">
            function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>escape
            <span class="apidocSignatureSpan">(value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Connection.prototype.escapeId">
            function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>escapeId
            <span class="apidocSignatureSpan">(value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Connection.prototype.format">
            function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>format
            <span class="apidocSignatureSpan">(sql, values)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Connection.prototype.pause">
            function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>pause
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Connection.prototype.ping">
            function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>ping
            <span class="apidocSignatureSpan">(options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Connection.prototype.query">
            function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>query
            <span class="apidocSignatureSpan">(sql, values, cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Connection.prototype.resume">
            function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>resume
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Connection.prototype.rollback">
            function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>rollback
            <span class="apidocSignatureSpan">(options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Connection.prototype.statistics">
            function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>statistics
            <span class="apidocSignatureSpan">(options, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql.ConnectionConfig">module mysql.ConnectionConfig</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.ConnectionConfig.ConnectionConfig">
            function <span class="apidocSignatureSpan">mysql.</span>ConnectionConfig
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.ConnectionConfig.getCharsetNumber">
            function <span class="apidocSignatureSpan">mysql.ConnectionConfig.</span>getCharsetNumber
            <span class="apidocSignatureSpan">(charset)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.ConnectionConfig.getDefaultFlags">
            function <span class="apidocSignatureSpan">mysql.ConnectionConfig.</span>getDefaultFlags
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.ConnectionConfig.getSSLProfile">
            function <span class="apidocSignatureSpan">mysql.ConnectionConfig.</span>getSSLProfile
            <span class="apidocSignatureSpan">(name)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.ConnectionConfig.mergeFlags">
            function <span class="apidocSignatureSpan">mysql.ConnectionConfig.</span>mergeFlags
            <span class="apidocSignatureSpan">(defaultFlags, userFlags)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.ConnectionConfig.parseFlagList">
            function <span class="apidocSignatureSpan">mysql.ConnectionConfig.</span>parseFlagList
            <span class="apidocSignatureSpan">(flagList)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.ConnectionConfig.parseUrl">
            function <span class="apidocSignatureSpan">mysql.ConnectionConfig.</span>parseUrl
            <span class="apidocSignatureSpan">(url)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql.PacketWriter">module mysql.PacketWriter</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PacketWriter.PacketWriter">
            function <span class="apidocSignatureSpan">mysql.</span>PacketWriter
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql.PacketWriter.prototype">module mysql.PacketWriter.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PacketWriter.prototype._allocate">
            function <span class="apidocSignatureSpan">mysql.PacketWriter.prototype.</span>_allocate
            <span class="apidocSignatureSpan">(bytes)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PacketWriter.prototype.toBuffer">
            function <span class="apidocSignatureSpan">mysql.PacketWriter.prototype.</span>toBuffer
            <span class="apidocSignatureSpan">(parser)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PacketWriter.prototype.writeBuffer">
            function <span class="apidocSignatureSpan">mysql.PacketWriter.prototype.</span>writeBuffer
            <span class="apidocSignatureSpan">(value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PacketWriter.prototype.writeFiller">
            function <span class="apidocSignatureSpan">mysql.PacketWriter.prototype.</span>writeFiller
            <span class="apidocSignatureSpan">(bytes)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PacketWriter.prototype.writeLengthCodedBuffer">
            function <span class="apidocSignatureSpan">mysql.PacketWriter.prototype.</span>writeLengthCodedBuffer
            <span class="apidocSignatureSpan">(value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PacketWriter.prototype.writeLengthCodedNumber">
            function <span class="apidocSignatureSpan">mysql.PacketWriter.prototype.</span>writeLengthCodedNumber
            <span class="apidocSignatureSpan">(value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PacketWriter.prototype.writeLengthCodedString">
            function <span class="apidocSignatureSpan">mysql.PacketWriter.prototype.</span>writeLengthCodedString
            <span class="apidocSignatureSpan">(value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PacketWriter.prototype.writeNullTerminatedBuffer">
            function <span class="apidocSignatureSpan">mysql.PacketWriter.prototype.</span>writeNullTerminatedBuffer
            <span class="apidocSignatureSpan">(value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PacketWriter.prototype.writeNullTerminatedString">
            function <span class="apidocSignatureSpan">mysql.PacketWriter.prototype.</span>writeNullTerminatedString
            <span class="apidocSignatureSpan">(value, encoding)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PacketWriter.prototype.writeString">
            function <span class="apidocSignatureSpan">mysql.PacketWriter.prototype.</span>writeString
            <span class="apidocSignatureSpan">(value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PacketWriter.prototype.writeUnsignedNumber">
            function <span class="apidocSignatureSpan">mysql.PacketWriter.prototype.</span>writeUnsignedNumber
            <span class="apidocSignatureSpan">(bytes, value)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql.Parser">module mysql.Parser</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Parser.Parser">
            function <span class="apidocSignatureSpan">mysql.</span>Parser
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql.Parser.prototype">module mysql.Parser.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Parser.prototype._advanceToNextPacket">
            function <span class="apidocSignatureSpan">mysql.Parser.prototype.</span>_advanceToNextPacket
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Parser.prototype._combineLongPacketBuffers">
            function <span class="apidocSignatureSpan">mysql.Parser.prototype.</span>_combineLongPacketBuffers
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Parser.prototype._combineNextBuffers">
            function <span class="apidocSignatureSpan">mysql.Parser.prototype.</span>_combineNextBuffers
            <span class="apidocSignatureSpan">(bytes)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Parser.prototype._nullByteOffset">
            function <span class="apidocSignatureSpan">mysql.Parser.prototype.</span>_nullByteOffset
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Parser.prototype.append">
            function <span class="apidocSignatureSpan">mysql.Parser.prototype.</span>append
            <span class="apidocSignatureSpan">(chunk)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Parser.prototype.incrementPacketNumber">
            function <span class="apidocSignatureSpan">mysql.Parser.prototype.</span>incrementPacketNumber
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Parser.prototype.packetLength">
            function <span class="apidocSignatureSpan">mysql.Parser.prototype.</span>packetLength
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Parser.prototype.parseBuffer">
            function <span class="apidocSignatureSpan">mysql.Parser.prototype.</span>parseBuffer
            <span class="apidocSignatureSpan">(length)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Parser.prototype.parseFiller">
            function <span class="apidocSignatureSpan">mysql.Parser.prototype.</span>parseFiller
            <span class="apidocSignatureSpan">(length)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Parser.prototype.parseGeometryValue">
            function <span class="apidocSignatureSpan">mysql.Parser.prototype.</span>parseGeometryValue
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Parser.prototype.parseLengthCodedBuffer">
            function <span class="apidocSignatureSpan">mysql.Parser.prototype.</span>parseLengthCodedBuffer
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Parser.prototype.parseLengthCodedNumber">
            function <span class="apidocSignatureSpan">mysql.Parser.prototype.</span>parseLengthCodedNumber
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Parser.prototype.parseLengthCodedString">
            function <span class="apidocSignatureSpan">mysql.Parser.prototype.</span>parseLengthCodedString
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Parser.prototype.parseNullTerminatedBuffer">
            function <span class="apidocSignatureSpan">mysql.Parser.prototype.</span>parseNullTerminatedBuffer
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Parser.prototype.parseNullTerminatedString">
            function <span class="apidocSignatureSpan">mysql.Parser.prototype.</span>parseNullTerminatedString
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Parser.prototype.parsePacketTerminatedString">
            function <span class="apidocSignatureSpan">mysql.Parser.prototype.</span>parsePacketTerminatedString
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Parser.prototype.parseString">
            function <span class="apidocSignatureSpan">mysql.Parser.prototype.</span>parseString
            <span class="apidocSignatureSpan">(length)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Parser.prototype.parseUnsignedNumber">
            function <span class="apidocSignatureSpan">mysql.Parser.prototype.</span>parseUnsignedNumber
            <span class="apidocSignatureSpan">(bytes)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Parser.prototype.pause">
            function <span class="apidocSignatureSpan">mysql.Parser.prototype.</span>pause
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Parser.prototype.peak">
            function <span class="apidocSignatureSpan">mysql.Parser.prototype.</span>peak
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Parser.prototype.reachedPacketEnd">
            function <span class="apidocSignatureSpan">mysql.Parser.prototype.</span>reachedPacketEnd
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Parser.prototype.resetPacketNumber">
            function <span class="apidocSignatureSpan">mysql.Parser.prototype.</span>resetPacketNumber
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Parser.prototype.resume">
            function <span class="apidocSignatureSpan">mysql.Parser.prototype.</span>resume
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Parser.prototype.write">
            function <span class="apidocSignatureSpan">mysql.Parser.prototype.</span>write
            <span class="apidocSignatureSpan">(chunk)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql.Pool">module mysql.Pool</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Pool.Pool">
            function <span class="apidocSignatureSpan">mysql.</span>Pool
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Pool.super_">
            function <span class="apidocSignatureSpan">mysql.Pool.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql.Pool.prototype">module mysql.Pool.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Pool.prototype._enqueueCallback">
            function <span class="apidocSignatureSpan">mysql.Pool.prototype.</span>_enqueueCallback
            <span class="apidocSignatureSpan">(callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Pool.prototype._needsChangeUser">
            function <span class="apidocSignatureSpan">mysql.Pool.prototype.</span>_needsChangeUser
            <span class="apidocSignatureSpan">(connection)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Pool.prototype._purgeConnection">
            function <span class="apidocSignatureSpan">mysql.Pool.prototype.</span>_purgeConnection
            <span class="apidocSignatureSpan">(connection, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Pool.prototype._removeConnection">
            function <span class="apidocSignatureSpan">mysql.Pool.prototype.</span>_removeConnection
            <span class="apidocSignatureSpan">(connection)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Pool.prototype.acquireConnection">
            function <span class="apidocSignatureSpan">mysql.Pool.prototype.</span>acquireConnection
            <span class="apidocSignatureSpan">(connection, cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Pool.prototype.end">
            function <span class="apidocSignatureSpan">mysql.Pool.prototype.</span>end
            <span class="apidocSignatureSpan">(cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Pool.prototype.escape">
            function <span class="apidocSignatureSpan">mysql.Pool.prototype.</span>escape
            <span class="apidocSignatureSpan">(value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Pool.prototype.escapeId">
            function <span class="apidocSignatureSpan">mysql.Pool.prototype.</span>escapeId
            <span class="apidocSignatureSpan">(value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Pool.prototype.getConnection">
            function <span class="apidocSignatureSpan">mysql.Pool.prototype.</span>getConnection
            <span class="apidocSignatureSpan">(cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Pool.prototype.query">
            function <span class="apidocSignatureSpan">mysql.Pool.prototype.</span>query
            <span class="apidocSignatureSpan">(sql, values, cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Pool.prototype.releaseConnection">
            function <span class="apidocSignatureSpan">mysql.Pool.prototype.</span>releaseConnection
            <span class="apidocSignatureSpan">(connection)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql.PoolCluster">module mysql.PoolCluster</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PoolCluster.PoolCluster">
            function <span class="apidocSignatureSpan">mysql.</span>PoolCluster
            <span class="apidocSignatureSpan">(config)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PoolCluster.super_">
            function <span class="apidocSignatureSpan">mysql.PoolCluster.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql.PoolCluster.prototype">module mysql.PoolCluster.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PoolCluster.prototype._clearFindCaches">
            function <span class="apidocSignatureSpan">mysql.PoolCluster.prototype.</span>_clearFindCaches
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PoolCluster.prototype._decreaseErrorCount">
            function <span class="apidocSignatureSpan">mysql.PoolCluster.prototype.</span>_decreaseErrorCount
            <span class="apidocSignatureSpan">(node)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PoolCluster.prototype._findNodeIds">
            function <span class="apidocSignatureSpan">mysql.PoolCluster.prototype.</span>_findNodeIds
            <span class="apidocSignatureSpan">(pattern, includeOffline)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PoolCluster.prototype._getConnection">
            function <span class="apidocSignatureSpan">mysql.PoolCluster.prototype.</span>_getConnection
            <span class="apidocSignatureSpan">(node, cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PoolCluster.prototype._getNode">
            function <span class="apidocSignatureSpan">mysql.PoolCluster.prototype.</span>_getNode
            <span class="apidocSignatureSpan">(id)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PoolCluster.prototype._increaseErrorCount">
            function <span class="apidocSignatureSpan">mysql.PoolCluster.prototype.</span>_increaseErrorCount
            <span class="apidocSignatureSpan">(node)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PoolCluster.prototype._removeNode">
            function <span class="apidocSignatureSpan">mysql.PoolCluster.prototype.</span>_removeNode
            <span class="apidocSignatureSpan">(node)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PoolCluster.prototype.add">
            function <span class="apidocSignatureSpan">mysql.PoolCluster.prototype.</span>add
            <span class="apidocSignatureSpan">(id, config)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PoolCluster.prototype.end">
            function <span class="apidocSignatureSpan">mysql.PoolCluster.prototype.</span>end
            <span class="apidocSignatureSpan">(callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PoolCluster.prototype.getConnection">
            function <span class="apidocSignatureSpan">mysql.PoolCluster.prototype.</span>getConnection
            <span class="apidocSignatureSpan">(pattern, selector, cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PoolCluster.prototype.of">
            function <span class="apidocSignatureSpan">mysql.PoolCluster.prototype.</span>of
            <span class="apidocSignatureSpan">(pattern, selector)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PoolCluster.prototype.remove">
            function <span class="apidocSignatureSpan">mysql.PoolCluster.prototype.</span>remove
            <span class="apidocSignatureSpan">(pattern)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql.PoolConfig">module mysql.PoolConfig</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PoolConfig.PoolConfig">
            function <span class="apidocSignatureSpan">mysql.</span>PoolConfig
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql.PoolConfig.prototype">module mysql.PoolConfig.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PoolConfig.prototype.newConnectionConfig">
            function <span class="apidocSignatureSpan">mysql.PoolConfig.prototype.</span>newConnectionConfig
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql.PoolConnection">module mysql.PoolConnection</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PoolConnection.PoolConnection">
            function <span class="apidocSignatureSpan">mysql.</span>PoolConnection
            <span class="apidocSignatureSpan">(pool, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PoolConnection.super_">
            function <span class="apidocSignatureSpan">mysql.PoolConnection.</span>super_
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql.PoolConnection.prototype">module mysql.PoolConnection.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PoolConnection.prototype._realEnd">
            function <span class="apidocSignatureSpan">mysql.PoolConnection.prototype.</span>_realEnd
            <span class="apidocSignatureSpan">(options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PoolConnection.prototype._removeFromPool">
            function <span class="apidocSignatureSpan">mysql.PoolConnection.prototype.</span>_removeFromPool
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PoolConnection.prototype.destroy">
            function <span class="apidocSignatureSpan">mysql.PoolConnection.prototype.</span>destroy
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PoolConnection.prototype.end">
            function <span class="apidocSignatureSpan">mysql.PoolConnection.prototype.</span>end
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PoolConnection.prototype.release">
            function <span class="apidocSignatureSpan">mysql.PoolConnection.prototype.</span>release
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql.PoolNamespace">module mysql.PoolNamespace</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PoolNamespace.PoolNamespace">
            function <span class="apidocSignatureSpan">mysql.</span>PoolNamespace
            <span class="apidocSignatureSpan">(cluster, pattern, selector)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql.PoolNamespace.prototype">module mysql.PoolNamespace.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PoolNamespace.prototype._getClusterNode">
            function <span class="apidocSignatureSpan">mysql.PoolNamespace.prototype.</span>_getClusterNode
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PoolNamespace.prototype.getConnection">
            function <span class="apidocSignatureSpan">mysql.PoolNamespace.prototype.</span>getConnection
            <span class="apidocSignatureSpan">(cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PoolNamespace.prototype.query">
            function <span class="apidocSignatureSpan">mysql.PoolNamespace.prototype.</span>query
            <span class="apidocSignatureSpan">(sql, values, cb)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql.PoolSelector">module mysql.PoolSelector</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PoolSelector.ORDER">
            function <span class="apidocSignatureSpan">mysql.PoolSelector.</span>ORDER
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PoolSelector.RANDOM">
            function <span class="apidocSignatureSpan">mysql.PoolSelector.</span>RANDOM
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PoolSelector.RR">
            function <span class="apidocSignatureSpan">mysql.PoolSelector.</span>RR
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql.Protocol">module mysql.Protocol</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Protocol.Protocol">
            function <span class="apidocSignatureSpan">mysql.</span>Protocol
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Protocol.super_">
            function <span class="apidocSignatureSpan">mysql.Protocol.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql.Protocol.prototype">module mysql.Protocol.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Protocol.prototype._debugPacket">
            function <span class="apidocSignatureSpan">mysql.Protocol.prototype.</span>_debugPacket
            <span class="apidocSignatureSpan">(incoming, packet)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Protocol.prototype._delegateError">
            function <span class="apidocSignatureSpan">mysql.Protocol.prototype.</span>_delegateError
            <span class="apidocSignatureSpan">(err, sequence)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Protocol.prototype._dequeue">
            function <span class="apidocSignatureSpan">mysql.Protocol.prototype.</span>_dequeue
            <span class="apidocSignatureSpan">(sequence)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Protocol.prototype._determinePacket">
            function <span class="apidocSignatureSpan">mysql.Protocol.prototype.</span>_determinePacket
            <span class="apidocSignatureSpan">(sequence)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Protocol.prototype._emitPacket">
            function <span class="apidocSignatureSpan">mysql.Protocol.prototype.</span>_emitPacket
            <span class="apidocSignatureSpan">(packet)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Protocol.prototype._enqueue">
            function <span class="apidocSignatureSpan">mysql.Protocol.prototype.</span>_enqueue
            <span class="apidocSignatureSpan">(sequence)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Protocol.prototype._hasPendingErrorHandlers">
            function <span class="apidocSignatureSpan">mysql.Protocol.prototype.</span>_hasPendingErrorHandlers
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Protocol.prototype._parsePacket">
            function <span class="apidocSignatureSpan">mysql.Protocol.prototype.</span>_parsePacket
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Protocol.prototype._parsePacketDebug">
            function <span class="apidocSignatureSpan">mysql.Protocol.prototype.</span>_parsePacketDebug
            <span class="apidocSignatureSpan">(packet)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Protocol.prototype._shouldErrorBubbleUp">
            function <span class="apidocSignatureSpan">mysql.Protocol.prototype.</span>_shouldErrorBubbleUp
            <span class="apidocSignatureSpan">(err, sequence)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Protocol.prototype._startSequence">
            function <span class="apidocSignatureSpan">mysql.Protocol.prototype.</span>_startSequence
            <span class="apidocSignatureSpan">(sequence)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Protocol.prototype._validateEnqueue">
            function <span class="apidocSignatureSpan">mysql.Protocol.prototype.</span>_validateEnqueue
            <span class="apidocSignatureSpan">(sequence)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Protocol.prototype.changeUser">
            function <span class="apidocSignatureSpan">mysql.Protocol.prototype.</span>changeUser
            <span class="apidocSignatureSpan">(options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Protocol.prototype.destroy">
            function <span class="apidocSignatureSpan">mysql.Protocol.prototype.</span>destroy
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Protocol.prototype.end">
            function <span class="apidocSignatureSpan">mysql.Protocol.prototype.</span>end
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Protocol.prototype.handleNetworkError">
            function <span class="apidocSignatureSpan">mysql.Protocol.prototype.</span>handleNetworkError
            <span class="apidocSignatureSpan">(err)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Protocol.prototype.handleParserError">
            function <span class="apidocSignatureSpan">mysql.Protocol.prototype.</span>handleParserError
            <span class="apidocSignatureSpan">(err)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Protocol.prototype.handshake">
            function <span class="apidocSignatureSpan">mysql.Protocol.prototype.</span>handshake
            <span class="apidocSignatureSpan">(options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Protocol.prototype.pause">
            function <span class="apidocSignatureSpan">mysql.Protocol.prototype.</span>pause
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Protocol.prototype.ping">
            function <span class="apidocSignatureSpan">mysql.Protocol.prototype.</span>ping
            <span class="apidocSignatureSpan">(options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Protocol.prototype.query">
            function <span class="apidocSignatureSpan">mysql.Protocol.prototype.</span>query
            <span class="apidocSignatureSpan">(options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Protocol.prototype.quit">
            function <span class="apidocSignatureSpan">mysql.Protocol.prototype.</span>quit
            <span class="apidocSignatureSpan">(options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Protocol.prototype.resume">
            function <span class="apidocSignatureSpan">mysql.Protocol.prototype.</span>resume
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Protocol.prototype.stats">
            function <span class="apidocSignatureSpan">mysql.Protocol.prototype.</span>stats
            <span class="apidocSignatureSpan">(options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Protocol.prototype.write">
            function <span class="apidocSignatureSpan">mysql.Protocol.prototype.</span>write
            <span class="apidocSignatureSpan">(buffer)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql.SqlString">module mysql.SqlString</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.SqlString.arrayToList">
            function <span class="apidocSignatureSpan">mysql.SqlString.</span>arrayToList
            <span class="apidocSignatureSpan">(array, timeZone)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.SqlString.bufferToString">
            function <span class="apidocSignatureSpan">mysql.SqlString.</span>bufferToString
            <span class="apidocSignatureSpan">(buffer)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.SqlString.dateToString">
            function <span class="apidocSignatureSpan">mysql.SqlString.</span>dateToString
            <span class="apidocSignatureSpan">(date, timeZone)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.SqlString.escape">
            function <span class="apidocSignatureSpan">mysql.SqlString.</span>escape
            <span class="apidocSignatureSpan">(val, stringifyObjects, timeZone)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.SqlString.escapeId">
            function <span class="apidocSignatureSpan">mysql.SqlString.</span>escapeId
            <span class="apidocSignatureSpan">(val, forbidQualified)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.SqlString.format">
            function <span class="apidocSignatureSpan">mysql.SqlString.</span>format
            <span class="apidocSignatureSpan">(sql, values, stringifyObjects, timeZone)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.SqlString.objectToValues">
            function <span class="apidocSignatureSpan">mysql.SqlString.</span>objectToValues
            <span class="apidocSignatureSpan">(object, timeZone)</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql" id="apidoc.module.mysql">module mysql</a></h1>


    <h2>
        <a href="#apidoc.element.mysql.BufferList" id="apidoc.element.mysql.BufferList">
        function <span class="apidocSignatureSpan">mysql.</span>BufferList
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function BufferList() {
  this.bufs = [];
  this.size = 0;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Connection" id="apidoc.element.mysql.Connection">
        function <span class="apidocSignatureSpan">mysql.</span>Connection
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Connection(options) {
  Events.EventEmitter.call(this);

  this.config = options.config;

  this._socket        = options.socket;
  this._protocol      = new Protocol({config: this.config, connection: this});
  this._connectCalled = false;
  this.state          = 'disconnected';
  this.threadId       = null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.ConnectionConfig" id="apidoc.element.mysql.ConnectionConfig">
        function <span class="apidocSignatureSpan">mysql.</span>ConnectionConfig
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ConnectionConfig(options) {
  if (typeof options === 'string') {
    options = ConnectionConfig.parseUrl(options);
  }

  this.host               = options.host || 'localhost';
  this.port               = options.port || 3306;
  this.localAddress       = options.localAddress;
  this.socketPath         = options.socketPath;
  this.user               = options.user || undefined;
  this.password           = options.password || undefined;
  this.database           = options.database;
  this.connectTimeout     = (options.connectTimeout === undefined)
    ? (10 * 1000)
    : options.connectTimeout;
  this.insecureAuth       = options.insecureAuth || false;
  this.supportBigNumbers  = options.supportBigNumbers || false;
  this.bigNumberStrings   = options.bigNumberStrings || false;
  this.dateStrings        = options.dateStrings || false;
  this.debug              = options.debug;
  this.trace              = options.trace !== false;
  this.stringifyObjects   = options.stringifyObjects || false;
  this.timezone           = options.timezone || 'local';
  this.flags              = options.flags || '';
  this.queryFormat        = options.queryFormat;
  this.pool               = options.pool || undefined;
  this.ssl                = (typeof options.ssl === 'string')
    ? ConnectionConfig.getSSLProfile(options.ssl)
    : (options.ssl || false);
  this.multipleStatements = options.multipleStatements || false;
  this.typeCast           = (options.typeCast === undefined)
    ? true
    : options.typeCast;

  if (this.timezone[0] === ' ') {
    // "+" is a url encoded char for space so it
    // gets translated to space when giving a
    // connection string..
    this.timezone = '+' + this.timezone.substr(1);
  }

  if (this.ssl) {
    // Default rejectUnauthorized to true
    this.ssl.rejectUnauthorized = this.ssl.rejectUnauthorized !== false;
  }

  this.maxPacketSize = 0;
  this.charsetNumber = (options.charset)
    ? ConnectionConfig.getCharsetNumber(options.charset)
    : options.charsetNumber || Charsets.UTF8_GENERAL_CI;

  // Set the client flags
  var defaultFlags = ConnectionConfig.getDefaultFlags(options);
  this.clientFlags = ConnectionConfig.mergeFlags(defaultFlags, options.flags);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.PacketWriter" id="apidoc.element.mysql.PacketWriter">
        function <span class="apidocSignatureSpan">mysql.</span>PacketWriter
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function PacketWriter() {
  this._buffer = null;
  this._offset = 0;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Parser" id="apidoc.element.mysql.Parser">
        function <span class="apidocSignatureSpan">mysql.</span>Parser
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Parser(options) {
  options = options || {};

  this._supportBigNumbers = options.config &amp;&amp; options.config.supportBigNumbers;
  this._buffer            = new Buffer(0);
  this._nextBuffers       = new BufferList();
  this._longPacketBuffers = new BufferList();
  this._offset            = 0;
  this._packetEnd         = null;
  this._packetHeader      = null;
  this._packetOffset      = null;
  this._onError           = options.onError || function(err) { throw err; };
  this._onPacket          = options.onPacket || function() {};
  this._nextPacketNumber  = 0;
  this._encoding          = 'utf-8';
  this._paused            = false;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Pool" id="apidoc.element.mysql.Pool">
        function <span class="apidocSignatureSpan">mysql.</span>Pool
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Pool(options) {
  EventEmitter.call(this);
  this.config = options.config;
  this.config.connectionConfig.pool = this;

  this._acquiringConnections = [];
  this._allConnections       = [];
  this._freeConnections      = [];
  this._connectionQueue      = [];
  this._closed               = false;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.PoolCluster" id="apidoc.element.mysql.PoolCluster">
        function <span class="apidocSignatureSpan">mysql.</span>PoolCluster
        <span class="apidocSignatureSpan">(config)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function PoolCluster(config) {
  EventEmitter.call(this);

  config = config || {};
  this._canRetry = typeof config.canRetry === 'undefined' ? true : config.canRetry;
  this._defaultSelector = config.defaultSelector || 'RR';
  this._removeNodeErrorCount = config.removeNodeErrorCount || 5;
  this._restoreNodeTimeout = config.restoreNodeTimeout || 0;

  this._closed = false;
  this._findCaches = Object.create(null);
  this._lastId = 0;
  this._namespaces = Object.create(null);
  this._nodes = Object.create(null);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.PoolConfig" id="apidoc.element.mysql.PoolConfig">
        function <span class="apidocSignatureSpan">mysql.</span>PoolConfig
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function PoolConfig(options) {
  if (typeof options === 'string') {
    options = ConnectionConfig.parseUrl(options);
  }

  this.acquireTimeout     = (options.acquireTimeout === undefined)
    ? 10 * 1000
    : Number(options.acquireTimeout);
  this.connectionConfig   = new ConnectionConfig(options);
  this.waitForConnections = (options.waitForConnections === undefined)
    ? true
    : Boolean(options.waitForConnections);
  this.connectionLimit    = (options.connectionLimit === undefined)
    ? 10
    : Number(options.connectionLimit);
  this.queueLimit         = (options.queueLimit === undefined)
    ? 0
    : Number(options.queueLimit);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.PoolConnection" id="apidoc.element.mysql.PoolConnection">
        function <span class="apidocSignatureSpan">mysql.</span>PoolConnection
        <span class="apidocSignatureSpan">(pool, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function PoolConnection(pool, options) {
  Connection.call(this, options);
  this._pool  = pool;

  // Bind connection to pool domain
  if (Events.usingDomains) {
    this.domain = pool.domain;
  }

  // When a fatal error occurs the connection's protocol ends, which will cause
  // the connection to end as well, thus we only need to watch for the end event
  // and we will be notified of disconnects.
  this.on('end', this._removeFromPool);
  this.on('error', function (err) {
    if (err.fatal) {
      this._removeFromPool();
    }
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.PoolNamespace" id="apidoc.element.mysql.PoolNamespace">
        function <span class="apidocSignatureSpan">mysql.</span>PoolNamespace
        <span class="apidocSignatureSpan">(cluster, pattern, selector)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function PoolNamespace(cluster, pattern, selector) {
  this._cluster = cluster;
  this._pattern = pattern;
  this._selector = new PoolSelector[selector]();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Protocol" id="apidoc.element.mysql.Protocol">
        function <span class="apidocSignatureSpan">mysql.</span>Protocol
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Protocol(options) {
  Stream.call(this);

  options = options || {};

  this.readable = true;
  this.writable = true;

  this._config                        = options.config || {};
  this._connection                    = options.connection;
  this._callback                      = null;
  this._fatalError                    = null;
  this._quitSequence                  = null;
  this._handshakeSequence             = null;
  this._handshaked                    = false;
  this._ended                         = false;
  this._destroyed                     = false;
  this._queue                         = [];
  this._handshakeInitializationPacket = null;

  this._parser = new Parser({
    onError  : this.handleParserError.bind(this),
    onPacket : this._parsePacket.bind(this),
    config   : this._config
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.createConnection" id="apidoc.element.mysql.createConnection">
        function <span class="apidocSignatureSpan">mysql.</span>createConnection
        <span class="apidocSignatureSpan">(config)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function createConnection(config) {
  var Connection       = loadClass('Connection');
  var ConnectionConfig = loadClass('ConnectionConfig');

  return new Connection({config: new ConnectionConfig(config)});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
This is a node.js driver for mysql. It is written in JavaScript, does not
require compiling, and is 100% MIT licensed.

Here is an example on how to use it:

```js
var mysql      = require('mysql');
var connection = mysql.<span class="apidocCodeKeywordSpan">createConnection</span>({
  host     : 'localhost',
  user     : 'me',
  password : 'secret',
  database : 'my_db'
});

connection.connect();
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.createPool" id="apidoc.element.mysql.createPool">
        function <span class="apidocSignatureSpan">mysql.</span>createPool
        <span class="apidocSignatureSpan">(config)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function createPool(config) {
  var Pool       = loadClass('Pool');
  var PoolConfig = loadClass('PoolConfig');

  return new Pool({config: new PoolConfig(config)});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
```

Unlike `end()` the `destroy()` method does not take a callback argument.

## Pooling connections

Rather than creating and managing connections one-by-one, this module also
provides built-in connection pooling using `mysql.<span class="apidocCodeKeywordSpan">createPool</span>(config)`.
[Read more about connection pooling](https://en.wikipedia.org/wiki/Connection_pool).

Use pool directly.
```js
var mysql = require('mysql');
var pool  = mysql.createPool({
connectionLimit : 10,
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.createPoolCluster" id="apidoc.element.mysql.createPoolCluster">
        function <span class="apidocSignatureSpan">mysql.</span>createPoolCluster
        <span class="apidocSignatureSpan">(config)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function createPoolCluster(config) {
  var PoolCluster = loadClass('PoolCluster');

  return new PoolCluster(config);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

## PoolCluster

PoolCluster provides multiple hosts connection. (group &amp; retry &amp; selector)

```js
// create
var poolCluster = mysql.<span class="apidocCodeKeywordSpan">createPoolCluster</span>();

// add configurations (the config is a pool config object)
poolCluster.add(config); // add configuration with automatic name
poolCluster.add('MASTER', masterConfig); // add a named configuration
poolCluster.add('SLAVE1', slave1Config);
poolCluster.add('SLAVE2', slave2Config);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.createQuery" id="apidoc.element.mysql.createQuery">
        function <span class="apidocSignatureSpan">mysql.</span>createQuery
        <span class="apidocSignatureSpan">(sql, values, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function createQuery(sql, values, callback) {
  var Connection = loadClass('Connection');

  return Connection.createQuery(sql, values, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* @param {function} [callback] The callback to use when query is complete
* @return {Query} New query object
* @public
*/
exports.createQuery = function createQuery(sql, values, callback) {
 var Connection = loadClass('Connection');

 return Connection.<span class="apidocCodeKeywordSpan">createQuery</span>(sql, values, callback);
};

/**
* Escape a value for SQL.
* @param {*} value The value to escape
* @param {boolean} [stringifyObjects=false] Setting if objects should be stringified
* @param {string} [timeZone=local] Setting for time zone to use for Date conversion
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.escape" id="apidoc.element.mysql.escape">
        function <span class="apidocSignatureSpan">mysql.</span>escape
        <span class="apidocSignatureSpan">(value, stringifyObjects, timeZone)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function escape(value, stringifyObjects, timeZone) {
  var SqlString = loadClass('SqlString');

  return SqlString.escape(value, stringifyObjects, timeZone);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
);
```

## Escaping query values

In order to avoid SQL Injection attacks, you should always escape any user
provided data before using it inside a SQL query. You can do so using the
`mysql.<span class="apidocCodeKeywordSpan">escape</span>()`, `connection.escape()` or `pool.escape()` methods:

```js
var userId = 'some user provided value';
var sql    = 'SELECT * FROM users WHERE id = ' + connection.escape(userId);
connection.query(sql, function (error, results, fields) {
if (error) throw error;
// ...
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.escapeId" id="apidoc.element.mysql.escapeId">
        function <span class="apidocSignatureSpan">mysql.</span>escapeId
        <span class="apidocSignatureSpan">(value, forbidQualified)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function escapeId(value, forbidQualified) {
  var SqlString = loadClass('SqlString');

  return SqlString.escapeId(value, forbidQualified);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

console.log(query); // SELECT * FROM posts WHERE title='Hello MySQL'
```

## Escaping query identifiers

If you can't trust an SQL identifier (database / table / column name) because it is
provided by a user, you should escape it with `mysql.<span class="apidocCodeKeywordSpan">escapeId</span>(identifier)`,
`connection.escapeId(identifier)` or `pool.escapeId(identifier)` like this:

```js
var sorter = 'date';
var sql    = 'SELECT * FROM posts ORDER BY ' + connection.escapeId(sorter);
connection.query(sql, function (error, results, fields) {
if (error) throw error;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.format" id="apidoc.element.mysql.format">
        function <span class="apidocSignatureSpan">mysql.</span>format
        <span class="apidocSignatureSpan">(sql, values, stringifyObjects, timeZone)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function format(sql, values, stringifyObjects, timeZone) {
  var SqlString = loadClass('SqlString');

  return SqlString.format(sql, values, stringifyObjects, timeZone);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
### Preparing Queries

You can use mysql.format to prepare a query with multiple insertion points, utilizing the proper escaping for ids and values. A
simple example of this follows:

```js
var sql = "SELECT * FROM ?? WHERE ?? = ?";
var inserts = ['users', 'id', userId];
sql = mysql.<span class="apidocCodeKeywordSpan">format</span>(sql, inserts);
```

Following this you then have a valid, escaped query that you can then send to the database safely. This is useful if you are looking
 to prepare the query before actually sending it to the database. As mysql.format is exposed from SqlString.format you also have
 the option (but are not required) to pass in stringifyObject and timezone, allowing you provide a custom means of turning objects
 into strings, as well as a location-specific/timezone-aware Date.

### Custom format

If you prefer to have another type of query escape format, there's a connection configuration option you can use to define
a custom format function. You can access the connection object if you want to use the built-in `.escape()` or any other connection
 function.
...</pre></li>
    </ul>




























</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql.Auth" id="apidoc.module.mysql.Auth">module mysql.Auth</a></h1>


    <h2>
        <a href="#apidoc.element.mysql.Auth.add32" id="apidoc.element.mysql.Auth.add32">
        function <span class="apidocSignatureSpan">mysql.Auth.</span>add32
        <span class="apidocSignatureSpan">(a, b)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">add32 = function (a, b){
  var w1 = a[1] + b[1],
      w2 = a[0] + b[0] + ((w1 &amp; 0xFFFF0000) &gt;&gt; 16);

  return [w2 &amp; 0xFFFF, w1 &amp; 0xFFFF];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
if (c === 32 || c === 9) {
  // skip space in password
  continue;
}

// nr^= (((nr &amp; 63)+add)*c)+ (nr &lt;&lt; 8);
// nr = xor(nr, add(mul(add(and(nr, 63), add), c), shl(nr, 8)))
nr = this.xor32(nr, this.<span class="apidocCodeKeywordSpan">add32</span>(this.mul32(this.add32(this.and32(nr, [0,63]), [0,add]), [
0,c]), this.shl32(nr, 8)));

// nr2+=(nr2 &lt;&lt; 8) ^ nr;
// nr2 = add(nr2, xor(shl(nr2, 8), nr))
nr2 = this.add32(nr2, this.xor32(this.shl32(nr2, 8), nr));

// add+=tmp;
add += c;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Auth.and32" id="apidoc.element.mysql.Auth.and32">
        function <span class="apidocSignatureSpan">mysql.Auth.</span>and32
        <span class="apidocSignatureSpan">(a, b)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">and32 = function (a, b){
  return [a[0] &amp; b[0], a[1] &amp; b[1]];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
if (c === 32 || c === 9) {
  // skip space in password
  continue;
}

// nr^= (((nr &amp; 63)+add)*c)+ (nr &lt;&lt; 8);
// nr = xor(nr, add(mul(add(and(nr, 63), add), c), shl(nr, 8)))
nr = this.xor32(nr, this.add32(this.mul32(this.add32(this.<span class="apidocCodeKeywordSpan">and32</span>(nr, [0,63]), [0,add]), [
0,c]), this.shl32(nr, 8)));

// nr2+=(nr2 &lt;&lt; 8) ^ nr;
// nr2 = add(nr2, xor(shl(nr2, 8), nr))
nr2 = this.add32(nr2, this.xor32(this.shl32(nr2, 8), nr));

// add+=tmp;
add += c;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Auth.hashPassword" id="apidoc.element.mysql.Auth.hashPassword">
        function <span class="apidocSignatureSpan">mysql.Auth.</span>hashPassword
        <span class="apidocSignatureSpan">(password)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">hashPassword = function (password) {
  var nr = [0x5030, 0x5735],
      add = 7,
      nr2 = [0x1234, 0x5671],
      result = new Buffer(8);

  if (typeof password === 'string'){
    password = new Buffer(password);
  }

  for (var i = 0; i &lt; password.length; i++) {
    var c = password[i];
    if (c === 32 || c === 9) {
      // skip space in password
      continue;
    }

    // nr^= (((nr &amp; 63)+add)*c)+ (nr &lt;&lt; 8);
    // nr = xor(nr, add(mul(add(and(nr, 63), add), c), shl(nr, 8)))
    nr = this.xor32(nr, this.add32(this.mul32(this.add32(this.and32(nr, [0,63]), [0,add]), [0,c]), this.shl32(nr, 8)));

    // nr2+=(nr2 &lt;&lt; 8) ^ nr;
    // nr2 = add(nr2, xor(shl(nr2, 8), nr))
    nr2 = this.add32(nr2, this.xor32(this.shl32(nr2, 8), nr));

    // add+=tmp;
    add += c;
  }

  this.int31Write(result, nr, 0);
  this.int31Write(result, nr2, 4);

  return result;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
r.seed2 = (r.seed1 + r.seed2 + 33) % r.max_value;

return r.seed1 / r.max_value_dbl;
};

Auth.scramble323 = function(message, password) {
var to = new Buffer(8),
    hashPass = this.<span class="apidocCodeKeywordSpan">hashPassword</span>(password),
    hashMessage = this.hashPassword(message.slice(0, 8)),
    seed1 = this.int32Read(hashPass, 0) ^ this.int32Read(hashMessage, 0),
    seed2 = this.int32Read(hashPass, 4) ^ this.int32Read(hashMessage, 4),
    r = this.randomInit(seed1, seed2);

for (var i = 0; i &lt; 8; i++){
  to[i] = Math.floor(this.myRnd(r) * 31) + 64;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Auth.int31Write" id="apidoc.element.mysql.Auth.int31Write">
        function <span class="apidocSignatureSpan">mysql.Auth.</span>int31Write
        <span class="apidocSignatureSpan">(buffer, number, offset)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">int31Write = function (buffer, number, offset) {
  buffer[offset] = (number[0] &gt;&gt; 8) &amp; 0x7F;
  buffer[offset + 1] = (number[0]) &amp; 0xFF;
  buffer[offset + 2] = (number[1] &gt;&gt; 8) &amp; 0xFF;
  buffer[offset + 3] = (number[1]) &amp; 0xFF;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  // nr2 = add(nr2, xor(shl(nr2, 8), nr))
  nr2 = this.add32(nr2, this.xor32(this.shl32(nr2, 8), nr));

  // add+=tmp;
  add += c;
}

this.<span class="apidocCodeKeywordSpan">int31Write</span>(result, nr, 0);
this.int31Write(result, nr2, 4);

return result;
};

Auth.randomInit = function(seed1, seed2) {
return {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Auth.int32Read" id="apidoc.element.mysql.Auth.int32Read">
        function <span class="apidocSignatureSpan">mysql.Auth.</span>int32Read
        <span class="apidocSignatureSpan">(buffer, offset)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">int32Read = function (buffer, offset){
  return (buffer[offset] &lt;&lt; 24)
       + (buffer[offset + 1] &lt;&lt; 16)
       + (buffer[offset + 2] &lt;&lt; 8)
       + (buffer[offset + 3]);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
return r.seed1 / r.max_value_dbl;
};

Auth.scramble323 = function(message, password) {
var to = new Buffer(8),
    hashPass = this.hashPassword(password),
    hashMessage = this.hashPassword(message.slice(0, 8)),
    seed1 = this.<span class="apidocCodeKeywordSpan">int32Read</span>(hashPass, 0) ^ this.int32Read(hashMessage, 0),
    seed2 = this.int32Read(hashPass, 4) ^ this.int32Read(hashMessage, 4),
    r = this.randomInit(seed1, seed2);

for (var i = 0; i &lt; 8; i++){
  to[i] = Math.floor(this.myRnd(r) * 31) + 64;
}
var extra = (Math.floor(this.myRnd(r) * 31));
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Auth.mul32" id="apidoc.element.mysql.Auth.mul32">
        function <span class="apidocSignatureSpan">mysql.Auth.</span>mul32
        <span class="apidocSignatureSpan">(a, b)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">mul32 = function (a, b){
  // based on this example of multiplying 32b ints using 16b
  // http://www.dsprelated.com/showmessage/89790/1.php
  var w1 = a[1] * b[1],
      w2 = (((a[1] * b[1]) &gt;&gt; 16) &amp; 0xFFFF) + ((a[0] * b[1]) &amp; 0xFFFF) + (a[1] * b[0] &amp; 0xFFFF);

  return [w2 &amp; 0xFFFF, w1 &amp; 0xFFFF];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
if (c === 32 || c === 9) {
  // skip space in password
  continue;
}

// nr^= (((nr &amp; 63)+add)*c)+ (nr &lt;&lt; 8);
// nr = xor(nr, add(mul(add(and(nr, 63), add), c), shl(nr, 8)))
nr = this.xor32(nr, this.add32(this.<span class="apidocCodeKeywordSpan">mul32</span>(this.add32(this.and32(nr, [0,63]), [0,add]), [
0,c]), this.shl32(nr, 8)));

// nr2+=(nr2 &lt;&lt; 8) ^ nr;
// nr2 = add(nr2, xor(shl(nr2, 8), nr))
nr2 = this.add32(nr2, this.xor32(this.shl32(nr2, 8), nr));

// add+=tmp;
add += c;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Auth.myRnd" id="apidoc.element.mysql.Auth.myRnd">
        function <span class="apidocSignatureSpan">mysql.Auth.</span>myRnd
        <span class="apidocSignatureSpan">(r)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">myRnd = function (r){
  r.seed1 = (r.seed1 * 3 + r.seed2) % r.max_value;
  r.seed2 = (r.seed1 + r.seed2 + 33) % r.max_value;

  return r.seed1 / r.max_value_dbl;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    hashPass = this.hashPassword(password),
    hashMessage = this.hashPassword(message.slice(0, 8)),
    seed1 = this.int32Read(hashPass, 0) ^ this.int32Read(hashMessage, 0),
    seed2 = this.int32Read(hashPass, 4) ^ this.int32Read(hashMessage, 4),
    r = this.randomInit(seed1, seed2);

for (var i = 0; i &lt; 8; i++){
  to[i] = Math.floor(this.<span class="apidocCodeKeywordSpan">myRnd</span>(r) * 31) + 64;
}
var extra = (Math.floor(this.myRnd(r) * 31));

for (var i = 0; i &lt; 8; i++){
  to[i] ^= extra;
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Auth.randomInit" id="apidoc.element.mysql.Auth.randomInit">
        function <span class="apidocSignatureSpan">mysql.Auth.</span>randomInit
        <span class="apidocSignatureSpan">(seed1, seed2)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">randomInit = function (seed1, seed2) {
  return {
    max_value     : 0x3FFFFFFF,
    max_value_dbl : 0x3FFFFFFF,
    seed1         : seed1 % 0x3FFFFFFF,
    seed2         : seed2 % 0x3FFFFFFF
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

Auth.scramble323 = function(message, password) {
var to = new Buffer(8),
    hashPass = this.hashPassword(password),
    hashMessage = this.hashPassword(message.slice(0, 8)),
    seed1 = this.int32Read(hashPass, 0) ^ this.int32Read(hashMessage, 0),
    seed2 = this.int32Read(hashPass, 4) ^ this.int32Read(hashMessage, 4),
    r = this.<span class="apidocCodeKeywordSpan">randomInit</span>(seed1, seed2);

for (var i = 0; i &lt; 8; i++){
  to[i] = Math.floor(this.myRnd(r) * 31) + 64;
}
var extra = (Math.floor(this.myRnd(r) * 31));

for (var i = 0; i &lt; 8; i++){
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Auth.scramble323" id="apidoc.element.mysql.Auth.scramble323">
        function <span class="apidocSignatureSpan">mysql.Auth.</span>scramble323
        <span class="apidocSignatureSpan">(message, password)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">scramble323 = function (message, password) {
  var to = new Buffer(8),
      hashPass = this.hashPassword(password),
      hashMessage = this.hashPassword(message.slice(0, 8)),
      seed1 = this.int32Read(hashPass, 0) ^ this.int32Read(hashMessage, 0),
      seed2 = this.int32Read(hashPass, 4) ^ this.int32Read(hashMessage, 4),
      r = this.randomInit(seed1, seed2);

  for (var i = 0; i &lt; 8; i++){
    to[i] = Math.floor(this.myRnd(r) * 31) + 64;
  }
  var extra = (Math.floor(this.myRnd(r) * 31));

  for (var i = 0; i &lt; 8; i++){
    to[i] ^= extra;
  }

  return to;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Auth.sha1" id="apidoc.element.mysql.Auth.sha1">
        function <span class="apidocSignatureSpan">mysql.Auth.</span>sha1
        <span class="apidocSignatureSpan">(msg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function sha1(msg) {
  var hash = Crypto.createHash('sha1');
  hash.update(msg, 'binary');
  return hash.digest('binary');
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Auth.shl32" id="apidoc.element.mysql.Auth.shl32">
        function <span class="apidocSignatureSpan">mysql.Auth.</span>shl32
        <span class="apidocSignatureSpan">(a, b)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">shl32 = function (a, b){
  // assume b is 16 or less
  var w1 = a[1] &lt;&lt; b,
      w2 = (a[0] &lt;&lt; b) | ((w1 &amp; 0xFFFF0000) &gt;&gt; 16);

  return [w2 &amp; 0xFFFF, w1 &amp; 0xFFFF];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
if (c === 32 || c === 9) {
  // skip space in password
  continue;
}

// nr^= (((nr &amp; 63)+add)*c)+ (nr &lt;&lt; 8);
// nr = xor(nr, add(mul(add(and(nr, 63), add), c), shl(nr, 8)))
nr = this.xor32(nr, this.add32(this.mul32(this.add32(this.and32(nr, [0,63]), [0,add]), [0,c]), this.<span class="apidocCodeKeywordSpan
">shl32</span>(nr, 8)));

// nr2+=(nr2 &lt;&lt; 8) ^ nr;
// nr2 = add(nr2, xor(shl(nr2, 8), nr))
nr2 = this.add32(nr2, this.xor32(this.shl32(nr2, 8), nr));

// add+=tmp;
add += c;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Auth.token" id="apidoc.element.mysql.Auth.token">
        function <span class="apidocSignatureSpan">mysql.Auth.</span>token
        <span class="apidocSignatureSpan">(password, scramble)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">token = function (password, scramble) {
  if (!password) {
    return new Buffer(0);
  }

  // password must be in binary format, not utf8
  var stage1 = sha1((new Buffer(password, 'utf8')).toString('binary'));
  var stage2 = sha1(stage1);
  var stage3 = sha1(scramble.toString('binary') + stage2);
  return xor(stage3, stage1);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Auth.xor" id="apidoc.element.mysql.Auth.xor">
        function <span class="apidocSignatureSpan">mysql.Auth.</span>xor
        <span class="apidocSignatureSpan">(a, b)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function xor(a, b) {
  a = new Buffer(a, 'binary');
  b = new Buffer(b, 'binary');
  var result = new Buffer(a.length);
  for (var i = 0; i &lt; a.length; i++) {
    result[i] = (a[i] ^ b[i]);
  }
  return result;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Auth.xor32" id="apidoc.element.mysql.Auth.xor32">
        function <span class="apidocSignatureSpan">mysql.Auth.</span>xor32
        <span class="apidocSignatureSpan">(a, b)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">xor32 = function (a, b){
  return [a[0] ^ b[0], a[1] ^ b[1]];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
if (c === 32 || c === 9) {
  // skip space in password
  continue;
}

// nr^= (((nr &amp; 63)+add)*c)+ (nr &lt;&lt; 8);
// nr = xor(nr, add(mul(add(and(nr, 63), add), c), shl(nr, 8)))
nr = this.<span class="apidocCodeKeywordSpan">xor32</span>(nr, this.add32(this.mul32(this.add32(this.and32(nr, [0,63]), [0,add]), [
0,c]), this.shl32(nr, 8)));

// nr2+=(nr2 &lt;&lt; 8) ^ nr;
// nr2 = add(nr2, xor(shl(nr2, 8), nr))
nr2 = this.add32(nr2, this.xor32(this.shl32(nr2, 8), nr));

// add+=tmp;
add += c;
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql.BufferList" id="apidoc.module.mysql.BufferList">module mysql.BufferList</a></h1>


    <h2>
        <a href="#apidoc.element.mysql.BufferList.BufferList" id="apidoc.element.mysql.BufferList.BufferList">
        function <span class="apidocSignatureSpan">mysql.</span>BufferList
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function BufferList() {
  this.bufs = [];
  this.size = 0;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql.BufferList.prototype" id="apidoc.module.mysql.BufferList.prototype">module mysql.BufferList.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mysql.BufferList.prototype.push" id="apidoc.element.mysql.BufferList.prototype.push">
        function <span class="apidocSignatureSpan">mysql.BufferList.prototype.</span>push
        <span class="apidocSignatureSpan">(buf)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function push(buf) {
  if (!buf || !buf.length) {
    return;
  }

  this.bufs.push(buf);
  this.size += buf.length;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  '+RESERVED',          // Unused
  '+SECURE_CONNECTION', // Supports Authentication::Native41
  '+TRANSACTIONS'       // Expects status flags
];

if (options &amp;&amp; options.multipleStatements) {
  // May send multiple statements per COM_QUERY and COM_STMT_PREPARE
  defaultFlags.<span class="apidocCodeKeywordSpan">push</span>('+MULTI_STATEMENTS');
}

return defaultFlags;
};

ConnectionConfig.getSSLProfile = function getSSLProfile(name) {
if (!SSLProfiles) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.BufferList.prototype.shift" id="apidoc.element.mysql.BufferList.prototype.shift">
        function <span class="apidocSignatureSpan">mysql.BufferList.prototype.</span>shift
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function shift() {
  var buf = this.bufs.shift();

  if (buf) {
    this.size -= buf.length;
  }

  return buf;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  host     : url.hostname,
  port     : url.port,
  database : url.pathname.substr(1)
};

if (url.auth) {
  var auth = url.auth.split(':');
  options.user     = auth.<span class="apidocCodeKeywordSpan">shift</span>();
  options.password = auth.join(':');
}

if (url.query) {
  for (var key in url.query) {
    var value = url.query[key];
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql.Connection" id="apidoc.module.mysql.Connection">module mysql.Connection</a></h1>


    <h2>
        <a href="#apidoc.element.mysql.Connection.Connection" id="apidoc.element.mysql.Connection.Connection">
        function <span class="apidocSignatureSpan">mysql.</span>Connection
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Connection(options) {
  Events.EventEmitter.call(this);

  this.config = options.config;

  this._socket        = options.socket;
  this._protocol      = new Protocol({config: this.config, connection: this});
  this._connectCalled = false;
  this.state          = 'disconnected';
  this.threadId       = null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Connection.createQuery" id="apidoc.element.mysql.Connection.createQuery">
        function <span class="apidocSignatureSpan">mysql.Connection.</span>createQuery
        <span class="apidocSignatureSpan">(sql, values, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function createQuery(sql, values, callback) {
  if (sql instanceof Query) {
    return sql;
  }

  var cb      = bindToCurrentDomain(callback);
  var options = {};

  if (typeof sql === 'function') {
    cb = bindToCurrentDomain(sql);
    return new Query(options, cb);
  }

  if (typeof sql === 'object') {
    for (var prop in sql) {
      options[prop] = sql[prop];
    }

    if (typeof values === 'function') {
      cb = bindToCurrentDomain(values);
    } else if (values !== undefined) {
      options.values = values;
    }

    return new Query(options, cb);
  }

  options.sql    = sql;
  options.values = values;

  if (typeof values === 'function') {
    cb = bindToCurrentDomain(values);
    options.values = undefined;
  }

  if (cb === undefined &amp;&amp; callback !== undefined) {
    throw new TypeError('argument callback must be a function when provided');
  }

  return new Query(options, cb);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* @param {function} [callback] The callback to use when query is complete
* @return {Query} New query object
* @public
*/
exports.createQuery = function createQuery(sql, values, callback) {
 var Connection = loadClass('Connection');

 return Connection.<span class="apidocCodeKeywordSpan">createQuery</span>(sql, values, callback);
};

/**
* Escape a value for SQL.
* @param {*} value The value to escape
* @param {boolean} [stringifyObjects=false] Setting if objects should be stringified
* @param {string} [timeZone=local] Setting for time zone to use for Date conversion
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Connection.super_" id="apidoc.element.mysql.Connection.super_">
        function <span class="apidocSignatureSpan">mysql.Connection.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function EventEmitter() {
  EventEmitter.init.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql.Connection.prototype" id="apidoc.module.mysql.Connection.prototype">module mysql.Connection.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mysql.Connection.prototype._handleConnectTimeout" id="apidoc.element.mysql.Connection.prototype._handleConnectTimeout">
        function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>_handleConnectTimeout
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_handleConnectTimeout = function () {
  if (this._socket) {
    this._socket.setTimeout(0);
    this._socket.destroy();
  }

  var err = new Error('connect ETIMEDOUT');
  err.errorno = 'ETIMEDOUT';
  err.code = 'ETIMEDOUT';
  err.syscall = 'connect';

  this._handleNetworkError(err);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Connection.prototype._handleNetworkError" id="apidoc.element.mysql.Connection.prototype._handleNetworkError">
        function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>_handleNetworkError
        <span class="apidocSignatureSpan">(err)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_handleNetworkError = function (err) {
  this._protocol.handleNetworkError(err);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  secureContext      : secureContext,
  isServer           : false
});

// error handler for secure socket
secureSocket.on('_tlsError', function(err) {
  if (secureEstablished) {
    connection.<span class="apidocCodeKeywordSpan">_handleNetworkError</span>(err);
  } else {
    onSecure(err);
  }
});

// cleartext &lt;-&gt; protocol
secureSocket.pipe(this._protocol);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Connection.prototype._handleProtocolConnect" id="apidoc.element.mysql.Connection.prototype._handleProtocolConnect">
        function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>_handleProtocolConnect
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_handleProtocolConnect = function () {
  this.state = 'connected';
  this.emit('connect');
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Connection.prototype._handleProtocolDrain" id="apidoc.element.mysql.Connection.prototype._handleProtocolDrain">
        function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>_handleProtocolDrain
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_handleProtocolDrain = function () {
  this.emit('drain');
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Connection.prototype._handleProtocolEnd" id="apidoc.element.mysql.Connection.prototype._handleProtocolEnd">
        function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>_handleProtocolEnd
        <span class="apidocSignatureSpan">(err)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_handleProtocolEnd = function (err) {
  this.state = 'disconnected';
  this.emit('end', err);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Connection.prototype._handleProtocolEnqueue" id="apidoc.element.mysql.Connection.prototype._handleProtocolEnqueue">
        function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>_handleProtocolEnqueue
        <span class="apidocSignatureSpan">(sequence)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _handleProtocolEnqueue(sequence) {
  this.emit('enqueue', sequence);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Connection.prototype._handleProtocolError" id="apidoc.element.mysql.Connection.prototype._handleProtocolError">
        function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>_handleProtocolError
        <span class="apidocSignatureSpan">(err)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_handleProtocolError = function (err) {
  this.state = 'protocol_error';
  this.emit('error', err);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Connection.prototype._handleProtocolHandshake" id="apidoc.element.mysql.Connection.prototype._handleProtocolHandshake">
        function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>_handleProtocolHandshake
        <span class="apidocSignatureSpan">(packet)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _handleProtocolHandshake(packet) {
  this.state    = 'authenticated';
  this.threadId = packet.threadId;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Connection.prototype._implyConnect" id="apidoc.element.mysql.Connection.prototype._implyConnect">
        function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>_implyConnect
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_implyConnect = function () {
  if (!this._connectCalled) {
    this.connect();
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

Connection.prototype.changeUser = function changeUser(options, callback) {
if (!callback &amp;&amp; typeof options === 'function') {
  callback = options;
  options = {};
}

this.<span class="apidocCodeKeywordSpan">_implyConnect</span>();

var charsetNumber = (options.charset)
  ? ConnectionConfig.getCharsetNumber(options.charset)
  : this.config.charsetNumber;

return this._protocol.changeUser({
  user          : options.user || this.config.user,
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Connection.prototype._startTLS" id="apidoc.element.mysql.Connection.prototype._startTLS">
        function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>_startTLS
        <span class="apidocSignatureSpan">(onSecure)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _startTLS(onSecure) {
  var connection    = this;
  var secureContext = tls.createSecureContext({
    ca         : this.config.ssl.ca,
    cert       : this.config.ssl.cert,
    ciphers    : this.config.ssl.ciphers,
    key        : this.config.ssl.key,
    passphrase : this.config.ssl.passphrase
  });

  // "unpipe"
  this._socket.removeAllListeners('data');
  this._protocol.removeAllListeners('data');

  // socket &lt;-&gt; encrypted
  var rejectUnauthorized = this.config.ssl.rejectUnauthorized;
  var secureEstablished  = false;
  var secureSocket       = new tls.TLSSocket(this._socket, {
    rejectUnauthorized : rejectUnauthorized,
    requestCert        : true,
    secureContext      : secureContext,
    isServer           : false
  });

  // error handler for secure socket
  secureSocket.on('_tlsError', function(err) {
    if (secureEstablished) {
      connection._handleNetworkError(err);
    } else {
      onSecure(err);
    }
  });

  // cleartext &lt;-&gt; protocol
  secureSocket.pipe(this._protocol);
  this._protocol.on('data', function(data) {
    secureSocket.write(data);
  });

  secureSocket.on('secure', function() {
    secureEstablished = true;

    onSecure(rejectUnauthorized ? this.ssl.verifyError() : null);
  });

  // start TLS communications
  secureSocket._start();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  err.fatal   = true;
  err.timeout = sequence._timeout;

  self._delegateError(err, sequence);
})
.on('start-tls', function() {
  Timers.active(sequence);
  self._connection.<span class="apidocCodeKeywordSpan">_startTLS</span>(function(err) {
    if (err) {
      // SSL negotiation error are fatal
      err.code  = 'HANDSHAKE_SSL_ERROR';
      err.fatal = true;
      sequence.end(err);
      return;
    }
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Connection.prototype.beginTransaction" id="apidoc.element.mysql.Connection.prototype.beginTransaction">
        function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>beginTransaction
        <span class="apidocSignatureSpan">(options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function beginTransaction(options, callback) {
  if (!callback &amp;&amp; typeof options === 'function') {
    callback = options;
    options = {};
  }

  options = options || {};
  options.sql = 'START TRANSACTION';
  options.values = null;

  return this.query(options, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
```

## Transactions

Simple transaction support is available at the connection level:

```js
connection.<span class="apidocCodeKeywordSpan">beginTransaction</span>(function(err) {
if (err) { throw err; }
connection.query('INSERT INTO posts SET title=?', title, function (error, results, fields) {
  if (error) {
    return connection.rollback(function() {
      throw error;
    });
  }
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Connection.prototype.changeUser" id="apidoc.element.mysql.Connection.prototype.changeUser">
        function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>changeUser
        <span class="apidocSignatureSpan">(options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function changeUser(options, callback) {
  if (!callback &amp;&amp; typeof options === 'function') {
    callback = options;
    options = {};
  }

  this._implyConnect();

  var charsetNumber = (options.charset)
    ? ConnectionConfig.getCharsetNumber(options.charset)
    : this.config.charsetNumber;

  return this._protocol.changeUser({
    user          : options.user || this.config.user,
    password      : options.password || this.config.password,
    database      : options.database || this.config.database,
    timeout       : options.timeout,
    charsetNumber : charsetNumber,
    currentConfig : this.config
  }, bindToCurrentDomain(callback));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

## Switching users and altering connection state

MySQL offers a changeUser command that allows you to alter the current user and
other aspects of the connection without shutting down the underlying socket:

```js
connection.<span class="apidocCodeKeywordSpan">changeUser</span>({user : 'john'}, function(err) {
  if (err) throw err;
});
```

The available options for this feature are:

* `user`: The name of the new user (defaults to the previous one).
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Connection.prototype.commit" id="apidoc.element.mysql.Connection.prototype.commit">
        function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>commit
        <span class="apidocSignatureSpan">(options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function commit(options, callback) {
  if (!callback &amp;&amp; typeof options === 'function') {
    callback = options;
    options = {};
  }

  options = options || {};
  options.sql = 'COMMIT';
  options.values = null;

  return this.query(options, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

    connection.query('INSERT INTO log SET data=?', log, function (error, results, fields) {
if (error) {
  return connection.rollback(function() {
    throw error;
  });
}
connection.<span class="apidocCodeKeywordSpan">commit</span>(function(err) {
  if (err) {
    return connection.rollback(function() {
      throw err;
    });
  }
  console.log('success!');
});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Connection.prototype.connect" id="apidoc.element.mysql.Connection.prototype.connect">
        function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>connect
        <span class="apidocSignatureSpan">(options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function connect(options, callback) {
  if (!callback &amp;&amp; typeof options === 'function') {
    callback = options;
    options = {};
  }

  if (!this._connectCalled) {
    this._connectCalled = true;

    // Connect either via a UNIX domain socket or a TCP socket.
    this._socket = (this.config.socketPath)
      ? Net.createConnection(this.config.socketPath)
      : Net.createConnection(this.config.port, this.config.host);

    // Connect socket to connection domain
    if (Events.usingDomains) {
      this._socket.domain = this.domain;
    }

    var connection = this;
    this._protocol.on('data', function(data) {
      connection._socket.write(data);
    });
    this._socket.on('data', function(data) {
      connection._protocol.write(data);
    });
    this._protocol.on('end', function() {
      connection._socket.end();
    });
    this._socket.on('end', function() {
      connection._protocol.end();
    });

    this._socket.on('error', this._handleNetworkError.bind(this));
    this._socket.on('connect', this._handleProtocolConnect.bind(this));
    this._protocol.on('handshake', this._handleProtocolHandshake.bind(this));
    this._protocol.on('unhandledError', this._handleProtocolError.bind(this));
    this._protocol.on('drain', this._handleProtocolDrain.bind(this));
    this._protocol.on('end', this._handleProtocolEnd.bind(this));
    this._protocol.on('enqueue', this._handleProtocolEnqueue.bind(this));

    if (this.config.connectTimeout) {
      var handleConnectTimeout = this._handleConnectTimeout.bind(this);

      this._socket.setTimeout(this.config.connectTimeout, handleConnectTimeout);
      this._socket.once('connect', function() {
        this.setTimeout(0, handleConnectTimeout);
      });
    }
  }

  this._protocol.handshake(options, bindToCurrentDomain(callback));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var connection = mysql.createConnection({
  host     : 'localhost',
  user     : 'me',
  password : 'secret',
  database : 'my_db'
});

connection.<span class="apidocCodeKeywordSpan">connect</span>();

connection.query('SELECT 1 + 1 AS solution', function (error, results, fields) {
  if (error) throw error;
  console.log('The solution is: ', results[0].solution);
});

connection.end();
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Connection.prototype.destroy" id="apidoc.element.mysql.Connection.prototype.destroy">
        function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>destroy
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">destroy = function () {
  this.state = 'disconnected';
  this._implyConnect();
  this._socket.destroy();
  this._protocol.destroy();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

An alternative way to end the connection is to call the `destroy()` method.
This will cause an immediate termination of the underlying socket.
Additionally `destroy()` guarantees that no more events or callbacks will be
triggered for the connection.

```js
connection.<span class="apidocCodeKeywordSpan">destroy</span>();
```

Unlike `end()` the `destroy()` method does not take a callback argument.

## Pooling connections

Rather than creating and managing connections one-by-one, this module also
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Connection.prototype.end" id="apidoc.element.mysql.Connection.prototype.end">
        function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>end
        <span class="apidocSignatureSpan">(options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function end(options, callback) {
  var cb   = callback;
  var opts = options;

  if (!callback &amp;&amp; typeof options === 'function') {
    cb   = options;
    opts = null;
  }

  // create custom options reference
  opts = Object.create(opts || null);

  if (opts.timeout === undefined) {
    // default timeout of 30 seconds
    opts.timeout = 30000;
  }

  this._implyConnect();
  this._protocol.quit(opts, bindToCurrentDomain(cb));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
connection.connect();

connection.query('SELECT 1 + 1 AS solution', function (error, results, fields) {
if (error) throw error;
console.log('The solution is: ', results[0].solution);
});

connection.<span class="apidocCodeKeywordSpan">end</span>();
```

From this example, you can learn the following:

* Every method you invoke on a connection is queued and executed in sequence.
* Closing the connection is done using `end()` which makes sure all remaining
queries are executed before sending a quit packet to the mysql server.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Connection.prototype.escape" id="apidoc.element.mysql.Connection.prototype.escape">
        function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>escape
        <span class="apidocSignatureSpan">(value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">escape = function (value) {
  return SqlString.escape(value, false, this.config.timezone);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
);
```

## Escaping query values

In order to avoid SQL Injection attacks, you should always escape any user
provided data before using it inside a SQL query. You can do so using the
`mysql.<span class="apidocCodeKeywordSpan">escape</span>()`, `connection.escape()` or `pool.escape()` methods:

```js
var userId = 'some user provided value';
var sql    = 'SELECT * FROM users WHERE id = ' + connection.escape(userId);
connection.query(sql, function (error, results, fields) {
if (error) throw error;
// ...
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Connection.prototype.escapeId" id="apidoc.element.mysql.Connection.prototype.escapeId">
        function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>escapeId
        <span class="apidocSignatureSpan">(value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function escapeId(value) {
  return SqlString.escapeId(value, false);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

console.log(query); // SELECT * FROM posts WHERE title='Hello MySQL'
```

## Escaping query identifiers

If you can't trust an SQL identifier (database / table / column name) because it is
provided by a user, you should escape it with `mysql.<span class="apidocCodeKeywordSpan">escapeId</span>(identifier)`,
`connection.escapeId(identifier)` or `pool.escapeId(identifier)` like this:

```js
var sorter = 'date';
var sql    = 'SELECT * FROM posts ORDER BY ' + connection.escapeId(sorter);
connection.query(sql, function (error, results, fields) {
if (error) throw error;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Connection.prototype.format" id="apidoc.element.mysql.Connection.prototype.format">
        function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>format
        <span class="apidocSignatureSpan">(sql, values)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">format = function (sql, values) {
  if (typeof this.config.queryFormat === 'function') {
    return this.config.queryFormat.call(this, sql, values, this.config.timezone);
  }
  return SqlString.format(sql, values, this.config.stringifyObjects, this.config.timezone);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
### Preparing Queries

You can use mysql.format to prepare a query with multiple insertion points, utilizing the proper escaping for ids and values. A
simple example of this follows:

```js
var sql = "SELECT * FROM ?? WHERE ?? = ?";
var inserts = ['users', 'id', userId];
sql = mysql.<span class="apidocCodeKeywordSpan">format</span>(sql, inserts);
```

Following this you then have a valid, escaped query that you can then send to the database safely. This is useful if you are looking
 to prepare the query before actually sending it to the database. As mysql.format is exposed from SqlString.format you also have
 the option (but are not required) to pass in stringifyObject and timezone, allowing you provide a custom means of turning objects
 into strings, as well as a location-specific/timezone-aware Date.

### Custom format

If you prefer to have another type of query escape format, there's a connection configuration option you can use to define
a custom format function. You can access the connection object if you want to use the built-in `.escape()` or any other connection
 function.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Connection.prototype.pause" id="apidoc.element.mysql.Connection.prototype.pause">
        function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>pause
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">pause = function () {
  this._socket.pause();
  this._protocol.pause();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  // Handle error, an 'end' event will be emitted after this as well
})
.on('fields', function(fields) {
  // the field packets for the rows to follow
})
.on('result', function(row) {
  // Pausing the connnection is useful if your processing involves I/O
  connection.<span class="apidocCodeKeywordSpan">pause</span>();

  processRow(row, function() {
    connection.resume();
  });
})
.on('end', function() {
  // all rows have been received
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Connection.prototype.ping" id="apidoc.element.mysql.Connection.prototype.ping">
        function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>ping
        <span class="apidocSignatureSpan">(options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ping(options, callback) {
  if (!callback &amp;&amp; typeof options === 'function') {
    callback = options;
    options = {};
  }

  this._implyConnect();
  this._protocol.ping(options, bindToCurrentDomain(callback));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
## Ping

A ping packet can be sent over a connection using the `connection.ping` method. This
method will send a ping packet to the server and when the server responds, the callback
will fire. If an error occurred, the callback will fire with an error argument.

```js
connection.<span class="apidocCodeKeywordSpan">ping</span>(function (err) {
  if (err) throw err;
  console.log('Server responded to ping');
})
```

## Timeouts
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Connection.prototype.query" id="apidoc.element.mysql.Connection.prototype.query">
        function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>query
        <span class="apidocSignatureSpan">(sql, values, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function query(sql, values, cb) {
  var query = Connection.createQuery(sql, values, cb);
  query._connection = this;

  if (!(typeof sql === 'object' &amp;&amp; 'typeCast' in sql)) {
    query.typeCast = this.config.typeCast;
  }

  if (query.sql) {
    query.sql = this.format(query.sql, query.values);
  }

  this._implyConnect();

  return this._protocol._enqueue(query);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  user     : 'me',
  password : 'secret',
  database : 'my_db'
});

connection.connect();

connection.<span class="apidocCodeKeywordSpan">query</span>('SELECT 1 + 1 AS solution', function (error, results, fields
) {
  if (error) throw error;
  console.log('The solution is: ', results[0].solution);
});

connection.end();
```
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Connection.prototype.resume" id="apidoc.element.mysql.Connection.prototype.resume">
        function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>resume
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">resume = function () {
  this._socket.resume();
  this._protocol.resume();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    // the field packets for the rows to follow
  })
  .on('result', function(row) {
    // Pausing the connnection is useful if your processing involves I/O
    connection.pause();

    processRow(row, function() {
      connection.<span class="apidocCodeKeywordSpan">resume</span>();
    });
  })
  .on('end', function() {
    // all rows have been received
  });
```
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Connection.prototype.rollback" id="apidoc.element.mysql.Connection.prototype.rollback">
        function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>rollback
        <span class="apidocSignatureSpan">(options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function rollback(options, callback) {
  if (!callback &amp;&amp; typeof options === 'function') {
    callback = options;
    options = {};
  }

  options = options || {};
  options.sql = 'ROLLBACK';
  options.values = null;

  return this.query(options, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
Simple transaction support is available at the connection level:

```js
connection.beginTransaction(function(err) {
  if (err) { throw err; }
  connection.query('INSERT INTO posts SET title=?', title, function (error, results, fields) {
if (error) {
  return connection.<span class="apidocCodeKeywordSpan">rollback</span>(function() {
    throw error;
  });
}

var log = 'Post ' + result.insertId + ' added';

connection.query('INSERT INTO log SET data=?', log, function (error, results, fields) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Connection.prototype.statistics" id="apidoc.element.mysql.Connection.prototype.statistics">
        function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>statistics
        <span class="apidocSignatureSpan">(options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function statistics(options, callback) {
  if (!callback &amp;&amp; typeof options === 'function') {
    callback = options;
    options = {};
  }

  this._implyConnect();
  this._protocol.stats(options, bindToCurrentDomain(callback));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql.ConnectionConfig" id="apidoc.module.mysql.ConnectionConfig">module mysql.ConnectionConfig</a></h1>


    <h2>
        <a href="#apidoc.element.mysql.ConnectionConfig.ConnectionConfig" id="apidoc.element.mysql.ConnectionConfig.ConnectionConfig">
        function <span class="apidocSignatureSpan">mysql.</span>ConnectionConfig
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ConnectionConfig(options) {
  if (typeof options === 'string') {
    options = ConnectionConfig.parseUrl(options);
  }

  this.host               = options.host || 'localhost';
  this.port               = options.port || 3306;
  this.localAddress       = options.localAddress;
  this.socketPath         = options.socketPath;
  this.user               = options.user || undefined;
  this.password           = options.password || undefined;
  this.database           = options.database;
  this.connectTimeout     = (options.connectTimeout === undefined)
    ? (10 * 1000)
    : options.connectTimeout;
  this.insecureAuth       = options.insecureAuth || false;
  this.supportBigNumbers  = options.supportBigNumbers || false;
  this.bigNumberStrings   = options.bigNumberStrings || false;
  this.dateStrings        = options.dateStrings || false;
  this.debug              = options.debug;
  this.trace              = options.trace !== false;
  this.stringifyObjects   = options.stringifyObjects || false;
  this.timezone           = options.timezone || 'local';
  this.flags              = options.flags || '';
  this.queryFormat        = options.queryFormat;
  this.pool               = options.pool || undefined;
  this.ssl                = (typeof options.ssl === 'string')
    ? ConnectionConfig.getSSLProfile(options.ssl)
    : (options.ssl || false);
  this.multipleStatements = options.multipleStatements || false;
  this.typeCast           = (options.typeCast === undefined)
    ? true
    : options.typeCast;

  if (this.timezone[0] === ' ') {
    // "+" is a url encoded char for space so it
    // gets translated to space when giving a
    // connection string..
    this.timezone = '+' + this.timezone.substr(1);
  }

  if (this.ssl) {
    // Default rejectUnauthorized to true
    this.ssl.rejectUnauthorized = this.ssl.rejectUnauthorized !== false;
  }

  this.maxPacketSize = 0;
  this.charsetNumber = (options.charset)
    ? ConnectionConfig.getCharsetNumber(options.charset)
    : options.charsetNumber || Charsets.UTF8_GENERAL_CI;

  // Set the client flags
  var defaultFlags = ConnectionConfig.getDefaultFlags(options);
  this.clientFlags = ConnectionConfig.mergeFlags(defaultFlags, options.flags);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.ConnectionConfig.getCharsetNumber" id="apidoc.element.mysql.ConnectionConfig.getCharsetNumber">
        function <span class="apidocSignatureSpan">mysql.ConnectionConfig.</span>getCharsetNumber
        <span class="apidocSignatureSpan">(charset)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function getCharsetNumber(charset) {
  var num = Charsets[charset.toUpperCase()];

  if (num === undefined) {
    throw new TypeError('Unknown charset \'' + charset + '\'');
  }

  return num;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  if (this.ssl) {
    // Default rejectUnauthorized to true
    this.ssl.rejectUnauthorized = this.ssl.rejectUnauthorized !== false;
  }

  this.maxPacketSize = 0;
  this.charsetNumber = (options.charset)
    ? ConnectionConfig.<span class="apidocCodeKeywordSpan">getCharsetNumber</span>(options.charset)
    : options.charsetNumber || Charsets.UTF8_GENERAL_CI;

  // Set the client flags
  var defaultFlags = ConnectionConfig.getDefaultFlags(options);
  this.clientFlags = ConnectionConfig.mergeFlags(defaultFlags, options.flags);
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.ConnectionConfig.getDefaultFlags" id="apidoc.element.mysql.ConnectionConfig.getDefaultFlags">
        function <span class="apidocSignatureSpan">mysql.ConnectionConfig.</span>getDefaultFlags
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function getDefaultFlags(options) {
  var defaultFlags = [
    '-COMPRESS',          // Compression protocol *NOT* supported
    '-CONNECT_ATTRS',     // Does *NOT* send connection attributes in Protocol::HandshakeResponse41
    '+CONNECT_WITH_DB',   // One can specify db on connect in Handshake Response Packet
    '+FOUND_ROWS',        // Send found rows instead of affected rows
    '+IGNORE_SIGPIPE',    // Don't issue SIGPIPE if network failures
    '+IGNORE_SPACE',      // Let the parser ignore spaces before '('
    '+LOCAL_FILES',       // Can use LOAD DATA LOCAL
    '+LONG_FLAG',         // Longer flags in Protocol::ColumnDefinition320
    '+LONG_PASSWORD',     // Use the improved version of Old Password Authentication
    '+MULTI_RESULTS',     // Can handle multiple resultsets for COM_QUERY
    '+ODBC',              // Special handling of ODBC behaviour
    '-PLUGIN_AUTH',       // Does *NOT* support auth plugins
    '+PROTOCOL_41',       // Uses the 4.1 protocol
    '+PS_MULTI_RESULTS',  // Can handle multiple resultsets for COM_STMT_EXECUTE
    '+RESERVED',          // Unused
    '+SECURE_CONNECTION', // Supports Authentication::Native41
    '+TRANSACTIONS'       // Expects status flags
  ];

  if (options &amp;&amp; options.multipleStatements) {
    // May send multiple statements per COM_QUERY and COM_STMT_PREPARE
    defaultFlags.push('+MULTI_STATEMENTS');
  }

  return defaultFlags;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

this.maxPacketSize = 0;
this.charsetNumber = (options.charset)
  ? ConnectionConfig.getCharsetNumber(options.charset)
  : options.charsetNumber || Charsets.UTF8_GENERAL_CI;

// Set the client flags
var defaultFlags = ConnectionConfig.<span class="apidocCodeKeywordSpan">getDefaultFlags</span>(options);
this.clientFlags = ConnectionConfig.mergeFlags(defaultFlags, options.flags);
}

ConnectionConfig.mergeFlags = function mergeFlags(defaultFlags, userFlags) {
var allFlags = ConnectionConfig.parseFlagList(defaultFlags);
var newFlags = ConnectionConfig.parseFlagList(userFlags);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.ConnectionConfig.getSSLProfile" id="apidoc.element.mysql.ConnectionConfig.getSSLProfile">
        function <span class="apidocSignatureSpan">mysql.ConnectionConfig.</span>getSSLProfile
        <span class="apidocSignatureSpan">(name)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function getSSLProfile(name) {
  if (!SSLProfiles) {
    SSLProfiles = require('./protocol/constants/ssl_profiles');
  }

  var ssl = SSLProfiles[name];

  if (ssl === undefined) {
    throw new TypeError('Unknown SSL profile \'' + name + '\'');
  }

  return ssl;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
this.trace              = options.trace !== false;
this.stringifyObjects   = options.stringifyObjects || false;
this.timezone           = options.timezone || 'local';
this.flags              = options.flags || '';
this.queryFormat        = options.queryFormat;
this.pool               = options.pool || undefined;
this.ssl                = (typeof options.ssl === 'string')
  ? ConnectionConfig.<span class="apidocCodeKeywordSpan">getSSLProfile</span>(options.ssl)
  : (options.ssl || false);
this.multipleStatements = options.multipleStatements || false;
this.typeCast           = (options.typeCast === undefined)
  ? true
  : options.typeCast;

if (this.timezone[0] === ' ') {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.ConnectionConfig.mergeFlags" id="apidoc.element.mysql.ConnectionConfig.mergeFlags">
        function <span class="apidocSignatureSpan">mysql.ConnectionConfig.</span>mergeFlags
        <span class="apidocSignatureSpan">(defaultFlags, userFlags)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function mergeFlags(defaultFlags, userFlags) {
  var allFlags = ConnectionConfig.parseFlagList(defaultFlags);
  var newFlags = ConnectionConfig.parseFlagList(userFlags);

  // Merge the new flags
  for (var flag in newFlags) {
    if (allFlags[flag] !== false) {
      allFlags[flag] = newFlags[flag];
    }
  }

  // Build flags
  var flags = 0x0;
  for (var flag in allFlags) {
    if (allFlags[flag]) {
      // TODO: Throw here on some future release
      flags |= ClientConstants['CLIENT_' + flag] || 0x0;
    }
  }

  return flags;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
this.maxPacketSize = 0;
this.charsetNumber = (options.charset)
  ? ConnectionConfig.getCharsetNumber(options.charset)
  : options.charsetNumber || Charsets.UTF8_GENERAL_CI;

// Set the client flags
var defaultFlags = ConnectionConfig.getDefaultFlags(options);
this.clientFlags = ConnectionConfig.<span class="apidocCodeKeywordSpan">mergeFlags</span>(defaultFlags, options.flags);
}

ConnectionConfig.mergeFlags = function mergeFlags(defaultFlags, userFlags) {
var allFlags = ConnectionConfig.parseFlagList(defaultFlags);
var newFlags = ConnectionConfig.parseFlagList(userFlags);

// Merge the new flags
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.ConnectionConfig.parseFlagList" id="apidoc.element.mysql.ConnectionConfig.parseFlagList">
        function <span class="apidocSignatureSpan">mysql.ConnectionConfig.</span>parseFlagList
        <span class="apidocSignatureSpan">(flagList)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function parseFlagList(flagList) {
  var allFlags = Object.create(null);

  if (!flagList) {
    return allFlags;
  }

  var flags = !Array.isArray(flagList)
    ? String(flagList || '').toUpperCase().split(/\s*,+\s*/)
    : flagList;

  for (var i = 0; i &lt; flags.length; i++) {
    var flag   = flags[i];
    var offset = 1;
    var state  = flag[0];

    if (state === undefined) {
      // TODO: throw here on some future release
      continue;
    }

    if (state !== '-' &amp;&amp; state !== '+') {
      offset = 0;
      state  = '+';
    }

    allFlags[flag.substr(offset)] = state === '+';
  }

  return allFlags;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

// Set the client flags
var defaultFlags = ConnectionConfig.getDefaultFlags(options);
this.clientFlags = ConnectionConfig.mergeFlags(defaultFlags, options.flags);
}

ConnectionConfig.mergeFlags = function mergeFlags(defaultFlags, userFlags) {
var allFlags = ConnectionConfig.<span class="apidocCodeKeywordSpan">parseFlagList</span>(defaultFlags);
var newFlags = ConnectionConfig.parseFlagList(userFlags);

// Merge the new flags
for (var flag in newFlags) {
  if (allFlags[flag] !== false) {
    allFlags[flag] = newFlags[flag];
  }
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.ConnectionConfig.parseUrl" id="apidoc.element.mysql.ConnectionConfig.parseUrl">
        function <span class="apidocSignatureSpan">mysql.ConnectionConfig.</span>parseUrl
        <span class="apidocSignatureSpan">(url)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parseUrl = function (url) {
  url = urlParse(url, true);

  var options = {
    host     : url.hostname,
    port     : url.port,
    database : url.pathname.substr(1)
  };

  if (url.auth) {
    var auth = url.auth.split(':');
    options.user     = auth.shift();
    options.password = auth.join(':');
  }

  if (url.query) {
    for (var key in url.query) {
      var value = url.query[key];

      try {
        // Try to parse this as a JSON expression first
        options[key] = JSON.parse(value);
      } catch (err) {
        // Otherwise assume it is a plain string
        options[key] = value;
      }
    }
  }

  return options;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var ClientConstants = require('./protocol/constants/client');
var Charsets        = require('./protocol/constants/charsets');
var SSLProfiles     = null;

module.exports = ConnectionConfig;
function ConnectionConfig(options) {
if (typeof options === 'string') {
  options = ConnectionConfig.<span class="apidocCodeKeywordSpan">parseUrl</span>(options);
}

this.host               = options.host || 'localhost';
this.port               = options.port || 3306;
this.localAddress       = options.localAddress;
this.socketPath         = options.socketPath;
this.user               = options.user || undefined;
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql.PacketWriter" id="apidoc.module.mysql.PacketWriter">module mysql.PacketWriter</a></h1>


    <h2>
        <a href="#apidoc.element.mysql.PacketWriter.PacketWriter" id="apidoc.element.mysql.PacketWriter.PacketWriter">
        function <span class="apidocSignatureSpan">mysql.</span>PacketWriter
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function PacketWriter() {
  this._buffer = null;
  this._offset = 0;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql.PacketWriter.prototype" id="apidoc.module.mysql.PacketWriter.prototype">module mysql.PacketWriter.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mysql.PacketWriter.prototype._allocate" id="apidoc.element.mysql.PacketWriter.prototype._allocate">
        function <span class="apidocSignatureSpan">mysql.PacketWriter.prototype.</span>_allocate
        <span class="apidocSignatureSpan">(bytes)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _allocate(bytes) {
  if (!this._buffer) {
    this._buffer = new Buffer(Math.max(BUFFER_ALLOC_SIZE, bytes));
    this._offset = 0;
    return;
  }

  var bytesRemaining = this._buffer.length - this._offset;
  if (bytesRemaining &gt;= bytes) {
    return;
  }

  var newSize   = this._buffer.length + Math.max(BUFFER_ALLOC_SIZE, bytes);
  var oldBuffer = this._buffer;

  this._buffer = new Buffer(newSize);
  oldBuffer.copy(this._buffer);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    this.writeBuffer(buffer.slice(start, end));
  }

  return this._buffer;
};

PacketWriter.prototype.writeUnsignedNumber = function(bytes, value) {
  this.<span class="apidocCodeKeywordSpan">_allocate</span>(bytes);

  for (var i = 0; i &lt; bytes; i++) {
    this._buffer[this._offset++] = (value &gt;&gt; (i * 8)) &amp; 0xff;
  }
};

PacketWriter.prototype.writeFiller = function(bytes) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.PacketWriter.prototype.toBuffer" id="apidoc.element.mysql.PacketWriter.prototype.toBuffer">
        function <span class="apidocSignatureSpan">mysql.PacketWriter.prototype.</span>toBuffer
        <span class="apidocSignatureSpan">(parser)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function toBuffer(parser) {
  if (!this._buffer) {
    this._buffer = new Buffer(0);
    this._offset = 0;
  }

  var buffer  = this._buffer;
  var length  = this._offset;
  var packets = Math.floor(length / MAX_PACKET_LENGTH) + 1;

  this._buffer = new Buffer(length + packets * 4);
  this._offset = 0;

  for (var packet = 0; packet &lt; packets; packet++) {
    var isLast = (packet + 1 === packets);
    var packetLength = (isLast)
      ? length % MAX_PACKET_LENGTH
      : MAX_PACKET_LENGTH;

    var packetNumber = parser.incrementPacketNumber();

    this.writeUnsignedNumber(3, packetLength);
    this.writeUnsignedNumber(1, packetNumber);

    var start = packet * MAX_PACKET_LENGTH;
    var end   = start + packetLength;

    this.writeBuffer(buffer.slice(start, end));
  }

  return this._buffer;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    this._debugPacket(true, packet);
  }
};

Protocol.prototype._emitPacket = function(packet) {
  var packetWriter = new PacketWriter();
  packet.write(packetWriter);
  this.emit('data', packetWriter.<span class="apidocCodeKeywordSpan">toBuffer</span>(this._parser));

  if (this._config.debug) {
    this._debugPacket(false, packet);
  }
};

Protocol.prototype._determinePacket = function(sequence) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.PacketWriter.prototype.writeBuffer" id="apidoc.element.mysql.PacketWriter.prototype.writeBuffer">
        function <span class="apidocSignatureSpan">mysql.PacketWriter.prototype.</span>writeBuffer
        <span class="apidocSignatureSpan">(value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">writeBuffer = function (value) {
  var bytes = value.length;

  this._allocate(bytes);
  value.copy(this._buffer, this._offset);
  this._offset += bytes;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

  this.writeUnsignedNumber(3, packetLength);
  this.writeUnsignedNumber(1, packetNumber);

  var start = packet * MAX_PACKET_LENGTH;
  var end   = start + packetLength;

  this.<span class="apidocCodeKeywordSpan">writeBuffer</span>(buffer.slice(start, end));
}

return this._buffer;
};

PacketWriter.prototype.writeUnsignedNumber = function(bytes, value) {
this._allocate(bytes);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.PacketWriter.prototype.writeFiller" id="apidoc.element.mysql.PacketWriter.prototype.writeFiller">
        function <span class="apidocSignatureSpan">mysql.PacketWriter.prototype.</span>writeFiller
        <span class="apidocSignatureSpan">(bytes)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">writeFiller = function (bytes) {
  this._allocate(bytes);

  for (var i = 0; i &lt; bytes; i++) {
    this._buffer[this._offset++] = 0x00;
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var bytes = value.length;
this.writeLengthCodedNumber(bytes);
this.writeBuffer(value);
};

PacketWriter.prototype.writeNullTerminatedBuffer = function(value) {
this.writeBuffer(value);
this.<span class="apidocCodeKeywordSpan">writeFiller</span>(1); // 0x00 terminator
};

PacketWriter.prototype.writeLengthCodedString = function(value) {
if (value === null) {
  this.writeLengthCodedNumber(null);
  return;
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.PacketWriter.prototype.writeLengthCodedBuffer" id="apidoc.element.mysql.PacketWriter.prototype.writeLengthCodedBuffer">
        function <span class="apidocSignatureSpan">mysql.PacketWriter.prototype.</span>writeLengthCodedBuffer
        <span class="apidocSignatureSpan">(value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">writeLengthCodedBuffer = function (value) {
  var bytes = value.length;
  this.writeLengthCodedNumber(bytes);
  this.writeBuffer(value);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.PacketWriter.prototype.writeLengthCodedNumber" id="apidoc.element.mysql.PacketWriter.prototype.writeLengthCodedNumber">
        function <span class="apidocSignatureSpan">mysql.PacketWriter.prototype.</span>writeLengthCodedNumber
        <span class="apidocSignatureSpan">(value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">writeLengthCodedNumber = function (value) {
  if (value === null) {
    this._allocate(1);
    this._buffer[this._offset++] = 251;
    return;
  }

  if (value &lt;= 250) {
    this._allocate(1);
    this._buffer[this._offset++] = value;
    return;
  }

  if (value &gt; IEEE_754_BINARY_64_PRECISION) {
    throw new Error(
      'writeLengthCodedNumber: JS precision range exceeded, your ' +
      'number is &gt; 53 bit: "' + value + '"'
    );
  }

  if (value &lt; BIT_16) {
    this._allocate(3);
    this._buffer[this._offset++] = 252;
  } else if (value &lt; BIT_24) {
    this._allocate(4);
    this._buffer[this._offset++] = 253;
  } else {
    this._allocate(9);
    this._buffer[this._offset++] = 254;
  }

  // 16 Bit
  this._buffer[this._offset++] = value &amp; 0xff;
  this._buffer[this._offset++] = (value &gt;&gt; 8) &amp; 0xff;

  if (value &lt; BIT_16) {
    return;
  }

  // 24 Bit
  this._buffer[this._offset++] = (value &gt;&gt; 16) &amp; 0xff;

  if (value &lt; BIT_24) {
    return;
  }

  this._buffer[this._offset++] = (value &gt;&gt; 24) &amp; 0xff;

  // Hack: Get the most significant 32 bit (JS bitwise operators are 32 bit)
  value = value.toString(2);
  value = value.substr(0, value.length - 32);
  value = parseInt(value, 2);

  this._buffer[this._offset++] = value &amp; 0xff;
  this._buffer[this._offset++] = (value &gt;&gt; 8) &amp; 0xff;
  this._buffer[this._offset++] = (value &gt;&gt; 16) &amp; 0xff;

  // Set last byte to 0, as we can only support 53 bits in JS (see above)
  this._buffer[this._offset++] = 0;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

  // Set last byte to 0, as we can only support 53 bits in JS (see above)
  this._buffer[this._offset++] = 0;
};

PacketWriter.prototype.writeLengthCodedBuffer = function(value) {
  var bytes = value.length;
  this.<span class="apidocCodeKeywordSpan">writeLengthCodedNumber</span>(bytes);
  this.writeBuffer(value);
};

PacketWriter.prototype.writeNullTerminatedBuffer = function(value) {
  this.writeBuffer(value);
  this.writeFiller(1); // 0x00 terminator
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.PacketWriter.prototype.writeLengthCodedString" id="apidoc.element.mysql.PacketWriter.prototype.writeLengthCodedString">
        function <span class="apidocSignatureSpan">mysql.PacketWriter.prototype.</span>writeLengthCodedString
        <span class="apidocSignatureSpan">(value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">writeLengthCodedString = function (value) {
  if (value === null) {
    this.writeLengthCodedNumber(null);
    return;
  }

  value = (value === undefined)
    ? ''
    : String(value);

  var bytes = Buffer.byteLength(value, 'utf-8');
  this.writeLengthCodedNumber(bytes);

  if (!bytes) {
    return;
  }

  this._allocate(bytes);
  this._buffer.write(value, this._offset, 'utf-8');
  this._offset += bytes;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.PacketWriter.prototype.writeNullTerminatedBuffer" id="apidoc.element.mysql.PacketWriter.prototype.writeNullTerminatedBuffer">
        function <span class="apidocSignatureSpan">mysql.PacketWriter.prototype.</span>writeNullTerminatedBuffer
        <span class="apidocSignatureSpan">(value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">writeNullTerminatedBuffer = function (value) {
  this.writeBuffer(value);
  this.writeFiller(1); // 0x00 terminator
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.PacketWriter.prototype.writeNullTerminatedString" id="apidoc.element.mysql.PacketWriter.prototype.writeNullTerminatedString">
        function <span class="apidocSignatureSpan">mysql.PacketWriter.prototype.</span>writeNullTerminatedString
        <span class="apidocSignatureSpan">(value, encoding)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">writeNullTerminatedString = function (value, encoding) {
  // Typecast undefined into '' and numbers into strings
  value = value || '';
  value = value + '';

  var bytes = Buffer.byteLength(value, encoding || 'utf-8') + 1;
  this._allocate(bytes);

  this._buffer.write(value, this._offset, encoding);
  this._buffer[this._offset + bytes - 1] = 0x00;

  this._offset += bytes;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.PacketWriter.prototype.writeString" id="apidoc.element.mysql.PacketWriter.prototype.writeString">
        function <span class="apidocSignatureSpan">mysql.PacketWriter.prototype.</span>writeString
        <span class="apidocSignatureSpan">(value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">writeString = function (value) {
  // Typecast undefined into '' and numbers into strings
  value = value || '';
  value = value + '';

  var bytes = Buffer.byteLength(value, 'utf-8');
  this._allocate(bytes);

  this._buffer.write(value, this._offset, 'utf-8');

  this._offset += bytes;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.PacketWriter.prototype.writeUnsignedNumber" id="apidoc.element.mysql.PacketWriter.prototype.writeUnsignedNumber">
        function <span class="apidocSignatureSpan">mysql.PacketWriter.prototype.</span>writeUnsignedNumber
        <span class="apidocSignatureSpan">(bytes, value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">writeUnsignedNumber = function (bytes, value) {
  this._allocate(bytes);

  for (var i = 0; i &lt; bytes; i++) {
    this._buffer[this._offset++] = (value &gt;&gt; (i * 8)) &amp; 0xff;
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  var isLast = (packet + 1 === packets);
  var packetLength = (isLast)
    ? length % MAX_PACKET_LENGTH
    : MAX_PACKET_LENGTH;

  var packetNumber = parser.incrementPacketNumber();

  this.<span class="apidocCodeKeywordSpan">writeUnsignedNumber</span>(3, packetLength);
  this.writeUnsignedNumber(1, packetNumber);

  var start = packet * MAX_PACKET_LENGTH;
  var end   = start + packetLength;

  this.writeBuffer(buffer.slice(start, end));
}
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql.Parser" id="apidoc.module.mysql.Parser">module mysql.Parser</a></h1>


    <h2>
        <a href="#apidoc.element.mysql.Parser.Parser" id="apidoc.element.mysql.Parser.Parser">
        function <span class="apidocSignatureSpan">mysql.</span>Parser
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Parser(options) {
  options = options || {};

  this._supportBigNumbers = options.config &amp;&amp; options.config.supportBigNumbers;
  this._buffer            = new Buffer(0);
  this._nextBuffers       = new BufferList();
  this._longPacketBuffers = new BufferList();
  this._offset            = 0;
  this._packetEnd         = null;
  this._packetHeader      = null;
  this._packetOffset      = null;
  this._onError           = options.onError || function(err) { throw err; };
  this._onPacket          = options.onPacket || function() {};
  this._nextPacketNumber  = 0;
  this._encoding          = 'utf-8';
  this._paused            = false;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql.Parser.prototype" id="apidoc.module.mysql.Parser.prototype">module mysql.Parser.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mysql.Parser.prototype._advanceToNextPacket" id="apidoc.element.mysql.Parser.prototype._advanceToNextPacket">
        function <span class="apidocSignatureSpan">mysql.Parser.prototype.</span>_advanceToNextPacket
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_advanceToNextPacket = function () {
  this._offset       = this._packetEnd;
  this._packetHeader = null;
  this._packetEnd    = null;
  this._packetOffset = null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

this._packetEnd    = this._offset + this._packetHeader.length;
this._packetOffset = this._offset;

if (this._packetHeader.length === MAX_PACKET_LENGTH) {
  this._longPacketBuffers.push(this._buffer.slice(this._packetOffset, this._packetEnd));

  this.<span class="apidocCodeKeywordSpan">_advanceToNextPacket</span>();
  continue;
}

this._combineLongPacketBuffers();

// Try...finally to ensure exception safety. Unfortunately this is costing
// us up to ~10% performance in some benchmarks.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Parser.prototype._combineLongPacketBuffers" id="apidoc.element.mysql.Parser.prototype._combineLongPacketBuffers">
        function <span class="apidocSignatureSpan">mysql.Parser.prototype.</span>_combineLongPacketBuffers
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _combineLongPacketBuffers() {
  if (!this._longPacketBuffers.size) {
    return;
  }

  // Calculate bytes
  var remainingBytes      = this._buffer.length - this._offset;
  var trailingPacketBytes = this._buffer.length - this._packetEnd;

  // Create buffer
  var buf    = null;
  var buffer = new Buffer(remainingBytes + this._longPacketBuffers.size);
  var offset = 0;

  // Copy long buffers
  while ((buf = this._longPacketBuffers.shift())) {
    offset += buf.copy(buffer, offset);
  }

  // Copy remaining bytes
  this._buffer.copy(buffer, offset, this._offset);

  this._buffer       = buffer;
  this._offset       = 0;
  this._packetEnd    = this._buffer.length - trailingPacketBytes;
  this._packetOffset = 0;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
if (this._packetHeader.length === MAX_PACKET_LENGTH) {
  this._longPacketBuffers.push(this._buffer.slice(this._packetOffset, this._packetEnd));

  this._advanceToNextPacket();
  continue;
}

this.<span class="apidocCodeKeywordSpan">_combineLongPacketBuffers</span>();

// Try...finally to ensure exception safety. Unfortunately this is costing
// us up to ~10% performance in some benchmarks.
var hadException = true;
try {
  this._onPacket(this._packetHeader);
  hadException = false;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Parser.prototype._combineNextBuffers" id="apidoc.element.mysql.Parser.prototype._combineNextBuffers">
        function <span class="apidocSignatureSpan">mysql.Parser.prototype.</span>_combineNextBuffers
        <span class="apidocSignatureSpan">(bytes)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _combineNextBuffers(bytes) {
  var length = this._buffer.length - this._offset;

  if (length &gt;= bytes) {
    return true;
  }

  if ((length + this._nextBuffers.size) &lt; bytes) {
    return false;
  }

  var buffers     = [];
  var bytesNeeded = bytes - length;

  while (bytesNeeded &gt; 0) {
    var buffer = this._nextBuffers.shift();
    buffers.push(buffer);
    bytesNeeded -= buffer.length;
  }

  this.append(buffers);
  return true;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}

Parser.prototype.write = function write(chunk) {
  this._nextBuffers.push(chunk);

  while (!this._paused) {
    if (!this._packetHeader) {
if (!this.<span class="apidocCodeKeywordSpan">_combineNextBuffers</span>(4)) {
  break;
}

this._packetHeader = new PacketHeader(
  this.parseUnsignedNumber(3),
  this.parseUnsignedNumber(1)
);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Parser.prototype._nullByteOffset" id="apidoc.element.mysql.Parser.prototype._nullByteOffset">
        function <span class="apidocSignatureSpan">mysql.Parser.prototype.</span>_nullByteOffset
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_nullByteOffset = function () {
  var offset = this._offset;

  while (this._buffer[offset] !== 0x00) {
    offset++;

    if (offset &gt;= this._buffer.length) {
      var err    = new Error('Offset of null terminated string not found.');
      err.offset = (this._offset - this._packetOffset);
      err.code   = 'PARSER_MISSING_NULL_BYTE';
      throw err;
    }
  }

  return offset;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
};

Parser.prototype.parseFiller = function(length) {
  return this.parseBuffer(length);
};

Parser.prototype.parseNullTerminatedBuffer = function() {
  var end      = this.<span class="apidocCodeKeywordSpan">_nullByteOffset</span>();
  var value    = this._buffer.slice(this._offset, end);
  this._offset = end + 1;

  return value;
};

Parser.prototype.parseNullTerminatedString = function() {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Parser.prototype.append" id="apidoc.element.mysql.Parser.prototype.append">
        function <span class="apidocSignatureSpan">mysql.Parser.prototype.</span>append
        <span class="apidocSignatureSpan">(chunk)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function append(chunk) {
  if (!chunk || chunk.length === 0) {
    return;
  }

  // Calculate slice ranges
  var sliceEnd    = this._buffer.length;
  var sliceStart  = this._packetOffset === null
    ? this._offset
    : this._packetOffset;
  var sliceLength = sliceEnd - sliceStart;

  // Get chunk data
  var buffer = null;
  var chunks = !(chunk instanceof Array || Array.isArray(chunk)) ? [chunk] : chunk;
  var length = 0;
  var offset = 0;

  for (var i = 0; i &lt; chunks.length; i++) {
    length += chunks[i].length;
  }

  if (sliceLength !== 0) {
    // Create a new Buffer
    buffer = new Buffer(sliceLength + length);
    offset = 0;

    // Copy data slice
    offset += this._buffer.copy(buffer, 0, sliceStart, sliceEnd);

    // Copy chunks
    for (var i = 0; i &lt; chunks.length; i++) {
      offset += chunks[i].copy(buffer, offset);
    }
  } else if (chunks.length &gt; 1) {
    // Create a new Buffer
    buffer = new Buffer(length);
    offset = 0;

    // Copy chunks
    for (var i = 0; i &lt; chunks.length; i++) {
      offset += chunks[i].copy(buffer, offset);
    }
  } else {
    // Buffer is the only chunk
    buffer = chunks[0];
  }

  // Adjust data-tracking pointers
  this._buffer       = buffer;
  this._offset       = this._offset - sliceStart;
  this._packetEnd    = this._packetEnd !== null
    ? this._packetEnd - sliceStart
    : null;
  this._packetOffset = this._packetOffset !== null
    ? this._packetOffset - sliceStart
    : null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

while (bytesNeeded &gt; 0) {
  var buffer = this._nextBuffers.shift();
  buffers.push(buffer);
  bytesNeeded -= buffer.length;
}

this.<span class="apidocCodeKeywordSpan">append</span>(buffers);
return true;
};

Parser.prototype._combineLongPacketBuffers = function _combineLongPacketBuffers() {
if (!this._longPacketBuffers.size) {
  return;
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Parser.prototype.incrementPacketNumber" id="apidoc.element.mysql.Parser.prototype.incrementPacketNumber">
        function <span class="apidocSignatureSpan">mysql.Parser.prototype.</span>incrementPacketNumber
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">incrementPacketNumber = function () {
  var currentPacketNumber = this._nextPacketNumber;
  this._nextPacketNumber = (this._nextPacketNumber + 1) % 256;

  return currentPacketNumber;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

  for (var packet = 0; packet &lt; packets; packet++) {
var isLast = (packet + 1 === packets);
var packetLength = (isLast)
  ? length % MAX_PACKET_LENGTH
  : MAX_PACKET_LENGTH;

var packetNumber = parser.<span class="apidocCodeKeywordSpan">incrementPacketNumber</span>();

this.writeUnsignedNumber(3, packetLength);
this.writeUnsignedNumber(1, packetNumber);

var start = packet * MAX_PACKET_LENGTH;
var end   = start + packetLength;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Parser.prototype.packetLength" id="apidoc.element.mysql.Parser.prototype.packetLength">
        function <span class="apidocSignatureSpan">mysql.Parser.prototype.</span>packetLength
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function packetLength() {
  if (!this._packetHeader) {
    return null;
  }

  return this._packetHeader.length + this._longPacketBuffers.size;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Parser.prototype.parseBuffer" id="apidoc.element.mysql.Parser.prototype.parseBuffer">
        function <span class="apidocSignatureSpan">mysql.Parser.prototype.</span>parseBuffer
        <span class="apidocSignatureSpan">(length)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parseBuffer = function (length) {
  var response = new Buffer(length);
  this._buffer.copy(response, 0, this._offset, this._offset + length);

  this._offset += length;
  return response;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
Parser.prototype.parseLengthCodedBuffer = function() {
var length = this.parseLengthCodedNumber();

if (length === null) {
  return null;
}

return this.<span class="apidocCodeKeywordSpan">parseBuffer</span>(length);
};

Parser.prototype.parseLengthCodedNumber = function parseLengthCodedNumber() {
if (this._offset &gt;= this._buffer.length) {
  var err    = new Error('Parser: read past end');
  err.offset = (this._offset - this._packetOffset);
  err.code   = 'PARSER_READ_PAST_END';
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Parser.prototype.parseFiller" id="apidoc.element.mysql.Parser.prototype.parseFiller">
        function <span class="apidocSignatureSpan">mysql.Parser.prototype.</span>parseFiller
        <span class="apidocSignatureSpan">(length)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parseFiller = function (length) {
  return this.parseBuffer(length);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Parser.prototype.parseGeometryValue" id="apidoc.element.mysql.Parser.prototype.parseGeometryValue">
        function <span class="apidocSignatureSpan">mysql.Parser.prototype.</span>parseGeometryValue
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parseGeometryValue = function () {
  var buffer = this.parseLengthCodedBuffer();
  var offset = 4;

  if (buffer === null || !buffer.length) {
    return null;
  }

  function parseGeometry() {
    var result = null;
    var byteOrder = buffer.readUInt8(offset); offset += 1;
    var wkbType = byteOrder ? buffer.readUInt32LE(offset) : buffer.readUInt32BE(offset); offset += 4;
    switch(wkbType) {
      case 1: // WKBPoint
        var x = byteOrder ? buffer.readDoubleLE(offset) : buffer.readDoubleBE(offset); offset += 8;
        var y = byteOrder ? buffer.readDoubleLE(offset) : buffer.readDoubleBE(offset); offset += 8;
        result = {x: x, y: y};
        break;
      case 2: // WKBLineString
        var numPoints = byteOrder ? buffer.readUInt32LE(offset) : buffer.readUInt32BE(offset); offset += 4;
        result = [];
        for(var i = numPoints; i &gt; 0; i--) {
          var x = byteOrder ? buffer.readDoubleLE(offset) : buffer.readDoubleBE(offset); offset += 8;
          var y = byteOrder ? buffer.readDoubleLE(offset) : buffer.readDoubleBE(offset); offset += 8;
          result.push({x: x, y: y});
        }
        break;
      case 3: // WKBPolygon
        var numRings = byteOrder ? buffer.readUInt32LE(offset) : buffer.readUInt32BE(offset); offset += 4;
        result = [];
        for(var i = numRings; i &gt; 0; i--) {
          var numPoints = byteOrder ? buffer.readUInt32LE(offset) : buffer.readUInt32BE(offset); offset += 4;
          var line = [];
          for(var j = numPoints; j &gt; 0; j--) {
            var x = byteOrder ? buffer.readDoubleLE(offset) : buffer.readDoubleBE(offset); offset += 8;
            var y = byteOrder ? buffer.readDoubleLE(offset) : buffer.readDoubleBE(offset); offset += 8;
            line.push({x: x, y: y});
          }
          result.push(line);
        }
        break;
      case 4: // WKBMultiPoint
      case 5: // WKBMultiLineString
      case 6: // WKBMultiPolygon
      case 7: // WKBGeometryCollection
        var num = byteOrder ? buffer.readUInt32LE(offset) : buffer.readUInt32BE(offset); offset += 4;
        var result = [];
        for(var i = num; i &gt; 0; i--) {
          result.push(parseGeometry());
        }
        break;
    }
    return result;
  }
  return parseGeometry();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
field.buffer()
field.geometry()
```
are aliases for
```
parser.parseLengthCodedString()
parser.parseLengthCodedBuffer()
parser.<span class="apidocCodeKeywordSpan">parseGeometryValue</span>()
```
__You can find which field function you need to use by looking at: [RowDataPacket.prototype._typeCast](https://github.com/mysqljs
/mysql/blob/master/lib/protocol/packets/RowDataPacket.js#L41)__


## Connection Flags

If, for any reason, you would like to change the default connection flags, you
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Parser.prototype.parseLengthCodedBuffer" id="apidoc.element.mysql.Parser.prototype.parseLengthCodedBuffer">
        function <span class="apidocSignatureSpan">mysql.Parser.prototype.</span>parseLengthCodedBuffer
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parseLengthCodedBuffer = function () {
  var length = this.parseLengthCodedNumber();

  if (length === null) {
    return null;
  }

  return this.parseBuffer(length);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
field.string()
field.buffer()
field.geometry()
```
are aliases for
```
parser.parseLengthCodedString()
parser.<span class="apidocCodeKeywordSpan">parseLengthCodedBuffer</span>()
parser.parseGeometryValue()
```
__You can find which field function you need to use by looking at: [RowDataPacket.prototype._typeCast](https://github.com/mysqljs
/mysql/blob/master/lib/protocol/packets/RowDataPacket.js#L41)__


## Connection Flags
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Parser.prototype.parseLengthCodedNumber" id="apidoc.element.mysql.Parser.prototype.parseLengthCodedNumber">
        function <span class="apidocSignatureSpan">mysql.Parser.prototype.</span>parseLengthCodedNumber
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function parseLengthCodedNumber() {
  if (this._offset &gt;= this._buffer.length) {
    var err    = new Error('Parser: read past end');
    err.offset = (this._offset - this._packetOffset);
    err.code   = 'PARSER_READ_PAST_END';
    throw err;
  }

  var bits = this._buffer[this._offset++];

  if (bits &lt;= 250) {
    return bits;
  }

  switch (bits) {
    case 251:
      return null;
    case 252:
      return this.parseUnsignedNumber(2);
    case 253:
      return this.parseUnsignedNumber(3);
    case 254:
      break;
    default:
      var err    = new Error('Unexpected first byte' + (bits ? ': 0x' + bits.toString(16) : ''));
      err.offset = (this._offset - this._packetOffset - 1);
      err.code   = 'PARSER_BAD_LENGTH_BYTE';
      throw err;
  }

  var low = this.parseUnsignedNumber(4);
  var high = this.parseUnsignedNumber(4);
  var value;

  if (high &gt;&gt;&gt; 21) {
    value = (new BigNumber(low)).plus((new BigNumber(MUL_32BIT)).times(high)).toString();

    if (this._supportBigNumbers) {
      return value;
    }

    var err    = new Error(
      'parseLengthCodedNumber: JS precision range exceeded, ' +
      'number is &gt;= 53 bit: "' + value + '"'
    );
    err.offset = (this._offset - this._packetOffset - 8);
    err.code   = 'PARSER_JS_PRECISION_RANGE_EXCEEDED';
    throw err;
  }

  value = low + (MUL_32BIT * high);

  return value;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

  this._offset += bytes;

  return value;
};

Parser.prototype.parseLengthCodedString = function() {
  var length = this.<span class="apidocCodeKeywordSpan">parseLengthCodedNumber</span>();

  if (length === null) {
    return null;
  }

  return this.parseString(length);
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Parser.prototype.parseLengthCodedString" id="apidoc.element.mysql.Parser.prototype.parseLengthCodedString">
        function <span class="apidocSignatureSpan">mysql.Parser.prototype.</span>parseLengthCodedString
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parseLengthCodedString = function () {
  var length = this.parseLengthCodedNumber();

  if (length === null) {
    return null;
  }

  return this.parseString(length);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
```
field.string()
field.buffer()
field.geometry()
```
are aliases for
```
parser.<span class="apidocCodeKeywordSpan">parseLengthCodedString</span>()
parser.parseLengthCodedBuffer()
parser.parseGeometryValue()
```
__You can find which field function you need to use by looking at: [RowDataPacket.prototype._typeCast](https://github.com/mysqljs
/mysql/blob/master/lib/protocol/packets/RowDataPacket.js#L41)__


## Connection Flags
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Parser.prototype.parseNullTerminatedBuffer" id="apidoc.element.mysql.Parser.prototype.parseNullTerminatedBuffer">
        function <span class="apidocSignatureSpan">mysql.Parser.prototype.</span>parseNullTerminatedBuffer
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parseNullTerminatedBuffer = function () {
  var end      = this._nullByteOffset();
  var value    = this._buffer.slice(this._offset, end);
  this._offset = end + 1;

  return value;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Parser.prototype.parseNullTerminatedString" id="apidoc.element.mysql.Parser.prototype.parseNullTerminatedString">
        function <span class="apidocSignatureSpan">mysql.Parser.prototype.</span>parseNullTerminatedString
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parseNullTerminatedString = function () {
  var end      = this._nullByteOffset();
  var value    = this._buffer.toString(this._encoding, this._offset, end);
  this._offset = end + 1;

  return value;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Parser.prototype.parsePacketTerminatedString" id="apidoc.element.mysql.Parser.prototype.parsePacketTerminatedString">
        function <span class="apidocSignatureSpan">mysql.Parser.prototype.</span>parsePacketTerminatedString
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parsePacketTerminatedString = function () {
  var length = this._packetEnd - this._offset;
  return this.parseString(length);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Parser.prototype.parseString" id="apidoc.element.mysql.Parser.prototype.parseString">
        function <span class="apidocSignatureSpan">mysql.Parser.prototype.</span>parseString
        <span class="apidocSignatureSpan">(length)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parseString = function (length) {
  var offset = this._offset;
  var end = offset + length;
  var value = this._buffer.toString(this._encoding, offset, end);

  this._offset = end;
  return value;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
Parser.prototype.parseLengthCodedString = function() {
var length = this.parseLengthCodedNumber();

if (length === null) {
  return null;
}

return this.<span class="apidocCodeKeywordSpan">parseString</span>(length);
};

Parser.prototype.parseLengthCodedBuffer = function() {
var length = this.parseLengthCodedNumber();

if (length === null) {
  return null;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Parser.prototype.parseUnsignedNumber" id="apidoc.element.mysql.Parser.prototype.parseUnsignedNumber">
        function <span class="apidocSignatureSpan">mysql.Parser.prototype.</span>parseUnsignedNumber
        <span class="apidocSignatureSpan">(bytes)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function parseUnsignedNumber(bytes) {
  if (bytes === 1) {
    return this._buffer[this._offset++];
  }

  var buffer = this._buffer;
  var offset = this._offset + bytes - 1;
  var value  = 0;

  if (bytes &gt; 4) {
    var err    = new Error('parseUnsignedNumber: Supports only up to 4 bytes');
    err.offset = (this._offset - this._packetOffset - 1);
    err.code   = 'PARSER_UNSIGNED_TOO_LONG';
    throw err;
  }

  while (offset &gt;= this._offset) {
    value = ((value &lt;&lt; 8) | buffer[offset]) &gt;&gt;&gt; 0;
    offset--;
  }

  this._offset += bytes;

  return value;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  while (!this._paused) {
    if (!this._packetHeader) {
if (!this._combineNextBuffers(4)) {
  break;
}

this._packetHeader = new PacketHeader(
  this.<span class="apidocCodeKeywordSpan">parseUnsignedNumber</span>(3),
  this.parseUnsignedNumber(1)
);

if (this._packetHeader.number !== this._nextPacketNumber) {
  var err = new Error(
    'Packets out of order. Got: ' + this._packetHeader.number + ' ' +
    'Expected: ' + this._nextPacketNumber
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Parser.prototype.pause" id="apidoc.element.mysql.Parser.prototype.pause">
        function <span class="apidocSignatureSpan">mysql.Parser.prototype.</span>pause
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">pause = function () {
  this._paused = true;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  // Handle error, an 'end' event will be emitted after this as well
})
.on('fields', function(fields) {
  // the field packets for the rows to follow
})
.on('result', function(row) {
  // Pausing the connnection is useful if your processing involves I/O
  connection.<span class="apidocCodeKeywordSpan">pause</span>();

  processRow(row, function() {
    connection.resume();
  });
})
.on('end', function() {
  // all rows have been received
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Parser.prototype.peak" id="apidoc.element.mysql.Parser.prototype.peak">
        function <span class="apidocSignatureSpan">mysql.Parser.prototype.</span>peak
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">peak = function () {
  return this._buffer[this._offset];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

if (this._config.debug) {
  this._debugPacket(false, packet);
}
};

Protocol.prototype._determinePacket = function(sequence) {
var firstByte = this._parser.<span class="apidocCodeKeywordSpan">peak</span>();

if (sequence.determinePacket) {
  var Packet = sequence.determinePacket(firstByte, this._parser);
  if (Packet) {
    return Packet;
  }
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Parser.prototype.reachedPacketEnd" id="apidoc.element.mysql.Parser.prototype.reachedPacketEnd">
        function <span class="apidocSignatureSpan">mysql.Parser.prototype.</span>reachedPacketEnd
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">reachedPacketEnd = function () {
  return this._offset === this._packetEnd;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Parser.prototype.resetPacketNumber" id="apidoc.element.mysql.Parser.prototype.resetPacketNumber">
        function <span class="apidocSignatureSpan">mysql.Parser.prototype.</span>resetPacketNumber
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">resetPacketNumber = function () {
  this._nextPacketNumber = 0;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

        Timers.active(sequence);
        sequence._tlsUpgradeCompleteHandler();
      });
    });

  if (this._queue.length === 1) {
    this._parser.<span class="apidocCodeKeywordSpan">resetPacketNumber</span>();
    this._startSequence(sequence);
  }

  return sequence;
};

Protocol.prototype._validateEnqueue = function _validateEnqueue(sequence) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Parser.prototype.resume" id="apidoc.element.mysql.Parser.prototype.resume">
        function <span class="apidocSignatureSpan">mysql.Parser.prototype.</span>resume
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">resume = function () {
  this._paused = false;

  // nextTick() to avoid entering write() multiple times within the same stack
  // which would cause problems as write manipulates the state of the object.
  process.nextTick(this.write.bind(this));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    // the field packets for the rows to follow
  })
  .on('result', function(row) {
    // Pausing the connnection is useful if your processing involves I/O
    connection.pause();

    processRow(row, function() {
      connection.<span class="apidocCodeKeywordSpan">resume</span>();
    });
  })
  .on('end', function() {
    // all rows have been received
  });
```
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Parser.prototype.write" id="apidoc.element.mysql.Parser.prototype.write">
        function <span class="apidocSignatureSpan">mysql.Parser.prototype.</span>write
        <span class="apidocSignatureSpan">(chunk)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function write(chunk) {
  this._nextBuffers.push(chunk);

  while (!this._paused) {
    if (!this._packetHeader) {
      if (!this._combineNextBuffers(4)) {
        break;
      }

      this._packetHeader = new PacketHeader(
        this.parseUnsignedNumber(3),
        this.parseUnsignedNumber(1)
      );

      if (this._packetHeader.number !== this._nextPacketNumber) {
        var err = new Error(
          'Packets out of order. Got: ' + this._packetHeader.number + ' ' +
          'Expected: ' + this._nextPacketNumber
        );

        err.code  = 'PROTOCOL_PACKETS_OUT_OF_ORDER';
        err.fatal = true;

        this._onError(err);
      }

      this.incrementPacketNumber();
    }

    if (!this._combineNextBuffers(this._packetHeader.length)) {
      break;
    }

    this._packetEnd    = this._offset + this._packetHeader.length;
    this._packetOffset = this._offset;

    if (this._packetHeader.length === MAX_PACKET_LENGTH) {
      this._longPacketBuffers.push(this._buffer.slice(this._packetOffset, this._packetEnd));

      this._advanceToNextPacket();
      continue;
    }

    this._combineLongPacketBuffers();

    // Try...finally to ensure exception safety. Unfortunately this is costing
    // us up to ~10% performance in some benchmarks.
    var hadException = true;
    try {
      this._onPacket(this._packetHeader);
      hadException = false;
    } catch (err) {
      if (!err || typeof err.code !== 'string' || err.code.substr(0, 7) !== 'PARSER_') {
        throw err; // Rethrow non-MySQL errors
      }

      // Pass down parser errors
      this._onError(err);
      hadException = false;
    } finally {
      this._advanceToNextPacket();

      // If we had an exception, the parser while loop will be broken out
      // of after the finally block. So we need to make sure to re-enter it
      // to continue parsing any bytes that may already have been received.
      if (hadException) {
        process.nextTick(this.write.bind(this));
      }
    }
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// Connect socket to connection domain
if (Events.usingDomains) {
  this._socket.domain = this.domain;
}

var connection = this;
this._protocol.on('data', function(data) {
  connection._socket.<span class="apidocCodeKeywordSpan">write</span>(data);
});
this._socket.on('data', function(data) {
  connection._protocol.write(data);
});
this._protocol.on('end', function() {
  connection._socket.end();
});
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql.Pool" id="apidoc.module.mysql.Pool">module mysql.Pool</a></h1>


    <h2>
        <a href="#apidoc.element.mysql.Pool.Pool" id="apidoc.element.mysql.Pool.Pool">
        function <span class="apidocSignatureSpan">mysql.</span>Pool
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Pool(options) {
  EventEmitter.call(this);
  this.config = options.config;
  this.config.connectionConfig.pool = this;

  this._acquiringConnections = [];
  this._allConnections       = [];
  this._freeConnections      = [];
  this._connectionQueue      = [];
  this._closed               = false;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Pool.super_" id="apidoc.element.mysql.Pool.super_">
        function <span class="apidocSignatureSpan">mysql.Pool.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function EventEmitter() {
  EventEmitter.init.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql.Pool.prototype" id="apidoc.module.mysql.Pool.prototype">module mysql.Pool.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mysql.Pool.prototype._enqueueCallback" id="apidoc.element.mysql.Pool.prototype._enqueueCallback">
        function <span class="apidocSignatureSpan">mysql.Pool.prototype.</span>_enqueueCallback
        <span class="apidocSignatureSpan">(callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _enqueueCallback(callback) {

  if (this.config.queueLimit &amp;&amp; this._connectionQueue.length &gt;= this.config.queueLimit) {
    process.nextTick(function () {
      var err = new Error('Queue limit reached.');
      err.code = 'POOL_ENQUEUELIMIT';
      callback(err);
    });
    return;
  }

  // Bind to domain, as dequeue will likely occur in a different domain
  var cb = process.domain
    ? process.domain.bind(callback)
    : callback;

  this._connectionQueue.push(cb);
  this.emit('enqueue');
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    var err = new Error('No connections available.');
    err.code = 'POOL_CONNLIMIT';
    cb(err);
  });
  return;
}

this.<span class="apidocCodeKeywordSpan">_enqueueCallback</span>(cb);
};

Pool.prototype.acquireConnection = function acquireConnection(connection, cb) {
if (connection._pool !== this) {
  throw new Error('Connection acquired from wrong pool.');
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Pool.prototype._needsChangeUser" id="apidoc.element.mysql.Pool.prototype._needsChangeUser">
        function <span class="apidocSignatureSpan">mysql.Pool.prototype.</span>_needsChangeUser
        <span class="apidocSignatureSpan">(connection)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _needsChangeUser(connection) {
  var connConfig = connection.config;
  var poolConfig = this.config.connectionConfig;

  // check if changeUser values are different
  return connConfig.user !== poolConfig.user
    || connConfig.database !== poolConfig.database
    || connConfig.password !== poolConfig.password
    || connConfig.charsetNumber !== poolConfig.charsetNumber;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
};

Pool.prototype.acquireConnection = function acquireConnection(connection, cb) {
if (connection._pool !== this) {
  throw new Error('Connection acquired from wrong pool.');
}

var changeUser = this.<span class="apidocCodeKeywordSpan">_needsChangeUser</span>(connection);
var pool       = this;

this._acquiringConnections.push(connection);

function onOperationComplete(err) {
  spliceConnection(pool._acquiringConnections, connection);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Pool.prototype._purgeConnection" id="apidoc.element.mysql.Pool.prototype._purgeConnection">
        function <span class="apidocSignatureSpan">mysql.Pool.prototype.</span>_purgeConnection
        <span class="apidocSignatureSpan">(connection, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _purgeConnection(connection, callback) {
  var cb = callback || function () {};

  if (connection.state === 'disconnected') {
    connection.destroy();
  }

  this._removeConnection(connection);

  if (connection.state !== 'disconnected' &amp;&amp; !connection._protocol._quitSequence) {
    connection._realEnd(cb);
    return;
  }

  process.nextTick(cb);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  if (!this._pool || this._pool._closed) {
    return;
  }

  var pool = this._pool;
  this._pool = null;

  pool.<span class="apidocCodeKeywordSpan">_purgeConnection</span>(this);
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Pool.prototype._removeConnection" id="apidoc.element.mysql.Pool.prototype._removeConnection">
        function <span class="apidocSignatureSpan">mysql.Pool.prototype.</span>_removeConnection
        <span class="apidocSignatureSpan">(connection)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_removeConnection = function (connection) {
  connection._pool = null;

  // Remove connection from all connections
  spliceConnection(this._allConnections, connection);

  // Remove connection from free connections
  spliceConnection(this._freeConnections, connection);

  this.releaseConnection(connection);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
Pool.prototype._purgeConnection = function _purgeConnection(connection, callback) {
var cb = callback || function () {};

if (connection.state === 'disconnected') {
  connection.destroy();
}

this.<span class="apidocCodeKeywordSpan">_removeConnection</span>(connection);

if (connection.state !== 'disconnected' &amp;&amp; !connection._protocol._quitSequence) {
  connection._realEnd(cb);
  return;
}

process.nextTick(cb);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Pool.prototype.acquireConnection" id="apidoc.element.mysql.Pool.prototype.acquireConnection">
        function <span class="apidocSignatureSpan">mysql.Pool.prototype.</span>acquireConnection
        <span class="apidocSignatureSpan">(connection, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function acquireConnection(connection, cb) {
  if (connection._pool !== this) {
    throw new Error('Connection acquired from wrong pool.');
  }

  var changeUser = this._needsChangeUser(connection);
  var pool       = this;

  this._acquiringConnections.push(connection);

  function onOperationComplete(err) {
    spliceConnection(pool._acquiringConnections, connection);

    if (pool._closed) {
      err = new Error('Pool is closed.');
      err.code = 'POOL_CLOSED';
    }

    if (err) {
      pool._connectionQueue.unshift(cb);
      pool._purgeConnection(connection);
      return;
    }

    if (changeUser) {
      pool.emit('connection', connection);
    }

    pool.emit('acquire', connection);
    cb(null, connection);
  }

  if (changeUser) {
    // restore user back to pool configuration
    connection.config = this.config.newConnectionConfig();
    connection.changeUser({timeout: this.config.acquireTimeout}, onOperationComplete);
  } else {
    // ping connection
    connection.ping({timeout: this.config.acquireTimeout}, onOperationComplete);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  }

  var connection;
  var pool = this;

  if (this._freeConnections.length &gt; 0) {
connection = this._freeConnections.shift();
this.<span class="apidocCodeKeywordSpan">acquireConnection</span>(connection, cb);
return;
  }

  if (this.config.connectionLimit === 0 || this._allConnections.length &lt; this.config.connectionLimit) {
connection = new PoolConnection(this, { config: this.config.newConnectionConfig() });

this._acquiringConnections.push(connection);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Pool.prototype.end" id="apidoc.element.mysql.Pool.prototype.end">
        function <span class="apidocSignatureSpan">mysql.Pool.prototype.</span>end
        <span class="apidocSignatureSpan">(cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">end = function (cb) {
  this._closed = true;

  if (typeof cb !== 'function') {
    cb = function (err) {
      if (err) throw err;
    };
  }

  var calledBack   = false;
  var waitingClose = 0;

  function onEnd(err) {
    if (!calledBack &amp;&amp; (err || --waitingClose &lt;= 0)) {
      calledBack = true;
      cb(err);
    }
  }

  while (this._allConnections.length !== 0) {
    waitingClose++;
    this._purgeConnection(this._allConnections[0], onEnd);
  }

  if (waitingClose === 0) {
    process.nextTick(onEnd);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
connection.connect();

connection.query('SELECT 1 + 1 AS solution', function (error, results, fields) {
if (error) throw error;
console.log('The solution is: ', results[0].solution);
});

connection.<span class="apidocCodeKeywordSpan">end</span>();
```

From this example, you can learn the following:

* Every method you invoke on a connection is queued and executed in sequence.
* Closing the connection is done using `end()` which makes sure all remaining
queries are executed before sending a quit packet to the mysql server.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Pool.prototype.escape" id="apidoc.element.mysql.Pool.prototype.escape">
        function <span class="apidocSignatureSpan">mysql.Pool.prototype.</span>escape
        <span class="apidocSignatureSpan">(value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">escape = function (value) {
  return mysql.escape(value, this.config.connectionConfig.stringifyObjects, this.config.connectionConfig.timezone);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
);
```

## Escaping query values

In order to avoid SQL Injection attacks, you should always escape any user
provided data before using it inside a SQL query. You can do so using the
`mysql.<span class="apidocCodeKeywordSpan">escape</span>()`, `connection.escape()` or `pool.escape()` methods:

```js
var userId = 'some user provided value';
var sql    = 'SELECT * FROM users WHERE id = ' + connection.escape(userId);
connection.query(sql, function (error, results, fields) {
if (error) throw error;
// ...
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Pool.prototype.escapeId" id="apidoc.element.mysql.Pool.prototype.escapeId">
        function <span class="apidocSignatureSpan">mysql.Pool.prototype.</span>escapeId
        <span class="apidocSignatureSpan">(value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function escapeId(value) {
  return mysql.escapeId(value, false);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

console.log(query); // SELECT * FROM posts WHERE title='Hello MySQL'
```

## Escaping query identifiers

If you can't trust an SQL identifier (database / table / column name) because it is
provided by a user, you should escape it with `mysql.<span class="apidocCodeKeywordSpan">escapeId</span>(identifier)`,
`connection.escapeId(identifier)` or `pool.escapeId(identifier)` like this:

```js
var sorter = 'date';
var sql    = 'SELECT * FROM posts ORDER BY ' + connection.escapeId(sorter);
connection.query(sql, function (error, results, fields) {
if (error) throw error;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Pool.prototype.getConnection" id="apidoc.element.mysql.Pool.prototype.getConnection">
        function <span class="apidocSignatureSpan">mysql.Pool.prototype.</span>getConnection
        <span class="apidocSignatureSpan">(cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getConnection = function (cb) {

  if (this._closed) {
    var err = new Error('Pool is closed.');
    err.code = 'POOL_CLOSED';
    process.nextTick(function () {
      cb(err);
    });
    return;
  }

  var connection;
  var pool = this;

  if (this._freeConnections.length &gt; 0) {
    connection = this._freeConnections.shift();
    this.acquireConnection(connection, cb);
    return;
  }

  if (this.config.connectionLimit === 0 || this._allConnections.length &lt; this.config.connectionLimit) {
    connection = new PoolConnection(this, { config: this.config.newConnectionConfig() });

    this._acquiringConnections.push(connection);
    this._allConnections.push(connection);

    connection.connect({timeout: this.config.acquireTimeout}, function onConnect(err) {
      spliceConnection(pool._acquiringConnections, connection);

      if (pool._closed) {
        err = new Error('Pool is closed.');
        err.code = 'POOL_CLOSED';
      }

      if (err) {
        pool._purgeConnection(connection);
        cb(err);
        return;
      }

      pool.emit('connection', connection);
      pool.emit('acquire', connection);
      cb(null, connection);
    });
    return;
  }

  if (!this.config.waitForConnections) {
    process.nextTick(function(){
      var err = new Error('No connections available.');
      err.code = 'POOL_CONNLIMIT';
      cb(err);
    });
    return;
  }

  this._enqueueCallback(cb);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var pool  = mysql.createPool({
  host     : 'example.org',
  user     : 'bob',
  password : 'secret',
  database : 'my_db'
});

pool.<span class="apidocCodeKeywordSpan">getConnection</span>(function(err, connection) {
  // connected! (unless `err` is set)
});
```

When you are done with a connection, just call `connection.release()` and the
connection will return to the pool, ready to be used again by someone else.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Pool.prototype.query" id="apidoc.element.mysql.Pool.prototype.query">
        function <span class="apidocSignatureSpan">mysql.Pool.prototype.</span>query
        <span class="apidocSignatureSpan">(sql, values, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">query = function (sql, values, cb) {
  var query = Connection.createQuery(sql, values, cb);

  if (!(typeof sql === 'object' &amp;&amp; 'typeCast' in sql)) {
    query.typeCast = this.config.connectionConfig.typeCast;
  }

  if (this.config.connectionConfig.trace) {
    // Long stack trace support
    query._callSite = new Error();
  }

  this.getConnection(function (err, conn) {
    if (err) {
      query.on('error', function () {});
      query.end(err);
      return;
    }

    // Release connection based off event
    query.once('end', function() {
      conn.release();
    });

    conn.query(query);
  });

  return query;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  user     : 'me',
  password : 'secret',
  database : 'my_db'
});

connection.connect();

connection.<span class="apidocCodeKeywordSpan">query</span>('SELECT 1 + 1 AS solution', function (error, results, fields
) {
  if (error) throw error;
  console.log('The solution is: ', results[0].solution);
});

connection.end();
```
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Pool.prototype.releaseConnection" id="apidoc.element.mysql.Pool.prototype.releaseConnection">
        function <span class="apidocSignatureSpan">mysql.Pool.prototype.</span>releaseConnection
        <span class="apidocSignatureSpan">(connection)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function releaseConnection(connection) {

  if (this._acquiringConnections.indexOf(connection) !== -1) {
    // connection is being acquired
    return;
  }

  if (connection._pool) {
    if (connection._pool !== this) {
      throw new Error('Connection released to wrong pool');
    }

    if (this._freeConnections.indexOf(connection) !== -1) {
      // connection already in free connection pool
      // this won't catch all double-release cases
      throw new Error('Connection already released');
    } else {
      // add connection to end of free queue
      this._freeConnections.push(connection);
      this.emit('release', connection);
    }
  }

  if (this._closed) {
    // empty the connection queue
    this._connectionQueue.splice(0).forEach(function (cb) {
      var err = new Error('Pool is closed.');
      err.code = 'POOL_CLOSED';
      process.nextTick(function () {
        cb(err);
      });
    });
  } else if (this._connectionQueue.length) {
    // get connection with next waiting callback
    this.getConnection(this._connectionQueue.shift());
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
PoolConnection.prototype.release = function release() {
var pool = this._pool;

if (!pool || pool._closed) {
  return undefined;
}

return pool.<span class="apidocCodeKeywordSpan">releaseConnection</span>(this);
};

// TODO: Remove this when we are removing PoolConnection#end
PoolConnection.prototype._realEnd = Connection.prototype.end;

PoolConnection.prototype.end = function () {
console.warn( 'Calling conn.end() to release a pooled connection is '
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql.PoolCluster" id="apidoc.module.mysql.PoolCluster">module mysql.PoolCluster</a></h1>


    <h2>
        <a href="#apidoc.element.mysql.PoolCluster.PoolCluster" id="apidoc.element.mysql.PoolCluster.PoolCluster">
        function <span class="apidocSignatureSpan">mysql.</span>PoolCluster
        <span class="apidocSignatureSpan">(config)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function PoolCluster(config) {
  EventEmitter.call(this);

  config = config || {};
  this._canRetry = typeof config.canRetry === 'undefined' ? true : config.canRetry;
  this._defaultSelector = config.defaultSelector || 'RR';
  this._removeNodeErrorCount = config.removeNodeErrorCount || 5;
  this._restoreNodeTimeout = config.restoreNodeTimeout || 0;

  this._closed = false;
  this._findCaches = Object.create(null);
  this._lastId = 0;
  this._namespaces = Object.create(null);
  this._nodes = Object.create(null);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.PoolCluster.super_" id="apidoc.element.mysql.PoolCluster.super_">
        function <span class="apidocSignatureSpan">mysql.PoolCluster.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function EventEmitter() {
  EventEmitter.init.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql.PoolCluster.prototype" id="apidoc.module.mysql.PoolCluster.prototype">module mysql.PoolCluster.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mysql.PoolCluster.prototype._clearFindCaches" id="apidoc.element.mysql.PoolCluster.prototype._clearFindCaches">
        function <span class="apidocSignatureSpan">mysql.PoolCluster.prototype.</span>_clearFindCaches
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _clearFindCaches() {
  this._findCaches = Object.create(null);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
this._nodes[nodeId] = {
  id            : nodeId,
  errorCount    : 0,
  pool          : new Pool({config: poolConfig}),
  _offlineUntil : 0
};

this.<span class="apidocCodeKeywordSpan">_clearFindCaches</span>();
};

PoolCluster.prototype.end = function end(callback) {
var cb = callback !== undefined
  ? callback
  : _cb;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.PoolCluster.prototype._decreaseErrorCount" id="apidoc.element.mysql.PoolCluster.prototype._decreaseErrorCount">
        function <span class="apidocSignatureSpan">mysql.PoolCluster.prototype.</span>_decreaseErrorCount
        <span class="apidocSignatureSpan">(node)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _decreaseErrorCount(node) {
  var errorCount = node.errorCount;

  if (errorCount &gt; this._removeNodeErrorCount) {
    errorCount = this._removeNodeErrorCount;
  }

  if (errorCount &lt; 1) {
    errorCount = 1;
  }

  node.errorCount = errorCount - 1;

  if (node._offlineUntil) {
    node._offlineUntil = 0;
    this.emit('online', node.id);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

  node.pool.getConnection(function (err, connection) {
    if (err) {
      self._increaseErrorCount(node);
      cb(err);
      return;
    } else {
      self.<span class="apidocCodeKeywordSpan">_decreaseErrorCount</span>(node);
    }

    connection._clusterId = node.id;

    cb(null, connection);
  });
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.PoolCluster.prototype._findNodeIds" id="apidoc.element.mysql.PoolCluster.prototype._findNodeIds">
        function <span class="apidocSignatureSpan">mysql.PoolCluster.prototype.</span>_findNodeIds
        <span class="apidocSignatureSpan">(pattern, includeOffline)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _findNodeIds(pattern, includeOffline) {
  var currentTime  = 0;
  var foundNodeIds = this._findCaches[pattern];

  if (foundNodeIds === undefined) {
    var expression = patternRegExp(pattern);
    var nodeIds    = Object.keys(this._nodes);

    foundNodeIds = nodeIds.filter(function (id) {
      return id.match(expression);
    });

    this._findCaches[pattern] = foundNodeIds;
  }

  if (includeOffline) {
    return foundNodeIds;
  }

  return foundNodeIds.filter(function (nodeId) {
    var node = this._getNode(nodeId);

    if (!node._offlineUntil) {
      return true;
    }

    if (!currentTime) {
      currentTime = getMonotonicMilliseconds();
    }

    return node._offlineUntil &lt;= currentTime;
  }, this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
this._namespaces[key] = new PoolNamespace(this, pattern, selector);
  }

  return this._namespaces[key];
};

PoolCluster.prototype.remove = function remove(pattern) {
  var foundNodeIds = this.<span class="apidocCodeKeywordSpan">_findNodeIds</span>(pattern, true);

  for (var i = 0; i &lt; foundNodeIds.length; i++) {
var node = this._getNode(foundNodeIds[i]);

if (node) {
  this._removeNode(node);
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.PoolCluster.prototype._getConnection" id="apidoc.element.mysql.PoolCluster.prototype._getConnection">
        function <span class="apidocSignatureSpan">mysql.PoolCluster.prototype.</span>_getConnection
        <span class="apidocSignatureSpan">(node, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_getConnection = function (node, cb) {
  var self = this;

  node.pool.getConnection(function (err, connection) {
    if (err) {
      self._increaseErrorCount(node);
      cb(err);
      return;
    } else {
      self._decreaseErrorCount(node);
    }

    connection._clusterId = node.id;

    cb(null, connection);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  err.code = 'POOL_NOEXIST';
}

cb(err);
return;
  }

  cluster.<span class="apidocCodeKeywordSpan">_getConnection</span>(clusterNode, function(err, connection) {
var retry = err &amp;&amp; cluster._canRetry
  &amp;&amp; cluster._findNodeIds(namespace._pattern).length !== 0;

if (retry) {
  namespace.getConnection(cb);
  return;
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.PoolCluster.prototype._getNode" id="apidoc.element.mysql.PoolCluster.prototype._getNode">
        function <span class="apidocSignatureSpan">mysql.PoolCluster.prototype.</span>_getNode
        <span class="apidocSignatureSpan">(id)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _getNode(id) {
  return this._nodes[id] || null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  return this._namespaces[key];
};

PoolCluster.prototype.remove = function remove(pattern) {
  var foundNodeIds = this._findNodeIds(pattern, true);

  for (var i = 0; i &lt; foundNodeIds.length; i++) {
    var node = this.<span class="apidocCodeKeywordSpan">_getNode</span>(foundNodeIds[i]);

    if (node) {
      this._removeNode(node);
    }
  }
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.PoolCluster.prototype._increaseErrorCount" id="apidoc.element.mysql.PoolCluster.prototype._increaseErrorCount">
        function <span class="apidocSignatureSpan">mysql.PoolCluster.prototype.</span>_increaseErrorCount
        <span class="apidocSignatureSpan">(node)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _increaseErrorCount(node) {
  var errorCount = ++node.errorCount;

  if (this._removeNodeErrorCount &gt; errorCount) {
    return;
  }

  if (this._restoreNodeTimeout &gt; 0) {
    node._offlineUntil = getMonotonicMilliseconds() + this._restoreNodeTimeout;
    this.emit('offline', node.id);
    return;
  }

  this._removeNode(node);
  this.emit('remove', node.id);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
};

PoolCluster.prototype._getConnection = function(node, cb) {
  var self = this;

  node.pool.getConnection(function (err, connection) {
if (err) {
  self.<span class="apidocCodeKeywordSpan">_increaseErrorCount</span>(node);
  cb(err);
  return;
} else {
  self._decreaseErrorCount(node);
}

connection._clusterId = node.id;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.PoolCluster.prototype._removeNode" id="apidoc.element.mysql.PoolCluster.prototype._removeNode">
        function <span class="apidocSignatureSpan">mysql.PoolCluster.prototype.</span>_removeNode
        <span class="apidocSignatureSpan">(node)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _removeNode(node) {
  delete this._nodes[node.id];

  this._clearFindCaches();

  node.pool.end(_noop);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
PoolCluster.prototype.remove = function remove(pattern) {
var foundNodeIds = this._findNodeIds(pattern, true);

for (var i = 0; i &lt; foundNodeIds.length; i++) {
  var node = this._getNode(foundNodeIds[i]);

  if (node) {
    this.<span class="apidocCodeKeywordSpan">_removeNode</span>(node);
  }
}
};

PoolCluster.prototype.getConnection = function(pattern, selector, cb) {
var namespace;
if (typeof pattern === 'function') {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.PoolCluster.prototype.add" id="apidoc.element.mysql.PoolCluster.prototype.add">
        function <span class="apidocSignatureSpan">mysql.PoolCluster.prototype.</span>add
        <span class="apidocSignatureSpan">(id, config)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function add(id, config) {
  if (this._closed) {
    throw new Error('PoolCluster is closed.');
  }

  var nodeId = typeof id === 'object'
    ? 'CLUSTER::' + (++this._lastId)
    : String(id);

  if (this._nodes[nodeId] !== undefined) {
    throw new Error('Node ID "' + nodeId + '" is already defined in PoolCluster.');
  }

  var poolConfig = typeof id !== 'object'
    ? new PoolConfig(config)
    : new PoolConfig(id);

  this._nodes[nodeId] = {
    id            : nodeId,
    errorCount    : 0,
    pool          : new Pool({config: poolConfig}),
    _offlineUntil : 0
  };

  this._clearFindCaches();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
PoolCluster provides multiple hosts connection. (group &amp; retry &amp; selector)

```js
// create
var poolCluster = mysql.createPoolCluster();

// add configurations (the config is a pool config object)
poolCluster.<span class="apidocCodeKeywordSpan">add</span>(config); // add configuration with automatic name
poolCluster.add('MASTER', masterConfig); // add a named configuration
poolCluster.add('SLAVE1', slave1Config);
poolCluster.add('SLAVE2', slave2Config);

// remove configurations
poolCluster.remove('SLAVE2'); // By nodeId
poolCluster.remove('SLAVE*'); // By target group : SLAVE1-2
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.PoolCluster.prototype.end" id="apidoc.element.mysql.PoolCluster.prototype.end">
        function <span class="apidocSignatureSpan">mysql.PoolCluster.prototype.</span>end
        <span class="apidocSignatureSpan">(callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function end(callback) {
  var cb = callback !== undefined
    ? callback
    : _cb;

  if (typeof cb !== 'function') {
    throw TypeError('callback argument must be a function');
  }

  if (this._closed) {
    process.nextTick(cb);
    return;
  }

  this._closed = true;

  var calledBack   = false;
  var nodeIds      = Object.keys(this._nodes);
  var waitingClose = 0;

  function onEnd(err) {
    if (!calledBack &amp;&amp; (err || --waitingClose &lt;= 0)) {
      calledBack = true;
      cb(err);
    }
  }

  for (var i = 0; i &lt; nodeIds.length; i++) {
    var nodeId = nodeIds[i];
    var node = this._nodes[nodeId];

    waitingClose++;
    node.pool.end(onEnd);
  }

  if (waitingClose === 0) {
    process.nextTick(onEnd);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
connection.connect();

connection.query('SELECT 1 + 1 AS solution', function (error, results, fields) {
if (error) throw error;
console.log('The solution is: ', results[0].solution);
});

connection.<span class="apidocCodeKeywordSpan">end</span>();
```

From this example, you can learn the following:

* Every method you invoke on a connection is queued and executed in sequence.
* Closing the connection is done using `end()` which makes sure all remaining
queries are executed before sending a quit packet to the mysql server.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.PoolCluster.prototype.getConnection" id="apidoc.element.mysql.PoolCluster.prototype.getConnection">
        function <span class="apidocSignatureSpan">mysql.PoolCluster.prototype.</span>getConnection
        <span class="apidocSignatureSpan">(pattern, selector, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getConnection = function (pattern, selector, cb) {
  var namespace;
  if (typeof pattern === 'function') {
    cb = pattern;
    namespace = this.of();
  } else {
    if (typeof selector === 'function') {
      cb = selector;
      selector = this._defaultSelector;
    }

    namespace = this.of(pattern, selector);
  }

  namespace.getConnection(cb);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var pool  = mysql.createPool({
  host     : 'example.org',
  user     : 'bob',
  password : 'secret',
  database : 'my_db'
});

pool.<span class="apidocCodeKeywordSpan">getConnection</span>(function(err, connection) {
  // connected! (unless `err` is set)
});
```

When you are done with a connection, just call `connection.release()` and the
connection will return to the pool, ready to be used again by someone else.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.PoolCluster.prototype.of" id="apidoc.element.mysql.PoolCluster.prototype.of">
        function <span class="apidocSignatureSpan">mysql.PoolCluster.prototype.</span>of
        <span class="apidocSignatureSpan">(pattern, selector)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">of = function (pattern, selector) {
  pattern = pattern || '*';

  selector = selector || this._defaultSelector;
  selector = selector.toUpperCase();
  if (typeof PoolSelector[selector] === 'undefined') {
    selector = this._defaultSelector;
  }

  var key = pattern + selector;

  if (typeof this._namespaces[key] === 'undefined') {
    this._namespaces[key] = new PoolNamespace(this, pattern, selector);
  }

  return this._namespaces[key];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// A pattern can be passed with *  as wildcard
poolCluster.getConnection('SLAVE*', 'ORDER', function (err, connection) {});

// The pattern can also be a regular expression
poolCluster.getConnection(/^SLAVE[12]$/, function (err, connection) {});

// of namespace : of(pattern, selector)
poolCluster.<span class="apidocCodeKeywordSpan">of</span>('*').getConnection(function (err, connection) {});

var pool = poolCluster.of('SLAVE*', 'RANDOM');
pool.getConnection(function (err, connection) {});
pool.getConnection(function (err, connection) {});
pool.query(function (error, results, fields) {});

// close all connections
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.PoolCluster.prototype.remove" id="apidoc.element.mysql.PoolCluster.prototype.remove">
        function <span class="apidocSignatureSpan">mysql.PoolCluster.prototype.</span>remove
        <span class="apidocSignatureSpan">(pattern)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function remove(pattern) {
  var foundNodeIds = this._findNodeIds(pattern, true);

  for (var i = 0; i &lt; foundNodeIds.length; i++) {
    var node = this._getNode(foundNodeIds[i]);

    if (node) {
      this._removeNode(node);
    }
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// add configurations (the config is a pool config object)
poolCluster.add(config); // add configuration with automatic name
poolCluster.add('MASTER', masterConfig); // add a named configuration
poolCluster.add('SLAVE1', slave1Config);
poolCluster.add('SLAVE2', slave2Config);

// remove configurations
poolCluster.<span class="apidocCodeKeywordSpan">remove</span>('SLAVE2'); // By nodeId
poolCluster.remove('SLAVE*'); // By target group : SLAVE1-2

// Target Group : ALL(anonymous, MASTER, SLAVE1-2), Selector : round-robin(default)
poolCluster.getConnection(function (err, connection) {});

// Target Group : MASTER, Selector : round-robin
poolCluster.getConnection('MASTER', function (err, connection) {});
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql.PoolConfig" id="apidoc.module.mysql.PoolConfig">module mysql.PoolConfig</a></h1>


    <h2>
        <a href="#apidoc.element.mysql.PoolConfig.PoolConfig" id="apidoc.element.mysql.PoolConfig.PoolConfig">
        function <span class="apidocSignatureSpan">mysql.</span>PoolConfig
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function PoolConfig(options) {
  if (typeof options === 'string') {
    options = ConnectionConfig.parseUrl(options);
  }

  this.acquireTimeout     = (options.acquireTimeout === undefined)
    ? 10 * 1000
    : Number(options.acquireTimeout);
  this.connectionConfig   = new ConnectionConfig(options);
  this.waitForConnections = (options.waitForConnections === undefined)
    ? true
    : Boolean(options.waitForConnections);
  this.connectionLimit    = (options.connectionLimit === undefined)
    ? 10
    : Number(options.connectionLimit);
  this.queueLimit         = (options.queueLimit === undefined)
    ? 0
    : Number(options.queueLimit);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql.PoolConfig.prototype" id="apidoc.module.mysql.PoolConfig.prototype">module mysql.PoolConfig.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mysql.PoolConfig.prototype.newConnectionConfig" id="apidoc.element.mysql.PoolConfig.prototype.newConnectionConfig">
        function <span class="apidocSignatureSpan">mysql.PoolConfig.prototype.</span>newConnectionConfig
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function newConnectionConfig() {
  var connectionConfig = new ConnectionConfig(this.connectionConfig);

  connectionConfig.clientFlags   = this.connectionConfig.clientFlags;
  connectionConfig.maxPacketSize = this.connectionConfig.maxPacketSize;

  return connectionConfig;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  if (this._freeConnections.length &gt; 0) {
connection = this._freeConnections.shift();
this.acquireConnection(connection, cb);
return;
  }

  if (this.config.connectionLimit === 0 || this._allConnections.length &lt; this.config.connectionLimit) {
connection = new PoolConnection(this, { config: this.config.<span class="apidocCodeKeywordSpan">newConnectionConfig</span>() });

this._acquiringConnections.push(connection);
this._allConnections.push(connection);

connection.connect({timeout: this.config.acquireTimeout}, function onConnect(err) {
  spliceConnection(pool._acquiringConnections, connection);
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql.PoolConnection" id="apidoc.module.mysql.PoolConnection">module mysql.PoolConnection</a></h1>


    <h2>
        <a href="#apidoc.element.mysql.PoolConnection.PoolConnection" id="apidoc.element.mysql.PoolConnection.PoolConnection">
        function <span class="apidocSignatureSpan">mysql.</span>PoolConnection
        <span class="apidocSignatureSpan">(pool, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function PoolConnection(pool, options) {
  Connection.call(this, options);
  this._pool  = pool;

  // Bind connection to pool domain
  if (Events.usingDomains) {
    this.domain = pool.domain;
  }

  // When a fatal error occurs the connection's protocol ends, which will cause
  // the connection to end as well, thus we only need to watch for the end event
  // and we will be notified of disconnects.
  this.on('end', this._removeFromPool);
  this.on('error', function (err) {
    if (err.fatal) {
      this._removeFromPool();
    }
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.PoolConnection.super_" id="apidoc.element.mysql.PoolConnection.super_">
        function <span class="apidocSignatureSpan">mysql.PoolConnection.</span>super_
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Connection(options) {
  Events.EventEmitter.call(this);

  this.config = options.config;

  this._socket        = options.socket;
  this._protocol      = new Protocol({config: this.config, connection: this});
  this._connectCalled = false;
  this.state          = 'disconnected';
  this.threadId       = null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql.PoolConnection.prototype" id="apidoc.module.mysql.PoolConnection.prototype">module mysql.PoolConnection.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mysql.PoolConnection.prototype._realEnd" id="apidoc.element.mysql.PoolConnection.prototype._realEnd">
        function <span class="apidocSignatureSpan">mysql.PoolConnection.prototype.</span>_realEnd
        <span class="apidocSignatureSpan">(options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function end(options, callback) {
  var cb   = callback;
  var opts = options;

  if (!callback &amp;&amp; typeof options === 'function') {
    cb   = options;
    opts = null;
  }

  // create custom options reference
  opts = Object.create(opts || null);

  if (opts.timeout === undefined) {
    // default timeout of 30 seconds
    opts.timeout = 30000;
  }

  this._implyConnect();
  this._protocol.quit(opts, bindToCurrentDomain(cb));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  if (connection.state === 'disconnected') {
    connection.destroy();
  }

  this._removeConnection(connection);

  if (connection.state !== 'disconnected' &amp;&amp; !connection._protocol._quitSequence) {
    connection.<span class="apidocCodeKeywordSpan">_realEnd</span>(cb);
    return;
  }

  process.nextTick(cb);
};

Pool.prototype._removeConnection = function(connection) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.PoolConnection.prototype._removeFromPool" id="apidoc.element.mysql.PoolConnection.prototype._removeFromPool">
        function <span class="apidocSignatureSpan">mysql.PoolConnection.prototype.</span>_removeFromPool
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _removeFromPool() {
  if (!this._pool || this._pool._closed) {
    return;
  }

  var pool = this._pool;
  this._pool = null;

  pool._purgeConnection(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

// When a fatal error occurs the connection's protocol ends, which will cause
// the connection to end as well, thus we only need to watch for the end event
// and we will be notified of disconnects.
this.on('end', this._removeFromPool);
this.on('error', function (err) {
  if (err.fatal) {
    this.<span class="apidocCodeKeywordSpan">_removeFromPool</span>();
  }
});
}

PoolConnection.prototype.release = function release() {
var pool = this._pool;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.PoolConnection.prototype.destroy" id="apidoc.element.mysql.PoolConnection.prototype.destroy">
        function <span class="apidocSignatureSpan">mysql.PoolConnection.prototype.</span>destroy
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">destroy = function () {
  Connection.prototype.destroy.apply(this, arguments);
  this._removeFromPool(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

An alternative way to end the connection is to call the `destroy()` method.
This will cause an immediate termination of the underlying socket.
Additionally `destroy()` guarantees that no more events or callbacks will be
triggered for the connection.

```js
connection.<span class="apidocCodeKeywordSpan">destroy</span>();
```

Unlike `end()` the `destroy()` method does not take a callback argument.

## Pooling connections

Rather than creating and managing connections one-by-one, this module also
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.PoolConnection.prototype.end" id="apidoc.element.mysql.PoolConnection.prototype.end">
        function <span class="apidocSignatureSpan">mysql.PoolConnection.prototype.</span>end
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">end = function () {
  console.warn( 'Calling conn.end() to release a pooled connection is '
              + 'deprecated. In next version calling conn.end() will be '
              + 'restored to default conn.end() behavior. Use '
              + 'conn.release() instead.'
              );
  this.release();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
connection.connect();

connection.query('SELECT 1 + 1 AS solution', function (error, results, fields) {
if (error) throw error;
console.log('The solution is: ', results[0].solution);
});

connection.<span class="apidocCodeKeywordSpan">end</span>();
```

From this example, you can learn the following:

* Every method you invoke on a connection is queued and executed in sequence.
* Closing the connection is done using `end()` which makes sure all remaining
queries are executed before sending a quit packet to the mysql server.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.PoolConnection.prototype.release" id="apidoc.element.mysql.PoolConnection.prototype.release">
        function <span class="apidocSignatureSpan">mysql.PoolConnection.prototype.</span>release
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function release() {
  var pool = this._pool;

  if (!pool || pool._closed) {
    return undefined;
  }

  return pool.releaseConnection(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
});

pool.getConnection(function(err, connection) {
  // connected! (unless `err` is set)
});
```

When you are done with a connection, just call `connection.<span class="apidocCodeKeywordSpan">release</span>()` and the
connection will return to the pool, ready to be used again by someone else.

```js
var mysql = require('mysql');
var pool  = mysql.createPool(...);

pool.getConnection(function(err, connection) {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql.PoolNamespace" id="apidoc.module.mysql.PoolNamespace">module mysql.PoolNamespace</a></h1>


    <h2>
        <a href="#apidoc.element.mysql.PoolNamespace.PoolNamespace" id="apidoc.element.mysql.PoolNamespace.PoolNamespace">
        function <span class="apidocSignatureSpan">mysql.</span>PoolNamespace
        <span class="apidocSignatureSpan">(cluster, pattern, selector)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function PoolNamespace(cluster, pattern, selector) {
  this._cluster = cluster;
  this._pattern = pattern;
  this._selector = new PoolSelector[selector]();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql.PoolNamespace.prototype" id="apidoc.module.mysql.PoolNamespace.prototype">module mysql.PoolNamespace.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mysql.PoolNamespace.prototype._getClusterNode" id="apidoc.element.mysql.PoolNamespace.prototype._getClusterNode">
        function <span class="apidocSignatureSpan">mysql.PoolNamespace.prototype.</span>_getClusterNode
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _getClusterNode() {
  var foundNodeIds = this._cluster._findNodeIds(this._pattern);
  var nodeId;

  switch (foundNodeIds.length) {
    case 0:
      nodeId = null;
      break;
    case 1:
      nodeId = foundNodeIds[0];
      break;
    default:
      nodeId = this._selector(foundNodeIds);
      break;
  }

  return nodeId !== null
    ? this._cluster._getNode(nodeId)
    : null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
function PoolNamespace(cluster, pattern, selector) {
  this._cluster = cluster;
  this._pattern = pattern;
  this._selector = new PoolSelector[selector]();
}

PoolNamespace.prototype.getConnection = function(cb) {
  var clusterNode = this.<span class="apidocCodeKeywordSpan">_getClusterNode</span>();
  var cluster     = this._cluster;
  var namespace   = this;

  if (clusterNode === null) {
var err = null;

if (this._cluster._findNodeIds(this._pattern, true).length !== 0) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.PoolNamespace.prototype.getConnection" id="apidoc.element.mysql.PoolNamespace.prototype.getConnection">
        function <span class="apidocSignatureSpan">mysql.PoolNamespace.prototype.</span>getConnection
        <span class="apidocSignatureSpan">(cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getConnection = function (cb) {
  var clusterNode = this._getClusterNode();
  var cluster     = this._cluster;
  var namespace   = this;

  if (clusterNode === null) {
    var err = null;

    if (this._cluster._findNodeIds(this._pattern, true).length !== 0) {
      err = new Error('Pool does not have online node.');
      err.code = 'POOL_NONEONLINE';
    } else {
      err = new Error('Pool does not exist.');
      err.code = 'POOL_NOEXIST';
    }

    cb(err);
    return;
  }

  cluster._getConnection(clusterNode, function(err, connection) {
    var retry = err &amp;&amp; cluster._canRetry
      &amp;&amp; cluster._findNodeIds(namespace._pattern).length !== 0;

    if (retry) {
      namespace.getConnection(cb);
      return;
    }

    if (err) {
      cb(err);
      return;
    }

    cb(null, connection);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var pool  = mysql.createPool({
  host     : 'example.org',
  user     : 'bob',
  password : 'secret',
  database : 'my_db'
});

pool.<span class="apidocCodeKeywordSpan">getConnection</span>(function(err, connection) {
  // connected! (unless `err` is set)
});
```

When you are done with a connection, just call `connection.release()` and the
connection will return to the pool, ready to be used again by someone else.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.PoolNamespace.prototype.query" id="apidoc.element.mysql.PoolNamespace.prototype.query">
        function <span class="apidocSignatureSpan">mysql.PoolNamespace.prototype.</span>query
        <span class="apidocSignatureSpan">(sql, values, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">query = function (sql, values, cb) {
  var cluster     = this._cluster;
  var clusterNode = this._getClusterNode();
  var query       = Connection.createQuery(sql, values, cb);
  var namespace   = this;

  if (clusterNode === null) {
    var err = null;

    if (this._cluster._findNodeIds(this._pattern, true).length !== 0) {
      err = new Error('Pool does not have online node.');
      err.code = 'POOL_NONEONLINE';
    } else {
      err = new Error('Pool does not exist.');
      err.code = 'POOL_NOEXIST';
    }

    process.nextTick(function () {
      query.on('error', function () {});
      query.end(err);
    });
    return query;
  }

  if (!(typeof sql === 'object' &amp;&amp; 'typeCast' in sql)) {
    query.typeCast = clusterNode.pool.config.connectionConfig.typeCast;
  }

  if (clusterNode.pool.config.connectionConfig.trace) {
    // Long stack trace support
    query._callSite = new Error();
  }

  cluster._getConnection(clusterNode, function (err, conn) {
    var retry = err &amp;&amp; cluster._canRetry
      &amp;&amp; cluster._findNodeIds(namespace._pattern).length !== 0;

    if (retry) {
      namespace.query(query);
      return;
    }

    if (err) {
      query.on('error', function () {});
      query.end(err);
      return;
    }

    // Release connection based off event
    query.once('end', function() {
      conn.release();
    });

    conn.query(query);
  });

  return query;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  user     : 'me',
  password : 'secret',
  database : 'my_db'
});

connection.connect();

connection.<span class="apidocCodeKeywordSpan">query</span>('SELECT 1 + 1 AS solution', function (error, results, fields
) {
  if (error) throw error;
  console.log('The solution is: ', results[0].solution);
});

connection.end();
```
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql.PoolSelector" id="apidoc.module.mysql.PoolSelector">module mysql.PoolSelector</a></h1>


    <h2>
        <a href="#apidoc.element.mysql.PoolSelector.ORDER" id="apidoc.element.mysql.PoolSelector.ORDER">
        function <span class="apidocSignatureSpan">mysql.PoolSelector.</span>ORDER
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function PoolSelectorOrder() {
  return function(clusterIds) {
    return clusterIds[0];
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.PoolSelector.RANDOM" id="apidoc.element.mysql.PoolSelector.RANDOM">
        function <span class="apidocSignatureSpan">mysql.PoolSelector.</span>RANDOM
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function PoolSelectorRandom() {
  return function(clusterIds) {
    return clusterIds[Math.floor(Math.random() * clusterIds.length)];
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.PoolSelector.RR" id="apidoc.element.mysql.PoolSelector.RR">
        function <span class="apidocSignatureSpan">mysql.PoolSelector.</span>RR
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function PoolSelectorRoundRobin() {
  var index = 0;

  return function(clusterIds) {
    if (index &gt;= clusterIds.length) {
      index = 0;
    }

    var clusterId = clusterIds[index++];

    return clusterId;
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql.Protocol" id="apidoc.module.mysql.Protocol">module mysql.Protocol</a></h1>


    <h2>
        <a href="#apidoc.element.mysql.Protocol.Protocol" id="apidoc.element.mysql.Protocol.Protocol">
        function <span class="apidocSignatureSpan">mysql.</span>Protocol
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Protocol(options) {
  Stream.call(this);

  options = options || {};

  this.readable = true;
  this.writable = true;

  this._config                        = options.config || {};
  this._connection                    = options.connection;
  this._callback                      = null;
  this._fatalError                    = null;
  this._quitSequence                  = null;
  this._handshakeSequence             = null;
  this._handshaked                    = false;
  this._ended                         = false;
  this._destroyed                     = false;
  this._queue                         = [];
  this._handshakeInitializationPacket = null;

  this._parser = new Parser({
    onError  : this.handleParserError.bind(this),
    onPacket : this._parsePacket.bind(this),
    config   : this._config
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Protocol.super_" id="apidoc.element.mysql.Protocol.super_">
        function <span class="apidocSignatureSpan">mysql.Protocol.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Stream() {
  EE.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql.Protocol.prototype" id="apidoc.module.mysql.Protocol.prototype">module mysql.Protocol.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mysql.Protocol.prototype._debugPacket" id="apidoc.element.mysql.Protocol.prototype._debugPacket">
        function <span class="apidocSignatureSpan">mysql.Protocol.prototype.</span>_debugPacket
        <span class="apidocSignatureSpan">(incoming, packet)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_debugPacket = function (incoming, packet) {
  var headline = (incoming)
    ? '&lt;-- '
    : '--&gt; ';

  headline = headline + packet.constructor.name;

  // check for debug packet restriction
  if (Array.isArray(this._config.debug) &amp;&amp; this._config.debug.indexOf(packet.constructor.name) === -1) {
    return;
  }

  console.log(headline);
  console.log(packet);
  console.log('');
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var packetName = Packet.name;

// Special case: Faster dispatch, and parsing done inside sequence
if (Packet === Packets.RowDataPacket) {
  sequence.RowDataPacket(packet, this._parser, this._connection);

  if (this._config.debug) {
    this.<span class="apidocCodeKeywordSpan">_debugPacket</span>(true, packet);
  }

  return;
}

if (this._config.debug) {
  this._parsePacketDebug(packet);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Protocol.prototype._delegateError" id="apidoc.element.mysql.Protocol.prototype._delegateError">
        function <span class="apidocSignatureSpan">mysql.Protocol.prototype.</span>_delegateError
        <span class="apidocSignatureSpan">(err, sequence)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_delegateError = function (err, sequence) {
  // Stop delegating errors after the first fatal error
  if (this._fatalError) {
    return;
  }

  if (err.fatal) {
    this._fatalError = err;
  }

  if (this._shouldErrorBubbleUp(err, sequence)) {
    // Can't use regular 'error' event here as that always destroys the pipe
    // between socket and protocol which is not what we want (unless the
    // exception was fatal).
    this.emit('unhandledError', err);
  } else if (err.fatal) {
    // Send fatal error to all sequences in the queue
    var queue = this._queue;
    process.nextTick(function () {
      queue.forEach(function (sequence) {
        sequence.end(err);
      });
      queue.length = 0;
    });
  }

  // Make sure the stream we are piping to is getting closed
  if (err.fatal) {
    this.emit('end', err);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  return;
}

var err = new Error('Connection lost: The server closed the connection.');
err.fatal = true;
err.code = 'PROTOCOL_CONNECTION_LOST';

this.<span class="apidocCodeKeywordSpan">_delegateError</span>(err);
};

Protocol.prototype.pause = function() {
this._parser.pause();
// Since there is a file stream in query, we must transmit pause/resume event to current sequence.
var seq = this._queue[0];
if (seq &amp;&amp; seq.emit) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Protocol.prototype._dequeue" id="apidoc.element.mysql.Protocol.prototype._dequeue">
        function <span class="apidocSignatureSpan">mysql.Protocol.prototype.</span>_dequeue
        <span class="apidocSignatureSpan">(sequence)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_dequeue = function (sequence) {
  Timers.unenroll(sequence);

  // No point in advancing the queue, we are dead
  if (this._fatalError) {
    return;
  }

  this._queue.shift();

  var sequence = this._queue[0];
  if (!sequence) {
    this.emit('drain');
    return;
  }

  this._parser.resetPacketNumber();

  this._startSequence(sequence);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
self._delegateError(err, sequence);
    })
    .on('packet', function(packet) {
Timers.active(sequence);
self._emitPacket(packet);
    })
    .on('end', function() {
self.<span class="apidocCodeKeywordSpan">_dequeue</span>(sequence);
    })
    .on('timeout', function() {
var err = new Error(sequence.constructor.name + ' inactivity timeout');

err.code    = 'PROTOCOL_SEQUENCE_TIMEOUT';
err.fatal   = true;
err.timeout = sequence._timeout;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Protocol.prototype._determinePacket" id="apidoc.element.mysql.Protocol.prototype._determinePacket">
        function <span class="apidocSignatureSpan">mysql.Protocol.prototype.</span>_determinePacket
        <span class="apidocSignatureSpan">(sequence)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_determinePacket = function (sequence) {
  var firstByte = this._parser.peak();

  if (sequence.determinePacket) {
    var Packet = sequence.determinePacket(firstByte, this._parser);
    if (Packet) {
      return Packet;
    }
  }

  switch (firstByte) {
    case 0x00:
      if (!this._handshaked) {
        this._handshaked = true;
        this.emit('handshake', this._handshakeInitializationPacket);
      }
      return Packets.OkPacket;
    case 0xfe: return Packets.EofPacket;
    case 0xff: return Packets.ErrorPacket;
  }

  throw new Error('Could not determine packet, firstByte = ' + firstByte);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  err.code  = 'PROTOCOL_STRAY_PACKET';
  err.fatal = true;

  this._delegateError(err);
  return;
}

var Packet     = this.<span class="apidocCodeKeywordSpan">_determinePacket</span>(sequence);
var packet     = new Packet({protocol41: this._config.protocol41});
var packetName = Packet.name;

// Special case: Faster dispatch, and parsing done inside sequence
if (Packet === Packets.RowDataPacket) {
  sequence.RowDataPacket(packet, this._parser, this._connection);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Protocol.prototype._emitPacket" id="apidoc.element.mysql.Protocol.prototype._emitPacket">
        function <span class="apidocSignatureSpan">mysql.Protocol.prototype.</span>_emitPacket
        <span class="apidocSignatureSpan">(packet)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_emitPacket = function (packet) {
  var packetWriter = new PacketWriter();
  packet.write(packetWriter);
  this.emit('data', packetWriter.toBuffer(this._parser));

  if (this._config.debug) {
    this._debugPacket(false, packet);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var self = this;
sequence
  .on('error', function(err) {
    self._delegateError(err, sequence);
  })
  .on('packet', function(packet) {
    Timers.active(sequence);
    self.<span class="apidocCodeKeywordSpan">_emitPacket</span>(packet);
  })
  .on('end', function() {
    self._dequeue(sequence);
  })
  .on('timeout', function() {
    var err = new Error(sequence.constructor.name + ' inactivity timeout');
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Protocol.prototype._enqueue" id="apidoc.element.mysql.Protocol.prototype._enqueue">
        function <span class="apidocSignatureSpan">mysql.Protocol.prototype.</span>_enqueue
        <span class="apidocSignatureSpan">(sequence)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_enqueue = function (sequence) {
  if (!this._validateEnqueue(sequence)) {
    return sequence;
  }

  if (this._config.trace) {
    // Long stack trace support
    sequence._callSite = sequence._callSite || new Error();
  }

  this._queue.push(sequence);
  this.emit('enqueue', sequence);

  var self = this;
  sequence
    .on('error', function(err) {
      self._delegateError(err, sequence);
    })
    .on('packet', function(packet) {
      Timers.active(sequence);
      self._emitPacket(packet);
    })
    .on('end', function() {
      self._dequeue(sequence);
    })
    .on('timeout', function() {
      var err = new Error(sequence.constructor.name + ' inactivity timeout');

      err.code    = 'PROTOCOL_SEQUENCE_TIMEOUT';
      err.fatal   = true;
      err.timeout = sequence._timeout;

      self._delegateError(err, sequence);
    })
    .on('start-tls', function() {
      Timers.active(sequence);
      self._connection._startTLS(function(err) {
        if (err) {
          // SSL negotiation error are fatal
          err.code  = 'HANDSHAKE_SSL_ERROR';
          err.fatal = true;
          sequence.end(err);
          return;
        }

        Timers.active(sequence);
        sequence._tlsUpgradeCompleteHandler();
      });
    });

  if (this._queue.length === 1) {
    this._parser.resetPacketNumber();
    this._startSequence(sequence);
  }

  return sequence;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

if (query.sql) {
  query.sql = this.format(query.sql, query.values);
}

this._implyConnect();

return this._protocol.<span class="apidocCodeKeywordSpan">_enqueue</span>(query);
};

Connection.prototype.ping = function ping(options, callback) {
if (!callback &amp;&amp; typeof options === 'function') {
  callback = options;
  options = {};
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Protocol.prototype._hasPendingErrorHandlers" id="apidoc.element.mysql.Protocol.prototype._hasPendingErrorHandlers">
        function <span class="apidocSignatureSpan">mysql.Protocol.prototype.</span>_hasPendingErrorHandlers
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_hasPendingErrorHandlers = function () {
  return this._queue.some(function(sequence) {
    return sequence.hasErrorHandler();
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    if (sequence.hasErrorHandler()) {
      return false;
    } else if (!err.fatal) {
      return true;
    }
  }

  return (err.fatal &amp;&amp; !this.<span class="apidocCodeKeywordSpan">_hasPendingErrorHandlers</span>());
};

Protocol.prototype._hasPendingErrorHandlers = function() {
  return this._queue.some(function(sequence) {
    return sequence.hasErrorHandler();
  });
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Protocol.prototype._parsePacket" id="apidoc.element.mysql.Protocol.prototype._parsePacket">
        function <span class="apidocSignatureSpan">mysql.Protocol.prototype.</span>_parsePacket
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_parsePacket = function () {
  var sequence = this._queue[0];

  if (!sequence) {
    var err   = new Error('Received packet with no active sequence.');
    err.code  = 'PROTOCOL_STRAY_PACKET';
    err.fatal = true;

    this._delegateError(err);
    return;
  }

  var Packet     = this._determinePacket(sequence);
  var packet     = new Packet({protocol41: this._config.protocol41});
  var packetName = Packet.name;

  // Special case: Faster dispatch, and parsing done inside sequence
  if (Packet === Packets.RowDataPacket) {
    sequence.RowDataPacket(packet, this._parser, this._connection);

    if (this._config.debug) {
      this._debugPacket(true, packet);
    }

    return;
  }

  if (this._config.debug) {
    this._parsePacketDebug(packet);
  } else {
    packet.parse(this._parser);
  }

  if (Packet === Packets.HandshakeInitializationPacket) {
    this._handshakeInitializationPacket = packet;
  }

  Timers.active(sequence);

  if (!sequence[packetName]) {
    var err   = new Error('Received packet in the wrong sequence.');
    err.code  = 'PROTOCOL_INCORRECT_PACKET_SEQUENCE';
    err.fatal = true;

    this._delegateError(err);
    return;
  }

  sequence[packetName](packet);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Protocol.prototype._parsePacketDebug" id="apidoc.element.mysql.Protocol.prototype._parsePacketDebug">
        function <span class="apidocSignatureSpan">mysql.Protocol.prototype.</span>_parsePacketDebug
        <span class="apidocSignatureSpan">(packet)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _parsePacketDebug(packet) {
  try {
    packet.parse(this._parser);
  } finally {
    this._debugPacket(true, packet);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    this._debugPacket(true, packet);
  }

  return;
}

if (this._config.debug) {
  this.<span class="apidocCodeKeywordSpan">_parsePacketDebug</span>(packet);
} else {
  packet.parse(this._parser);
}

if (Packet === Packets.HandshakeInitializationPacket) {
  this._handshakeInitializationPacket = packet;
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Protocol.prototype._shouldErrorBubbleUp" id="apidoc.element.mysql.Protocol.prototype._shouldErrorBubbleUp">
        function <span class="apidocSignatureSpan">mysql.Protocol.prototype.</span>_shouldErrorBubbleUp
        <span class="apidocSignatureSpan">(err, sequence)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_shouldErrorBubbleUp = function (err, sequence) {
  if (sequence) {
    if (sequence.hasErrorHandler()) {
      return false;
    } else if (!err.fatal) {
      return true;
    }
  }

  return (err.fatal &amp;&amp; !this._hasPendingErrorHandlers());
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  return;
}

if (err.fatal) {
  this._fatalError = err;
}

if (this.<span class="apidocCodeKeywordSpan">_shouldErrorBubbleUp</span>(err, sequence)) {
  // Can't use regular 'error' event here as that always destroys the pipe
  // between socket and protocol which is not what we want (unless the
  // exception was fatal).
  this.emit('unhandledError', err);
} else if (err.fatal) {
  // Send fatal error to all sequences in the queue
  var queue = this._queue;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Protocol.prototype._startSequence" id="apidoc.element.mysql.Protocol.prototype._startSequence">
        function <span class="apidocSignatureSpan">mysql.Protocol.prototype.</span>_startSequence
        <span class="apidocSignatureSpan">(sequence)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_startSequence = function (sequence) {
  if (sequence._timeout &gt; 0 &amp;&amp; isFinite(sequence._timeout)) {
    Timers.enroll(sequence, sequence._timeout);
    Timers.active(sequence);
  }

  if (sequence.constructor === Sequences.ChangeUser) {
    sequence.start(this._handshakeInitializationPacket);
  } else {
    sequence.start();
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      Timers.active(sequence);
      sequence._tlsUpgradeCompleteHandler();
    });
  });

if (this._queue.length === 1) {
  this._parser.resetPacketNumber();
  this.<span class="apidocCodeKeywordSpan">_startSequence</span>(sequence);
}

return sequence;
};

Protocol.prototype._validateEnqueue = function _validateEnqueue(sequence) {
var err;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Protocol.prototype._validateEnqueue" id="apidoc.element.mysql.Protocol.prototype._validateEnqueue">
        function <span class="apidocSignatureSpan">mysql.Protocol.prototype.</span>_validateEnqueue
        <span class="apidocSignatureSpan">(sequence)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _validateEnqueue(sequence) {
  var err;
  var prefix = 'Cannot enqueue ' + sequence.constructor.name;
  var prefixBefore = prefix + ' before ';
  var prefixAfter = prefix + ' after ';

  if (this._fatalError) {
    err      = new Error(prefixAfter + 'fatal error.');
    err.code = 'PROTOCOL_ENQUEUE_AFTER_FATAL_ERROR';
  } else if (this._quitSequence) {
    err      = new Error(prefixAfter + 'invoking quit.');
    err.code = 'PROTOCOL_ENQUEUE_AFTER_QUIT';
  } else if (this._destroyed) {
    err      = new Error(prefixAfter + 'being destroyed.');
    err.code = 'PROTOCOL_ENQUEUE_AFTER_DESTROY';
  } else if (this._handshakeSequence &amp;&amp; sequence.constructor === Sequences.Handshake) {
    err      = new Error(prefixAfter + 'already enqueuing a Handshake.');
    err.code = 'PROTOCOL_ENQUEUE_HANDSHAKE_TWICE';
  } else if (!this._handshakeSequence &amp;&amp; sequence.constructor === Sequences.ChangeUser) {
    err      = new Error(prefixBefore + 'a Handshake.');
    err.code = 'PROTOCOL_ENQUEUE_BEFORE_HANDSHAKE';
  } else {
    return true;
  }

  var self  = this;
  err.fatal = false;

  // add error handler
  sequence.on('error', function (err) {
    self._delegateError(err, sequence);
  });

  process.nextTick(function () {
    sequence.end(err);
  });

  return false;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var seq = this._queue[0];
if (seq &amp;&amp; seq.emit) {
  seq.emit('resume');
}
};

Protocol.prototype._enqueue = function(sequence) {
if (!this.<span class="apidocCodeKeywordSpan">_validateEnqueue</span>(sequence)) {
  return sequence;
}

if (this._config.trace) {
  // Long stack trace support
  sequence._callSite = sequence._callSite || new Error();
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Protocol.prototype.changeUser" id="apidoc.element.mysql.Protocol.prototype.changeUser">
        function <span class="apidocSignatureSpan">mysql.Protocol.prototype.</span>changeUser
        <span class="apidocSignatureSpan">(options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function changeUser(options, callback) {
  return this._enqueue(new Sequences.ChangeUser(options, callback));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

## Switching users and altering connection state

MySQL offers a changeUser command that allows you to alter the current user and
other aspects of the connection without shutting down the underlying socket:

```js
connection.<span class="apidocCodeKeywordSpan">changeUser</span>({user : 'john'}, function(err) {
  if (err) throw err;
});
```

The available options for this feature are:

* `user`: The name of the new user (defaults to the previous one).
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Protocol.prototype.destroy" id="apidoc.element.mysql.Protocol.prototype.destroy">
        function <span class="apidocSignatureSpan">mysql.Protocol.prototype.</span>destroy
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">destroy = function () {
  this._destroyed = true;
  this._parser.pause();

  if (this._connection.state !== 'disconnected') {
    if(!this._ended) {
      this.end();
    }
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

An alternative way to end the connection is to call the `destroy()` method.
This will cause an immediate termination of the underlying socket.
Additionally `destroy()` guarantees that no more events or callbacks will be
triggered for the connection.

```js
connection.<span class="apidocCodeKeywordSpan">destroy</span>();
```

Unlike `end()` the `destroy()` method does not take a callback argument.

## Pooling connections

Rather than creating and managing connections one-by-one, this module also
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Protocol.prototype.end" id="apidoc.element.mysql.Protocol.prototype.end">
        function <span class="apidocSignatureSpan">mysql.Protocol.prototype.</span>end
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">end = function () {
  if(this._ended) {
    return;
  }
  this._ended = true;

  if (this._quitSequence &amp;&amp; (this._quitSequence._ended || this._queue[0] === this._quitSequence)) {
    this._quitSequence.end();
    this.emit('end');
    return;
  }

  var err = new Error('Connection lost: The server closed the connection.');
  err.fatal = true;
  err.code = 'PROTOCOL_CONNECTION_LOST';

  this._delegateError(err);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
connection.connect();

connection.query('SELECT 1 + 1 AS solution', function (error, results, fields) {
if (error) throw error;
console.log('The solution is: ', results[0].solution);
});

connection.<span class="apidocCodeKeywordSpan">end</span>();
```

From this example, you can learn the following:

* Every method you invoke on a connection is queued and executed in sequence.
* Closing the connection is done using `end()` which makes sure all remaining
queries are executed before sending a quit packet to the mysql server.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Protocol.prototype.handleNetworkError" id="apidoc.element.mysql.Protocol.prototype.handleNetworkError">
        function <span class="apidocSignatureSpan">mysql.Protocol.prototype.</span>handleNetworkError
        <span class="apidocSignatureSpan">(err)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">handleNetworkError = function (err) {
  err.fatal = true;

  var sequence = this._queue[0];
  if (sequence) {
    sequence.end(err);
  } else {
    this._delegateError(err);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  err.code = 'ETIMEDOUT';
  err.syscall = 'connect';

  this._handleNetworkError(err);
};

Connection.prototype._handleNetworkError = function(err) {
  this._protocol.<span class="apidocCodeKeywordSpan">handleNetworkError</span>(err);
};

Connection.prototype._handleProtocolError = function(err) {
  this.state = 'protocol_error';
  this.emit('error', err);
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Protocol.prototype.handleParserError" id="apidoc.element.mysql.Protocol.prototype.handleParserError">
        function <span class="apidocSignatureSpan">mysql.Protocol.prototype.</span>handleParserError
        <span class="apidocSignatureSpan">(err)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function handleParserError(err) {
  var sequence = this._queue[0];
  if (sequence) {
    sequence.end(err);
  } else {
    this._delegateError(err);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Protocol.prototype.handshake" id="apidoc.element.mysql.Protocol.prototype.handshake">
        function <span class="apidocSignatureSpan">mysql.Protocol.prototype.</span>handshake
        <span class="apidocSignatureSpan">(options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function handshake(options, callback) {
  if (typeof options === 'function') {
    callback = options;
    options = {};
  }

  options = options || {};
  options.config = this._config;

  return this._handshakeSequence = this._enqueue(new Sequences.Handshake(options, callback));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    this._socket.setTimeout(this.config.connectTimeout, handleConnectTimeout);
    this._socket.once('connect', function() {
      this.setTimeout(0, handleConnectTimeout);
    });
  }
}

this._protocol.<span class="apidocCodeKeywordSpan">handshake</span>(options, bindToCurrentDomain(callback));
};

Connection.prototype.changeUser = function changeUser(options, callback) {
if (!callback &amp;&amp; typeof options === 'function') {
  callback = options;
  options = {};
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Protocol.prototype.pause" id="apidoc.element.mysql.Protocol.prototype.pause">
        function <span class="apidocSignatureSpan">mysql.Protocol.prototype.</span>pause
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">pause = function () {
  this._parser.pause();
  // Since there is a file stream in query, we must transmit pause/resume event to current sequence.
  var seq = this._queue[0];
  if (seq &amp;&amp; seq.emit) {
    seq.emit('pause');
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  // Handle error, an 'end' event will be emitted after this as well
})
.on('fields', function(fields) {
  // the field packets for the rows to follow
})
.on('result', function(row) {
  // Pausing the connnection is useful if your processing involves I/O
  connection.<span class="apidocCodeKeywordSpan">pause</span>();

  processRow(row, function() {
    connection.resume();
  });
})
.on('end', function() {
  // all rows have been received
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Protocol.prototype.ping" id="apidoc.element.mysql.Protocol.prototype.ping">
        function <span class="apidocSignatureSpan">mysql.Protocol.prototype.</span>ping
        <span class="apidocSignatureSpan">(options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ping(options, callback) {
  if (typeof options === 'function') {
    callback = options;
    options = {};
  }

  return this._enqueue(new Sequences.Ping(options, callback));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
## Ping

A ping packet can be sent over a connection using the `connection.ping` method. This
method will send a ping packet to the server and when the server responds, the callback
will fire. If an error occurred, the callback will fire with an error argument.

```js
connection.<span class="apidocCodeKeywordSpan">ping</span>(function (err) {
  if (err) throw err;
  console.log('Server responded to ping');
})
```

## Timeouts
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Protocol.prototype.query" id="apidoc.element.mysql.Protocol.prototype.query">
        function <span class="apidocSignatureSpan">mysql.Protocol.prototype.</span>query
        <span class="apidocSignatureSpan">(options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function query(options, callback) {
  return this._enqueue(new Sequences.Query(options, callback));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  user     : 'me',
  password : 'secret',
  database : 'my_db'
});

connection.connect();

connection.<span class="apidocCodeKeywordSpan">query</span>('SELECT 1 + 1 AS solution', function (error, results, fields
) {
  if (error) throw error;
  console.log('The solution is: ', results[0].solution);
});

connection.end();
```
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Protocol.prototype.quit" id="apidoc.element.mysql.Protocol.prototype.quit">
        function <span class="apidocSignatureSpan">mysql.Protocol.prototype.</span>quit
        <span class="apidocSignatureSpan">(options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function quit(options, callback) {
  if (typeof options === 'function') {
    callback = options;
    options = {};
  }

  var self     = this;
  var sequence = this._enqueue(new Sequences.Quit(options, callback));

  sequence.on('end', function () {
    self.end();
  });

  return this._quitSequence = sequence;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

if (opts.timeout === undefined) {
  // default timeout of 30 seconds
  opts.timeout = 30000;
}

this._implyConnect();
this._protocol.<span class="apidocCodeKeywordSpan">quit</span>(opts, bindToCurrentDomain(cb));
};

Connection.prototype.destroy = function() {
this.state = 'disconnected';
this._implyConnect();
this._socket.destroy();
this._protocol.destroy();
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Protocol.prototype.resume" id="apidoc.element.mysql.Protocol.prototype.resume">
        function <span class="apidocSignatureSpan">mysql.Protocol.prototype.</span>resume
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">resume = function () {
  this._parser.resume();
  // Since there is a file stream in query, we must transmit pause/resume event to current sequence.
  var seq = this._queue[0];
  if (seq &amp;&amp; seq.emit) {
    seq.emit('resume');
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    // the field packets for the rows to follow
  })
  .on('result', function(row) {
    // Pausing the connnection is useful if your processing involves I/O
    connection.pause();

    processRow(row, function() {
      connection.<span class="apidocCodeKeywordSpan">resume</span>();
    });
  })
  .on('end', function() {
    // all rows have been received
  });
```
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Protocol.prototype.stats" id="apidoc.element.mysql.Protocol.prototype.stats">
        function <span class="apidocSignatureSpan">mysql.Protocol.prototype.</span>stats
        <span class="apidocSignatureSpan">(options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function stats(options, callback) {
  if (typeof options === 'function') {
    callback = options;
    options = {};
  }

  return this._enqueue(new Sequences.Statistics(options, callback));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
Connection.prototype.statistics = function statistics(options, callback) {
if (!callback &amp;&amp; typeof options === 'function') {
  callback = options;
  options = {};
}

this._implyConnect();
this._protocol.<span class="apidocCodeKeywordSpan">stats</span>(options, bindToCurrentDomain(callback));
};

Connection.prototype.end = function end(options, callback) {
var cb   = callback;
var opts = options;

if (!callback &amp;&amp; typeof options === 'function') {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Protocol.prototype.write" id="apidoc.element.mysql.Protocol.prototype.write">
        function <span class="apidocSignatureSpan">mysql.Protocol.prototype.</span>write
        <span class="apidocSignatureSpan">(buffer)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">write = function (buffer) {
  this._parser.write(buffer);
  return true;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// Connect socket to connection domain
if (Events.usingDomains) {
  this._socket.domain = this.domain;
}

var connection = this;
this._protocol.on('data', function(data) {
  connection._socket.<span class="apidocCodeKeywordSpan">write</span>(data);
});
this._socket.on('data', function(data) {
  connection._protocol.write(data);
});
this._protocol.on('end', function() {
  connection._socket.end();
});
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql.SqlString" id="apidoc.module.mysql.SqlString">module mysql.SqlString</a></h1>


    <h2>
        <a href="#apidoc.element.mysql.SqlString.arrayToList" id="apidoc.element.mysql.SqlString.arrayToList">
        function <span class="apidocSignatureSpan">mysql.SqlString.</span>arrayToList
        <span class="apidocSignatureSpan">(array, timeZone)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function arrayToList(array, timeZone) {
  var sql = '';

  for (var i = 0; i &lt; array.length; i++) {
    var val = array[i];

    if (Array.isArray(val)) {
      sql += (i === 0 ? '' : ', ') + '(' + SqlString.arrayToList(val, timeZone) + ')';
    } else {
      sql += (i === 0 ? '' : ', ') + SqlString.escape(val, true, timeZone);
    }
  }

  return sql;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.SqlString.bufferToString" id="apidoc.element.mysql.SqlString.bufferToString">
        function <span class="apidocSignatureSpan">mysql.SqlString.</span>bufferToString
        <span class="apidocSignatureSpan">(buffer)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function bufferToString(buffer) {
  return "X" + escapeString(buffer.toString('hex'));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.SqlString.dateToString" id="apidoc.element.mysql.SqlString.dateToString">
        function <span class="apidocSignatureSpan">mysql.SqlString.</span>dateToString
        <span class="apidocSignatureSpan">(date, timeZone)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function dateToString(date, timeZone) {
  var dt = new Date(date);

  if (isNaN(dt.getTime())) {
    return 'NULL';
  }

  var year;
  var month;
  var day;
  var hour;
  var minute;
  var second;
  var millisecond;

  if (timeZone === 'local') {
    year        = dt.getFullYear();
    month       = dt.getMonth() + 1;
    day         = dt.getDate();
    hour        = dt.getHours();
    minute      = dt.getMinutes();
    second      = dt.getSeconds();
    millisecond = dt.getMilliseconds();
  } else {
    var tz = convertTimezone(timeZone);

    if (tz !== false &amp;&amp; tz !== 0) {
      dt.setTime(dt.getTime() + (tz * 60000));
    }

    year       = dt.getUTCFullYear();
    month       = dt.getUTCMonth() + 1;
    day         = dt.getUTCDate();
    hour        = dt.getUTCHours();
    minute      = dt.getUTCMinutes();
    second      = dt.getUTCSeconds();
    millisecond = dt.getUTCMilliseconds();
  }

  // YYYY-MM-DD HH:mm:ss.mmm
  var str = zeroPad(year, 4) + '-' + zeroPad(month, 2) + '-' + zeroPad(day, 2) + ' ' +
    zeroPad(hour, 2) + ':' + zeroPad(minute, 2) + ':' + zeroPad(second, 2) + '.' +
    zeroPad(millisecond, 3);

  return escapeString(str);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.SqlString.escape" id="apidoc.element.mysql.SqlString.escape">
        function <span class="apidocSignatureSpan">mysql.SqlString.</span>escape
        <span class="apidocSignatureSpan">(val, stringifyObjects, timeZone)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function escape(val, stringifyObjects, timeZone) {
  if (val === undefined || val === null) {
    return 'NULL';
  }

  switch (typeof val) {
    case 'boolean': return (val) ? 'true' : 'false';
    case 'number': return val+'';
    case 'object':
      if (val instanceof Date) {
        return SqlString.dateToString(val, timeZone || 'local');
      } else if (Array.isArray(val)) {
        return SqlString.arrayToList(val, timeZone);
      } else if (Buffer.isBuffer(val)) {
        return SqlString.bufferToString(val);
      } else if (stringifyObjects) {
        return escapeString(val.toString());
      } else {
        return SqlString.objectToValues(val, timeZone);
      }
    default: return escapeString(val);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
);
```

## Escaping query values

In order to avoid SQL Injection attacks, you should always escape any user
provided data before using it inside a SQL query. You can do so using the
`mysql.<span class="apidocCodeKeywordSpan">escape</span>()`, `connection.escape()` or `pool.escape()` methods:

```js
var userId = 'some user provided value';
var sql    = 'SELECT * FROM users WHERE id = ' + connection.escape(userId);
connection.query(sql, function (error, results, fields) {
if (error) throw error;
// ...
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.SqlString.escapeId" id="apidoc.element.mysql.SqlString.escapeId">
        function <span class="apidocSignatureSpan">mysql.SqlString.</span>escapeId
        <span class="apidocSignatureSpan">(val, forbidQualified)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function escapeId(val, forbidQualified) {
  if (Array.isArray(val)) {
    var sql = '';

    for (var i = 0; i &lt; val.length; i++) {
      sql += (i === 0 ? '' : ', ') + SqlString.escapeId(val[i], forbidQualified);
    }

    return sql;
  }

  if (forbidQualified) {
    return '`' + String(val).replace(/`/g, '``') + '`';
  }

  return '`' + String(val).replace(/`/g, '``').replace(/\./g, '`.`') + '`';
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

console.log(query); // SELECT * FROM posts WHERE title='Hello MySQL'
```

## Escaping query identifiers

If you can't trust an SQL identifier (database / table / column name) because it is
provided by a user, you should escape it with `mysql.<span class="apidocCodeKeywordSpan">escapeId</span>(identifier)`,
`connection.escapeId(identifier)` or `pool.escapeId(identifier)` like this:

```js
var sorter = 'date';
var sql    = 'SELECT * FROM posts ORDER BY ' + connection.escapeId(sorter);
connection.query(sql, function (error, results, fields) {
if (error) throw error;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.SqlString.format" id="apidoc.element.mysql.SqlString.format">
        function <span class="apidocSignatureSpan">mysql.SqlString.</span>format
        <span class="apidocSignatureSpan">(sql, values, stringifyObjects, timeZone)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function format(sql, values, stringifyObjects, timeZone) {
  if (values == null) {
    return sql;
  }

  if (!(values instanceof Array || Array.isArray(values))) {
    values = [values];
  }

  var chunkIndex        = 0;
  var placeholdersRegex = /\?\??/g;
  var result            = '';
  var valuesIndex       = 0;
  var match;

  while (valuesIndex &lt; values.length &amp;&amp; (match = placeholdersRegex.exec(sql))) {
    var value = match[0] === '??'
        ? SqlString.escapeId(values[valuesIndex])
        : SqlString.escape(values[valuesIndex], stringifyObjects, timeZone);

    result += sql.slice(chunkIndex, match.index) + value;
    chunkIndex = placeholdersRegex.lastIndex;
    valuesIndex++;
  }

  if (chunkIndex === 0) {
    // Nothing was replaced
    return sql;
  }

  if (chunkIndex &lt; sql.length) {
    return result + sql.slice(chunkIndex);
  }

  return result;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
### Preparing Queries

You can use mysql.format to prepare a query with multiple insertion points, utilizing the proper escaping for ids and values. A
simple example of this follows:

```js
var sql = "SELECT * FROM ?? WHERE ?? = ?";
var inserts = ['users', 'id', userId];
sql = mysql.<span class="apidocCodeKeywordSpan">format</span>(sql, inserts);
```

Following this you then have a valid, escaped query that you can then send to the database safely. This is useful if you are looking
 to prepare the query before actually sending it to the database. As mysql.format is exposed from SqlString.format you also have
 the option (but are not required) to pass in stringifyObject and timezone, allowing you provide a custom means of turning objects
 into strings, as well as a location-specific/timezone-aware Date.

### Custom format

If you prefer to have another type of query escape format, there's a connection configuration option you can use to define
a custom format function. You can access the connection object if you want to use the built-in `.escape()` or any other connection
 function.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.SqlString.objectToValues" id="apidoc.element.mysql.SqlString.objectToValues">
        function <span class="apidocSignatureSpan">mysql.SqlString.</span>objectToValues
        <span class="apidocSignatureSpan">(object, timeZone)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function objectToValues(object, timeZone) {
  var sql = '';

  for (var key in object) {
    var val = object[key];

    if (typeof val === 'function') {
      continue;
    }

    sql += (sql.length === 0 ? '' : ', ') + SqlString.escapeId(key) + ' = ' + SqlString.escape(val, true, timeZone);
  }

  return sql;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
</body></html>