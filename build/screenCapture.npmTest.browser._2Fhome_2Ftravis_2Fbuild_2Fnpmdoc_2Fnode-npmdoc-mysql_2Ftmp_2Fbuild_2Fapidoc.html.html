<html><head></head><body><div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a href="https://github.com/mysqljs/mysql#readme">mysql (v2.13.0)</a>
</h1>
<h4>A node.js driver for mysql. It is written in JavaScript, does not require compiling, and is 100% MIT licensed.</h4>
<div class="apidocSectionDiv"><a href="#apidoc.tableOfContents" id="apidoc.tableOfContents"><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql">module mysql</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Connection">
            function <span class="apidocSignatureSpan">mysql.</span>Connection
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.ConnectionConfig">
            function <span class="apidocSignatureSpan">mysql.</span>ConnectionConfig
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Pool">
            function <span class="apidocSignatureSpan">mysql.</span>Pool
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PoolCluster">
            function <span class="apidocSignatureSpan">mysql.</span>PoolCluster
            <span class="apidocSignatureSpan">(config)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PoolConfig">
            function <span class="apidocSignatureSpan">mysql.</span>PoolConfig
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PoolConnection">
            function <span class="apidocSignatureSpan">mysql.</span>PoolConnection
            <span class="apidocSignatureSpan">(pool, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PoolNamespace">
            function <span class="apidocSignatureSpan">mysql.</span>PoolNamespace
            <span class="apidocSignatureSpan">(cluster, pattern, selector)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.createConnection">
            function <span class="apidocSignatureSpan">mysql.</span>createConnection
            <span class="apidocSignatureSpan">(config)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.createPool">
            function <span class="apidocSignatureSpan">mysql.</span>createPool
            <span class="apidocSignatureSpan">(config)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.createPoolCluster">
            function <span class="apidocSignatureSpan">mysql.</span>createPoolCluster
            <span class="apidocSignatureSpan">(config)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.createQuery">
            function <span class="apidocSignatureSpan">mysql.</span>createQuery
            <span class="apidocSignatureSpan">(sql, values, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.escape">
            function <span class="apidocSignatureSpan">mysql.</span>escape
            <span class="apidocSignatureSpan">(value, stringifyObjects, timeZone)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.escapeId">
            function <span class="apidocSignatureSpan">mysql.</span>escapeId
            <span class="apidocSignatureSpan">(value, forbidQualified)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.format">
            function <span class="apidocSignatureSpan">mysql.</span>format
            <span class="apidocSignatureSpan">(sql, values, stringifyObjects, timeZone)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mysql.</span>Connection.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mysql.</span>Pool.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mysql.</span>PoolCluster.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mysql.</span>PoolConfig.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mysql.</span>PoolConnection.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mysql.</span>PoolNamespace.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mysql.</span>PoolSelector</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql.Connection">module mysql.Connection</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Connection.Connection">
            function <span class="apidocSignatureSpan">mysql.</span>Connection
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Connection.createQuery">
            function <span class="apidocSignatureSpan">mysql.Connection.</span>createQuery
            <span class="apidocSignatureSpan">(sql, values, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Connection.super_">
            function <span class="apidocSignatureSpan">mysql.Connection.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql.Connection.prototype">module mysql.Connection.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Connection.prototype._handleConnectTimeout">
            function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>_handleConnectTimeout
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Connection.prototype._handleNetworkError">
            function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>_handleNetworkError
            <span class="apidocSignatureSpan">(err)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Connection.prototype._handleProtocolConnect">
            function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>_handleProtocolConnect
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Connection.prototype._handleProtocolDrain">
            function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>_handleProtocolDrain
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Connection.prototype._handleProtocolEnd">
            function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>_handleProtocolEnd
            <span class="apidocSignatureSpan">(err)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Connection.prototype._handleProtocolEnqueue">
            function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>_handleProtocolEnqueue
            <span class="apidocSignatureSpan">(sequence)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Connection.prototype._handleProtocolError">
            function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>_handleProtocolError
            <span class="apidocSignatureSpan">(err)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Connection.prototype._handleProtocolHandshake">
            function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>_handleProtocolHandshake
            <span class="apidocSignatureSpan">(packet)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Connection.prototype._implyConnect">
            function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>_implyConnect
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Connection.prototype._startTLS">
            function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>_startTLS
            <span class="apidocSignatureSpan">(onSecure)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Connection.prototype.beginTransaction">
            function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>beginTransaction
            <span class="apidocSignatureSpan">(options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Connection.prototype.changeUser">
            function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>changeUser
            <span class="apidocSignatureSpan">(options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Connection.prototype.commit">
            function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>commit
            <span class="apidocSignatureSpan">(options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Connection.prototype.connect">
            function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>connect
            <span class="apidocSignatureSpan">(options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Connection.prototype.destroy">
            function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>destroy
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Connection.prototype.end">
            function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>end
            <span class="apidocSignatureSpan">(options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Connection.prototype.escape">
            function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>escape
            <span class="apidocSignatureSpan">(value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Connection.prototype.escapeId">
            function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>escapeId
            <span class="apidocSignatureSpan">(value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Connection.prototype.format">
            function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>format
            <span class="apidocSignatureSpan">(sql, values)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Connection.prototype.pause">
            function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>pause
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Connection.prototype.ping">
            function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>ping
            <span class="apidocSignatureSpan">(options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Connection.prototype.query">
            function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>query
            <span class="apidocSignatureSpan">(sql, values, cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Connection.prototype.resume">
            function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>resume
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Connection.prototype.rollback">
            function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>rollback
            <span class="apidocSignatureSpan">(options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Connection.prototype.statistics">
            function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>statistics
            <span class="apidocSignatureSpan">(options, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql.ConnectionConfig">module mysql.ConnectionConfig</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.ConnectionConfig.ConnectionConfig">
            function <span class="apidocSignatureSpan">mysql.</span>ConnectionConfig
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.ConnectionConfig.getCharsetNumber">
            function <span class="apidocSignatureSpan">mysql.ConnectionConfig.</span>getCharsetNumber
            <span class="apidocSignatureSpan">(charset)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.ConnectionConfig.getDefaultFlags">
            function <span class="apidocSignatureSpan">mysql.ConnectionConfig.</span>getDefaultFlags
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.ConnectionConfig.getSSLProfile">
            function <span class="apidocSignatureSpan">mysql.ConnectionConfig.</span>getSSLProfile
            <span class="apidocSignatureSpan">(name)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.ConnectionConfig.mergeFlags">
            function <span class="apidocSignatureSpan">mysql.ConnectionConfig.</span>mergeFlags
            <span class="apidocSignatureSpan">(defaultFlags, userFlags)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.ConnectionConfig.parseFlagList">
            function <span class="apidocSignatureSpan">mysql.ConnectionConfig.</span>parseFlagList
            <span class="apidocSignatureSpan">(flagList)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.ConnectionConfig.parseUrl">
            function <span class="apidocSignatureSpan">mysql.ConnectionConfig.</span>parseUrl
            <span class="apidocSignatureSpan">(url)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql.Pool">module mysql.Pool</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Pool.Pool">
            function <span class="apidocSignatureSpan">mysql.</span>Pool
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Pool.super_">
            function <span class="apidocSignatureSpan">mysql.Pool.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql.Pool.prototype">module mysql.Pool.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Pool.prototype._enqueueCallback">
            function <span class="apidocSignatureSpan">mysql.Pool.prototype.</span>_enqueueCallback
            <span class="apidocSignatureSpan">(callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Pool.prototype._needsChangeUser">
            function <span class="apidocSignatureSpan">mysql.Pool.prototype.</span>_needsChangeUser
            <span class="apidocSignatureSpan">(connection)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Pool.prototype._purgeConnection">
            function <span class="apidocSignatureSpan">mysql.Pool.prototype.</span>_purgeConnection
            <span class="apidocSignatureSpan">(connection, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Pool.prototype._removeConnection">
            function <span class="apidocSignatureSpan">mysql.Pool.prototype.</span>_removeConnection
            <span class="apidocSignatureSpan">(connection)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Pool.prototype.acquireConnection">
            function <span class="apidocSignatureSpan">mysql.Pool.prototype.</span>acquireConnection
            <span class="apidocSignatureSpan">(connection, cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Pool.prototype.end">
            function <span class="apidocSignatureSpan">mysql.Pool.prototype.</span>end
            <span class="apidocSignatureSpan">(cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Pool.prototype.escape">
            function <span class="apidocSignatureSpan">mysql.Pool.prototype.</span>escape
            <span class="apidocSignatureSpan">(value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Pool.prototype.escapeId">
            function <span class="apidocSignatureSpan">mysql.Pool.prototype.</span>escapeId
            <span class="apidocSignatureSpan">(value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Pool.prototype.getConnection">
            function <span class="apidocSignatureSpan">mysql.Pool.prototype.</span>getConnection
            <span class="apidocSignatureSpan">(cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Pool.prototype.query">
            function <span class="apidocSignatureSpan">mysql.Pool.prototype.</span>query
            <span class="apidocSignatureSpan">(sql, values, cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.Pool.prototype.releaseConnection">
            function <span class="apidocSignatureSpan">mysql.Pool.prototype.</span>releaseConnection
            <span class="apidocSignatureSpan">(connection)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql.PoolCluster">module mysql.PoolCluster</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PoolCluster.PoolCluster">
            function <span class="apidocSignatureSpan">mysql.</span>PoolCluster
            <span class="apidocSignatureSpan">(config)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PoolCluster.super_">
            function <span class="apidocSignatureSpan">mysql.PoolCluster.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql.PoolCluster.prototype">module mysql.PoolCluster.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PoolCluster.prototype._clearFindCaches">
            function <span class="apidocSignatureSpan">mysql.PoolCluster.prototype.</span>_clearFindCaches
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PoolCluster.prototype._decreaseErrorCount">
            function <span class="apidocSignatureSpan">mysql.PoolCluster.prototype.</span>_decreaseErrorCount
            <span class="apidocSignatureSpan">(node)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PoolCluster.prototype._findNodeIds">
            function <span class="apidocSignatureSpan">mysql.PoolCluster.prototype.</span>_findNodeIds
            <span class="apidocSignatureSpan">(pattern, includeOffline)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PoolCluster.prototype._getConnection">
            function <span class="apidocSignatureSpan">mysql.PoolCluster.prototype.</span>_getConnection
            <span class="apidocSignatureSpan">(node, cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PoolCluster.prototype._getNode">
            function <span class="apidocSignatureSpan">mysql.PoolCluster.prototype.</span>_getNode
            <span class="apidocSignatureSpan">(id)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PoolCluster.prototype._increaseErrorCount">
            function <span class="apidocSignatureSpan">mysql.PoolCluster.prototype.</span>_increaseErrorCount
            <span class="apidocSignatureSpan">(node)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PoolCluster.prototype._removeNode">
            function <span class="apidocSignatureSpan">mysql.PoolCluster.prototype.</span>_removeNode
            <span class="apidocSignatureSpan">(node)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PoolCluster.prototype.add">
            function <span class="apidocSignatureSpan">mysql.PoolCluster.prototype.</span>add
            <span class="apidocSignatureSpan">(id, config)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PoolCluster.prototype.end">
            function <span class="apidocSignatureSpan">mysql.PoolCluster.prototype.</span>end
            <span class="apidocSignatureSpan">(callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PoolCluster.prototype.getConnection">
            function <span class="apidocSignatureSpan">mysql.PoolCluster.prototype.</span>getConnection
            <span class="apidocSignatureSpan">(pattern, selector, cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PoolCluster.prototype.of">
            function <span class="apidocSignatureSpan">mysql.PoolCluster.prototype.</span>of
            <span class="apidocSignatureSpan">(pattern, selector)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PoolCluster.prototype.remove">
            function <span class="apidocSignatureSpan">mysql.PoolCluster.prototype.</span>remove
            <span class="apidocSignatureSpan">(pattern)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql.PoolConfig">module mysql.PoolConfig</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PoolConfig.PoolConfig">
            function <span class="apidocSignatureSpan">mysql.</span>PoolConfig
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql.PoolConfig.prototype">module mysql.PoolConfig.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PoolConfig.prototype.newConnectionConfig">
            function <span class="apidocSignatureSpan">mysql.PoolConfig.prototype.</span>newConnectionConfig
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql.PoolConnection">module mysql.PoolConnection</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PoolConnection.PoolConnection">
            function <span class="apidocSignatureSpan">mysql.</span>PoolConnection
            <span class="apidocSignatureSpan">(pool, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PoolConnection.super_">
            function <span class="apidocSignatureSpan">mysql.PoolConnection.</span>super_
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql.PoolConnection.prototype">module mysql.PoolConnection.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PoolConnection.prototype._realEnd">
            function <span class="apidocSignatureSpan">mysql.PoolConnection.prototype.</span>_realEnd
            <span class="apidocSignatureSpan">(options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PoolConnection.prototype._removeFromPool">
            function <span class="apidocSignatureSpan">mysql.PoolConnection.prototype.</span>_removeFromPool
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PoolConnection.prototype.destroy">
            function <span class="apidocSignatureSpan">mysql.PoolConnection.prototype.</span>destroy
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PoolConnection.prototype.end">
            function <span class="apidocSignatureSpan">mysql.PoolConnection.prototype.</span>end
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PoolConnection.prototype.release">
            function <span class="apidocSignatureSpan">mysql.PoolConnection.prototype.</span>release
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql.PoolNamespace">module mysql.PoolNamespace</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PoolNamespace.PoolNamespace">
            function <span class="apidocSignatureSpan">mysql.</span>PoolNamespace
            <span class="apidocSignatureSpan">(cluster, pattern, selector)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql.PoolNamespace.prototype">module mysql.PoolNamespace.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PoolNamespace.prototype._getClusterNode">
            function <span class="apidocSignatureSpan">mysql.PoolNamespace.prototype.</span>_getClusterNode
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PoolNamespace.prototype.getConnection">
            function <span class="apidocSignatureSpan">mysql.PoolNamespace.prototype.</span>getConnection
            <span class="apidocSignatureSpan">(cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PoolNamespace.prototype.query">
            function <span class="apidocSignatureSpan">mysql.PoolNamespace.prototype.</span>query
            <span class="apidocSignatureSpan">(sql, values, cb)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql.PoolSelector">module mysql.PoolSelector</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PoolSelector.ORDER">
            function <span class="apidocSignatureSpan">mysql.PoolSelector.</span>ORDER
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PoolSelector.RANDOM">
            function <span class="apidocSignatureSpan">mysql.PoolSelector.</span>RANDOM
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql.PoolSelector.RR">
            function <span class="apidocSignatureSpan">mysql.PoolSelector.</span>RR
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql" id="apidoc.module.mysql">module mysql</a></h1>


    <h2>
        <a href="#apidoc.element.mysql.Connection" id="apidoc.element.mysql.Connection">
        function <span class="apidocSignatureSpan">mysql.</span>Connection
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Connection(options) {
  Events.EventEmitter.call(this);

  this.config = options.config;

  this._socket        = options.socket;
  this._protocol      = new Protocol({config: this.config, connection: this});
  this._connectCalled = false;
  this.state          = 'disconnected';
  this.threadId       = null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.ConnectionConfig" id="apidoc.element.mysql.ConnectionConfig">
        function <span class="apidocSignatureSpan">mysql.</span>ConnectionConfig
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ConnectionConfig(options) {
  if (typeof options === 'string') {
    options = ConnectionConfig.parseUrl(options);
  }

  this.host               = options.host || 'localhost';
  this.port               = options.port || 3306;
  this.localAddress       = options.localAddress;
  this.socketPath         = options.socketPath;
  this.user               = options.user || undefined;
  this.password           = options.password || undefined;
  this.database           = options.database;
  this.connectTimeout     = (options.connectTimeout === undefined)
    ? (10 * 1000)
    : options.connectTimeout;
  this.insecureAuth       = options.insecureAuth || false;
  this.supportBigNumbers  = options.supportBigNumbers || false;
  this.bigNumberStrings   = options.bigNumberStrings || false;
  this.dateStrings        = options.dateStrings || false;
  this.debug              = options.debug;
  this.trace              = options.trace !== false;
  this.stringifyObjects   = options.stringifyObjects || false;
  this.timezone           = options.timezone || 'local';
  this.flags              = options.flags || '';
  this.queryFormat        = options.queryFormat;
  this.pool               = options.pool || undefined;
  this.ssl                = (typeof options.ssl === 'string')
    ? ConnectionConfig.getSSLProfile(options.ssl)
    : (options.ssl || false);
  this.multipleStatements = options.multipleStatements || false;
  this.typeCast           = (options.typeCast === undefined)
    ? true
    : options.typeCast;

  if (this.timezone[0] === ' ') {
    // "+" is a url encoded char for space so it
    // gets translated to space when giving a
    // connection string..
    this.timezone = '+' + this.timezone.substr(1);
  }

  if (this.ssl) {
    // Default rejectUnauthorized to true
    this.ssl.rejectUnauthorized = this.ssl.rejectUnauthorized !== false;
  }

  this.maxPacketSize = 0;
  this.charsetNumber = (options.charset)
    ? ConnectionConfig.getCharsetNumber(options.charset)
    : options.charsetNumber || Charsets.UTF8_GENERAL_CI;

  // Set the client flags
  var defaultFlags = ConnectionConfig.getDefaultFlags(options);
  this.clientFlags = ConnectionConfig.mergeFlags(defaultFlags, options.flags);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Pool" id="apidoc.element.mysql.Pool">
        function <span class="apidocSignatureSpan">mysql.</span>Pool
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Pool(options) {
  EventEmitter.call(this);
  this.config = options.config;
  this.config.connectionConfig.pool = this;

  this._acquiringConnections = [];
  this._allConnections       = [];
  this._freeConnections      = [];
  this._connectionQueue      = [];
  this._closed               = false;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.PoolCluster" id="apidoc.element.mysql.PoolCluster">
        function <span class="apidocSignatureSpan">mysql.</span>PoolCluster
        <span class="apidocSignatureSpan">(config)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function PoolCluster(config) {
  EventEmitter.call(this);

  config = config || {};
  this._canRetry = typeof config.canRetry === 'undefined' ? true : config.canRetry;
  this._defaultSelector = config.defaultSelector || 'RR';
  this._removeNodeErrorCount = config.removeNodeErrorCount || 5;
  this._restoreNodeTimeout = config.restoreNodeTimeout || 0;

  this._closed = false;
  this._findCaches = Object.create(null);
  this._lastId = 0;
  this._namespaces = Object.create(null);
  this._nodes = Object.create(null);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.PoolConfig" id="apidoc.element.mysql.PoolConfig">
        function <span class="apidocSignatureSpan">mysql.</span>PoolConfig
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function PoolConfig(options) {
  if (typeof options === 'string') {
    options = ConnectionConfig.parseUrl(options);
  }

  this.acquireTimeout     = (options.acquireTimeout === undefined)
    ? 10 * 1000
    : Number(options.acquireTimeout);
  this.connectionConfig   = new ConnectionConfig(options);
  this.waitForConnections = (options.waitForConnections === undefined)
    ? true
    : Boolean(options.waitForConnections);
  this.connectionLimit    = (options.connectionLimit === undefined)
    ? 10
    : Number(options.connectionLimit);
  this.queueLimit         = (options.queueLimit === undefined)
    ? 0
    : Number(options.queueLimit);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.PoolConnection" id="apidoc.element.mysql.PoolConnection">
        function <span class="apidocSignatureSpan">mysql.</span>PoolConnection
        <span class="apidocSignatureSpan">(pool, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function PoolConnection(pool, options) {
  Connection.call(this, options);
  this._pool  = pool;

  // Bind connection to pool domain
  if (Events.usingDomains) {
    this.domain = pool.domain;
  }

  // When a fatal error occurs the connection's protocol ends, which will cause
  // the connection to end as well, thus we only need to watch for the end event
  // and we will be notified of disconnects.
  this.on('end', this._removeFromPool);
  this.on('error', function (err) {
    if (err.fatal) {
      this._removeFromPool();
    }
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.PoolNamespace" id="apidoc.element.mysql.PoolNamespace">
        function <span class="apidocSignatureSpan">mysql.</span>PoolNamespace
        <span class="apidocSignatureSpan">(cluster, pattern, selector)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function PoolNamespace(cluster, pattern, selector) {
  this._cluster = cluster;
  this._pattern = pattern;
  this._selector = new PoolSelector[selector]();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.createConnection" id="apidoc.element.mysql.createConnection">
        function <span class="apidocSignatureSpan">mysql.</span>createConnection
        <span class="apidocSignatureSpan">(config)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function createConnection(config) {
  var Connection       = loadClass('Connection');
  var ConnectionConfig = loadClass('ConnectionConfig');

  return new Connection({config: new ConnectionConfig(config)});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
This is a node.js driver for mysql. It is written in JavaScript, does not
require compiling, and is 100% MIT licensed.

Here is an example on how to use it:

```js
var mysql      = require('mysql');
var connection = mysql.<span class="apidocCodeKeywordSpan">createConnection</span>({
  host     : 'localhost',
  user     : 'me',
  password : 'secret',
  database : 'my_db'
});

connection.connect();
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.createPool" id="apidoc.element.mysql.createPool">
        function <span class="apidocSignatureSpan">mysql.</span>createPool
        <span class="apidocSignatureSpan">(config)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function createPool(config) {
  var Pool       = loadClass('Pool');
  var PoolConfig = loadClass('PoolConfig');

  return new Pool({config: new PoolConfig(config)});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
```

Unlike `end()` the `destroy()` method does not take a callback argument.

## Pooling connections

Rather than creating and managing connections one-by-one, this module also
provides built-in connection pooling using `mysql.<span class="apidocCodeKeywordSpan">createPool</span>(config)`.
[Read more about connection pooling](https://en.wikipedia.org/wiki/Connection_pool).

Use pool directly.
```js
var mysql = require('mysql');
var pool  = mysql.createPool({
connectionLimit : 10,
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.createPoolCluster" id="apidoc.element.mysql.createPoolCluster">
        function <span class="apidocSignatureSpan">mysql.</span>createPoolCluster
        <span class="apidocSignatureSpan">(config)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function createPoolCluster(config) {
  var PoolCluster = loadClass('PoolCluster');

  return new PoolCluster(config);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

## PoolCluster

PoolCluster provides multiple hosts connection. (group &amp; retry &amp; selector)

```js
// create
var poolCluster = mysql.<span class="apidocCodeKeywordSpan">createPoolCluster</span>();

// add configurations (the config is a pool config object)
poolCluster.add(config); // add configuration with automatic name
poolCluster.add('MASTER', masterConfig); // add a named configuration
poolCluster.add('SLAVE1', slave1Config);
poolCluster.add('SLAVE2', slave2Config);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.createQuery" id="apidoc.element.mysql.createQuery">
        function <span class="apidocSignatureSpan">mysql.</span>createQuery
        <span class="apidocSignatureSpan">(sql, values, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function createQuery(sql, values, callback) {
  var Connection = loadClass('Connection');

  return Connection.createQuery(sql, values, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* @param {function} [callback] The callback to use when query is complete
* @return {Query} New query object
* @public
*/
exports.createQuery = function createQuery(sql, values, callback) {
 var Connection = loadClass('Connection');

 return Connection.<span class="apidocCodeKeywordSpan">createQuery</span>(sql, values, callback);
};

/**
* Escape a value for SQL.
* @param {*} value The value to escape
* @param {boolean} [stringifyObjects=false] Setting if objects should be stringified
* @param {string} [timeZone=local] Setting for time zone to use for Date conversion
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.escape" id="apidoc.element.mysql.escape">
        function <span class="apidocSignatureSpan">mysql.</span>escape
        <span class="apidocSignatureSpan">(value, stringifyObjects, timeZone)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function escape(value, stringifyObjects, timeZone) {
  var SqlString = loadClass('SqlString');

  return SqlString.escape(value, stringifyObjects, timeZone);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
);
```

## Escaping query values

In order to avoid SQL Injection attacks, you should always escape any user
provided data before using it inside a SQL query. You can do so using the
`mysql.<span class="apidocCodeKeywordSpan">escape</span>()`, `connection.escape()` or `pool.escape()` methods:

```js
var userId = 'some user provided value';
var sql    = 'SELECT * FROM users WHERE id = ' + connection.escape(userId);
connection.query(sql, function (error, results, fields) {
if (error) throw error;
// ...
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.escapeId" id="apidoc.element.mysql.escapeId">
        function <span class="apidocSignatureSpan">mysql.</span>escapeId
        <span class="apidocSignatureSpan">(value, forbidQualified)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function escapeId(value, forbidQualified) {
  var SqlString = loadClass('SqlString');

  return SqlString.escapeId(value, forbidQualified);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

console.log(query); // SELECT * FROM posts WHERE title='Hello MySQL'
```

## Escaping query identifiers

If you can't trust an SQL identifier (database / table / column name) because it is
provided by a user, you should escape it with `mysql.<span class="apidocCodeKeywordSpan">escapeId</span>(identifier)`,
`connection.escapeId(identifier)` or `pool.escapeId(identifier)` like this:

```js
var sorter = 'date';
var sql    = 'SELECT * FROM posts ORDER BY ' + connection.escapeId(sorter);
connection.query(sql, function (error, results, fields) {
if (error) throw error;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.format" id="apidoc.element.mysql.format">
        function <span class="apidocSignatureSpan">mysql.</span>format
        <span class="apidocSignatureSpan">(sql, values, stringifyObjects, timeZone)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function format(sql, values, stringifyObjects, timeZone) {
  var SqlString = loadClass('SqlString');

  return SqlString.format(sql, values, stringifyObjects, timeZone);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
### Preparing Queries

You can use mysql.format to prepare a query with multiple insertion points, utilizing the proper escaping for ids and values. A
simple example of this follows:

```js
var sql = "SELECT * FROM ?? WHERE ?? = ?";
var inserts = ['users', 'id', userId];
sql = mysql.<span class="apidocCodeKeywordSpan">format</span>(sql, inserts);
```

Following this you then have a valid, escaped query that you can then send to the database safely. This is useful if you are looking
 to prepare the query before actually sending it to the database. As mysql.format is exposed from SqlString.format you also have
 the option (but are not required) to pass in stringifyObject and timezone, allowing you provide a custom means of turning objects
 into strings, as well as a location-specific/timezone-aware Date.

### Custom format

If you prefer to have another type of query escape format, there's a connection configuration option you can use to define
a custom format function. You can access the connection object if you want to use the built-in `.escape()` or any other connection
 function.
...</pre></li>
    </ul>
















</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql.Connection" id="apidoc.module.mysql.Connection">module mysql.Connection</a></h1>


    <h2>
        <a href="#apidoc.element.mysql.Connection.Connection" id="apidoc.element.mysql.Connection.Connection">
        function <span class="apidocSignatureSpan">mysql.</span>Connection
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Connection(options) {
  Events.EventEmitter.call(this);

  this.config = options.config;

  this._socket        = options.socket;
  this._protocol      = new Protocol({config: this.config, connection: this});
  this._connectCalled = false;
  this.state          = 'disconnected';
  this.threadId       = null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Connection.createQuery" id="apidoc.element.mysql.Connection.createQuery">
        function <span class="apidocSignatureSpan">mysql.Connection.</span>createQuery
        <span class="apidocSignatureSpan">(sql, values, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function createQuery(sql, values, callback) {
  if (sql instanceof Query) {
    return sql;
  }

  var cb      = bindToCurrentDomain(callback);
  var options = {};

  if (typeof sql === 'function') {
    cb = bindToCurrentDomain(sql);
    return new Query(options, cb);
  }

  if (typeof sql === 'object') {
    for (var prop in sql) {
      options[prop] = sql[prop];
    }

    if (typeof values === 'function') {
      cb = bindToCurrentDomain(values);
    } else if (values !== undefined) {
      options.values = values;
    }

    return new Query(options, cb);
  }

  options.sql    = sql;
  options.values = values;

  if (typeof values === 'function') {
    cb = bindToCurrentDomain(values);
    options.values = undefined;
  }

  if (cb === undefined &amp;&amp; callback !== undefined) {
    throw new TypeError('argument callback must be a function when provided');
  }

  return new Query(options, cb);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* @param {function} [callback] The callback to use when query is complete
* @return {Query} New query object
* @public
*/
exports.createQuery = function createQuery(sql, values, callback) {
 var Connection = loadClass('Connection');

 return Connection.<span class="apidocCodeKeywordSpan">createQuery</span>(sql, values, callback);
};

/**
* Escape a value for SQL.
* @param {*} value The value to escape
* @param {boolean} [stringifyObjects=false] Setting if objects should be stringified
* @param {string} [timeZone=local] Setting for time zone to use for Date conversion
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Connection.super_" id="apidoc.element.mysql.Connection.super_">
        function <span class="apidocSignatureSpan">mysql.Connection.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function EventEmitter() {
  EventEmitter.init.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql.Connection.prototype" id="apidoc.module.mysql.Connection.prototype">module mysql.Connection.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mysql.Connection.prototype._handleConnectTimeout" id="apidoc.element.mysql.Connection.prototype._handleConnectTimeout">
        function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>_handleConnectTimeout
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_handleConnectTimeout = function () {
  if (this._socket) {
    this._socket.setTimeout(0);
    this._socket.destroy();
  }

  var err = new Error('connect ETIMEDOUT');
  err.errorno = 'ETIMEDOUT';
  err.code = 'ETIMEDOUT';
  err.syscall = 'connect';

  this._handleNetworkError(err);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Connection.prototype._handleNetworkError" id="apidoc.element.mysql.Connection.prototype._handleNetworkError">
        function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>_handleNetworkError
        <span class="apidocSignatureSpan">(err)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_handleNetworkError = function (err) {
  this._protocol.handleNetworkError(err);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  secureContext      : secureContext,
  isServer           : false
});

// error handler for secure socket
secureSocket.on('_tlsError', function(err) {
  if (secureEstablished) {
    connection.<span class="apidocCodeKeywordSpan">_handleNetworkError</span>(err);
  } else {
    onSecure(err);
  }
});

// cleartext &lt;-&gt; protocol
secureSocket.pipe(this._protocol);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Connection.prototype._handleProtocolConnect" id="apidoc.element.mysql.Connection.prototype._handleProtocolConnect">
        function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>_handleProtocolConnect
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_handleProtocolConnect = function () {
  this.state = 'connected';
  this.emit('connect');
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Connection.prototype._handleProtocolDrain" id="apidoc.element.mysql.Connection.prototype._handleProtocolDrain">
        function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>_handleProtocolDrain
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_handleProtocolDrain = function () {
  this.emit('drain');
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Connection.prototype._handleProtocolEnd" id="apidoc.element.mysql.Connection.prototype._handleProtocolEnd">
        function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>_handleProtocolEnd
        <span class="apidocSignatureSpan">(err)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_handleProtocolEnd = function (err) {
  this.state = 'disconnected';
  this.emit('end', err);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Connection.prototype._handleProtocolEnqueue" id="apidoc.element.mysql.Connection.prototype._handleProtocolEnqueue">
        function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>_handleProtocolEnqueue
        <span class="apidocSignatureSpan">(sequence)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _handleProtocolEnqueue(sequence) {
  this.emit('enqueue', sequence);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Connection.prototype._handleProtocolError" id="apidoc.element.mysql.Connection.prototype._handleProtocolError">
        function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>_handleProtocolError
        <span class="apidocSignatureSpan">(err)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_handleProtocolError = function (err) {
  this.state = 'protocol_error';
  this.emit('error', err);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Connection.prototype._handleProtocolHandshake" id="apidoc.element.mysql.Connection.prototype._handleProtocolHandshake">
        function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>_handleProtocolHandshake
        <span class="apidocSignatureSpan">(packet)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _handleProtocolHandshake(packet) {
  this.state    = 'authenticated';
  this.threadId = packet.threadId;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Connection.prototype._implyConnect" id="apidoc.element.mysql.Connection.prototype._implyConnect">
        function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>_implyConnect
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_implyConnect = function () {
  if (!this._connectCalled) {
    this.connect();
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

Connection.prototype.changeUser = function changeUser(options, callback) {
if (!callback &amp;&amp; typeof options === 'function') {
  callback = options;
  options = {};
}

this.<span class="apidocCodeKeywordSpan">_implyConnect</span>();

var charsetNumber = (options.charset)
  ? ConnectionConfig.getCharsetNumber(options.charset)
  : this.config.charsetNumber;

return this._protocol.changeUser({
  user          : options.user || this.config.user,
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Connection.prototype._startTLS" id="apidoc.element.mysql.Connection.prototype._startTLS">
        function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>_startTLS
        <span class="apidocSignatureSpan">(onSecure)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _startTLS(onSecure) {
  var connection    = this;
  var secureContext = tls.createSecureContext({
    ca         : this.config.ssl.ca,
    cert       : this.config.ssl.cert,
    ciphers    : this.config.ssl.ciphers,
    key        : this.config.ssl.key,
    passphrase : this.config.ssl.passphrase
  });

  // "unpipe"
  this._socket.removeAllListeners('data');
  this._protocol.removeAllListeners('data');

  // socket &lt;-&gt; encrypted
  var rejectUnauthorized = this.config.ssl.rejectUnauthorized;
  var secureEstablished  = false;
  var secureSocket       = new tls.TLSSocket(this._socket, {
    rejectUnauthorized : rejectUnauthorized,
    requestCert        : true,
    secureContext      : secureContext,
    isServer           : false
  });

  // error handler for secure socket
  secureSocket.on('_tlsError', function(err) {
    if (secureEstablished) {
      connection._handleNetworkError(err);
    } else {
      onSecure(err);
    }
  });

  // cleartext &lt;-&gt; protocol
  secureSocket.pipe(this._protocol);
  this._protocol.on('data', function(data) {
    secureSocket.write(data);
  });

  secureSocket.on('secure', function() {
    secureEstablished = true;

    onSecure(rejectUnauthorized ? this.ssl.verifyError() : null);
  });

  // start TLS communications
  secureSocket._start();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Connection.prototype.beginTransaction" id="apidoc.element.mysql.Connection.prototype.beginTransaction">
        function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>beginTransaction
        <span class="apidocSignatureSpan">(options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function beginTransaction(options, callback) {
  if (!callback &amp;&amp; typeof options === 'function') {
    callback = options;
    options = {};
  }

  options = options || {};
  options.sql = 'START TRANSACTION';
  options.values = null;

  return this.query(options, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
```

## Transactions

Simple transaction support is available at the connection level:

```js
connection.<span class="apidocCodeKeywordSpan">beginTransaction</span>(function(err) {
if (err) { throw err; }
connection.query('INSERT INTO posts SET title=?', title, function (error, results, fields) {
  if (error) {
    return connection.rollback(function() {
      throw error;
    });
  }
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Connection.prototype.changeUser" id="apidoc.element.mysql.Connection.prototype.changeUser">
        function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>changeUser
        <span class="apidocSignatureSpan">(options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function changeUser(options, callback) {
  if (!callback &amp;&amp; typeof options === 'function') {
    callback = options;
    options = {};
  }

  this._implyConnect();

  var charsetNumber = (options.charset)
    ? ConnectionConfig.getCharsetNumber(options.charset)
    : this.config.charsetNumber;

  return this._protocol.changeUser({
    user          : options.user || this.config.user,
    password      : options.password || this.config.password,
    database      : options.database || this.config.database,
    timeout       : options.timeout,
    charsetNumber : charsetNumber,
    currentConfig : this.config
  }, bindToCurrentDomain(callback));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

## Switching users and altering connection state

MySQL offers a changeUser command that allows you to alter the current user and
other aspects of the connection without shutting down the underlying socket:

```js
connection.<span class="apidocCodeKeywordSpan">changeUser</span>({user : 'john'}, function(err) {
  if (err) throw err;
});
```

The available options for this feature are:

* `user`: The name of the new user (defaults to the previous one).
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Connection.prototype.commit" id="apidoc.element.mysql.Connection.prototype.commit">
        function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>commit
        <span class="apidocSignatureSpan">(options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function commit(options, callback) {
  if (!callback &amp;&amp; typeof options === 'function') {
    callback = options;
    options = {};
  }

  options = options || {};
  options.sql = 'COMMIT';
  options.values = null;

  return this.query(options, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

    connection.query('INSERT INTO log SET data=?', log, function (error, results, fields) {
if (error) {
  return connection.rollback(function() {
    throw error;
  });
}
connection.<span class="apidocCodeKeywordSpan">commit</span>(function(err) {
  if (err) {
    return connection.rollback(function() {
      throw err;
    });
  }
  console.log('success!');
});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Connection.prototype.connect" id="apidoc.element.mysql.Connection.prototype.connect">
        function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>connect
        <span class="apidocSignatureSpan">(options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function connect(options, callback) {
  if (!callback &amp;&amp; typeof options === 'function') {
    callback = options;
    options = {};
  }

  if (!this._connectCalled) {
    this._connectCalled = true;

    // Connect either via a UNIX domain socket or a TCP socket.
    this._socket = (this.config.socketPath)
      ? Net.createConnection(this.config.socketPath)
      : Net.createConnection(this.config.port, this.config.host);

    // Connect socket to connection domain
    if (Events.usingDomains) {
      this._socket.domain = this.domain;
    }

    var connection = this;
    this._protocol.on('data', function(data) {
      connection._socket.write(data);
    });
    this._socket.on('data', function(data) {
      connection._protocol.write(data);
    });
    this._protocol.on('end', function() {
      connection._socket.end();
    });
    this._socket.on('end', function() {
      connection._protocol.end();
    });

    this._socket.on('error', this._handleNetworkError.bind(this));
    this._socket.on('connect', this._handleProtocolConnect.bind(this));
    this._protocol.on('handshake', this._handleProtocolHandshake.bind(this));
    this._protocol.on('unhandledError', this._handleProtocolError.bind(this));
    this._protocol.on('drain', this._handleProtocolDrain.bind(this));
    this._protocol.on('end', this._handleProtocolEnd.bind(this));
    this._protocol.on('enqueue', this._handleProtocolEnqueue.bind(this));

    if (this.config.connectTimeout) {
      var handleConnectTimeout = this._handleConnectTimeout.bind(this);

      this._socket.setTimeout(this.config.connectTimeout, handleConnectTimeout);
      this._socket.once('connect', function() {
        this.setTimeout(0, handleConnectTimeout);
      });
    }
  }

  this._protocol.handshake(options, bindToCurrentDomain(callback));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var connection = mysql.createConnection({
  host     : 'localhost',
  user     : 'me',
  password : 'secret',
  database : 'my_db'
});

connection.<span class="apidocCodeKeywordSpan">connect</span>();

connection.query('SELECT 1 + 1 AS solution', function (error, results, fields) {
  if (error) throw error;
  console.log('The solution is: ', results[0].solution);
});

connection.end();
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Connection.prototype.destroy" id="apidoc.element.mysql.Connection.prototype.destroy">
        function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>destroy
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">destroy = function () {
  this.state = 'disconnected';
  this._implyConnect();
  this._socket.destroy();
  this._protocol.destroy();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

An alternative way to end the connection is to call the `destroy()` method.
This will cause an immediate termination of the underlying socket.
Additionally `destroy()` guarantees that no more events or callbacks will be
triggered for the connection.

```js
connection.<span class="apidocCodeKeywordSpan">destroy</span>();
```

Unlike `end()` the `destroy()` method does not take a callback argument.

## Pooling connections

Rather than creating and managing connections one-by-one, this module also
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Connection.prototype.end" id="apidoc.element.mysql.Connection.prototype.end">
        function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>end
        <span class="apidocSignatureSpan">(options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function end(options, callback) {
  var cb   = callback;
  var opts = options;

  if (!callback &amp;&amp; typeof options === 'function') {
    cb   = options;
    opts = null;
  }

  // create custom options reference
  opts = Object.create(opts || null);

  if (opts.timeout === undefined) {
    // default timeout of 30 seconds
    opts.timeout = 30000;
  }

  this._implyConnect();
  this._protocol.quit(opts, bindToCurrentDomain(cb));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
connection.connect();

connection.query('SELECT 1 + 1 AS solution', function (error, results, fields) {
if (error) throw error;
console.log('The solution is: ', results[0].solution);
});

connection.<span class="apidocCodeKeywordSpan">end</span>();
```

From this example, you can learn the following:

* Every method you invoke on a connection is queued and executed in sequence.
* Closing the connection is done using `end()` which makes sure all remaining
queries are executed before sending a quit packet to the mysql server.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Connection.prototype.escape" id="apidoc.element.mysql.Connection.prototype.escape">
        function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>escape
        <span class="apidocSignatureSpan">(value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">escape = function (value) {
  return SqlString.escape(value, false, this.config.timezone);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
);
```

## Escaping query values

In order to avoid SQL Injection attacks, you should always escape any user
provided data before using it inside a SQL query. You can do so using the
`mysql.<span class="apidocCodeKeywordSpan">escape</span>()`, `connection.escape()` or `pool.escape()` methods:

```js
var userId = 'some user provided value';
var sql    = 'SELECT * FROM users WHERE id = ' + connection.escape(userId);
connection.query(sql, function (error, results, fields) {
if (error) throw error;
// ...
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Connection.prototype.escapeId" id="apidoc.element.mysql.Connection.prototype.escapeId">
        function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>escapeId
        <span class="apidocSignatureSpan">(value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function escapeId(value) {
  return SqlString.escapeId(value, false);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

console.log(query); // SELECT * FROM posts WHERE title='Hello MySQL'
```

## Escaping query identifiers

If you can't trust an SQL identifier (database / table / column name) because it is
provided by a user, you should escape it with `mysql.<span class="apidocCodeKeywordSpan">escapeId</span>(identifier)`,
`connection.escapeId(identifier)` or `pool.escapeId(identifier)` like this:

```js
var sorter = 'date';
var sql    = 'SELECT * FROM posts ORDER BY ' + connection.escapeId(sorter);
connection.query(sql, function (error, results, fields) {
if (error) throw error;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Connection.prototype.format" id="apidoc.element.mysql.Connection.prototype.format">
        function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>format
        <span class="apidocSignatureSpan">(sql, values)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">format = function (sql, values) {
  if (typeof this.config.queryFormat === 'function') {
    return this.config.queryFormat.call(this, sql, values, this.config.timezone);
  }
  return SqlString.format(sql, values, this.config.stringifyObjects, this.config.timezone);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
### Preparing Queries

You can use mysql.format to prepare a query with multiple insertion points, utilizing the proper escaping for ids and values. A
simple example of this follows:

```js
var sql = "SELECT * FROM ?? WHERE ?? = ?";
var inserts = ['users', 'id', userId];
sql = mysql.<span class="apidocCodeKeywordSpan">format</span>(sql, inserts);
```

Following this you then have a valid, escaped query that you can then send to the database safely. This is useful if you are looking
 to prepare the query before actually sending it to the database. As mysql.format is exposed from SqlString.format you also have
 the option (but are not required) to pass in stringifyObject and timezone, allowing you provide a custom means of turning objects
 into strings, as well as a location-specific/timezone-aware Date.

### Custom format

If you prefer to have another type of query escape format, there's a connection configuration option you can use to define
a custom format function. You can access the connection object if you want to use the built-in `.escape()` or any other connection
 function.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Connection.prototype.pause" id="apidoc.element.mysql.Connection.prototype.pause">
        function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>pause
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">pause = function () {
  this._socket.pause();
  this._protocol.pause();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  // Handle error, an 'end' event will be emitted after this as well
})
.on('fields', function(fields) {
  // the field packets for the rows to follow
})
.on('result', function(row) {
  // Pausing the connnection is useful if your processing involves I/O
  connection.<span class="apidocCodeKeywordSpan">pause</span>();

  processRow(row, function() {
    connection.resume();
  });
})
.on('end', function() {
  // all rows have been received
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Connection.prototype.ping" id="apidoc.element.mysql.Connection.prototype.ping">
        function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>ping
        <span class="apidocSignatureSpan">(options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ping(options, callback) {
  if (!callback &amp;&amp; typeof options === 'function') {
    callback = options;
    options = {};
  }

  this._implyConnect();
  this._protocol.ping(options, bindToCurrentDomain(callback));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
## Ping

A ping packet can be sent over a connection using the `connection.ping` method. This
method will send a ping packet to the server and when the server responds, the callback
will fire. If an error occurred, the callback will fire with an error argument.

```js
connection.<span class="apidocCodeKeywordSpan">ping</span>(function (err) {
  if (err) throw err;
  console.log('Server responded to ping');
})
```

## Timeouts
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Connection.prototype.query" id="apidoc.element.mysql.Connection.prototype.query">
        function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>query
        <span class="apidocSignatureSpan">(sql, values, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function query(sql, values, cb) {
  var query = Connection.createQuery(sql, values, cb);
  query._connection = this;

  if (!(typeof sql === 'object' &amp;&amp; 'typeCast' in sql)) {
    query.typeCast = this.config.typeCast;
  }

  if (query.sql) {
    query.sql = this.format(query.sql, query.values);
  }

  this._implyConnect();

  return this._protocol._enqueue(query);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  user     : 'me',
  password : 'secret',
  database : 'my_db'
});

connection.connect();

connection.<span class="apidocCodeKeywordSpan">query</span>('SELECT 1 + 1 AS solution', function (error, results, fields
) {
  if (error) throw error;
  console.log('The solution is: ', results[0].solution);
});

connection.end();
```
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Connection.prototype.resume" id="apidoc.element.mysql.Connection.prototype.resume">
        function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>resume
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">resume = function () {
  this._socket.resume();
  this._protocol.resume();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    // the field packets for the rows to follow
  })
  .on('result', function(row) {
    // Pausing the connnection is useful if your processing involves I/O
    connection.pause();

    processRow(row, function() {
      connection.<span class="apidocCodeKeywordSpan">resume</span>();
    });
  })
  .on('end', function() {
    // all rows have been received
  });
```
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Connection.prototype.rollback" id="apidoc.element.mysql.Connection.prototype.rollback">
        function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>rollback
        <span class="apidocSignatureSpan">(options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function rollback(options, callback) {
  if (!callback &amp;&amp; typeof options === 'function') {
    callback = options;
    options = {};
  }

  options = options || {};
  options.sql = 'ROLLBACK';
  options.values = null;

  return this.query(options, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
Simple transaction support is available at the connection level:

```js
connection.beginTransaction(function(err) {
  if (err) { throw err; }
  connection.query('INSERT INTO posts SET title=?', title, function (error, results, fields) {
if (error) {
  return connection.<span class="apidocCodeKeywordSpan">rollback</span>(function() {
    throw error;
  });
}

var log = 'Post ' + result.insertId + ' added';

connection.query('INSERT INTO log SET data=?', log, function (error, results, fields) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Connection.prototype.statistics" id="apidoc.element.mysql.Connection.prototype.statistics">
        function <span class="apidocSignatureSpan">mysql.Connection.prototype.</span>statistics
        <span class="apidocSignatureSpan">(options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function statistics(options, callback) {
  if (!callback &amp;&amp; typeof options === 'function') {
    callback = options;
    options = {};
  }

  this._implyConnect();
  this._protocol.stats(options, bindToCurrentDomain(callback));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql.ConnectionConfig" id="apidoc.module.mysql.ConnectionConfig">module mysql.ConnectionConfig</a></h1>


    <h2>
        <a href="#apidoc.element.mysql.ConnectionConfig.ConnectionConfig" id="apidoc.element.mysql.ConnectionConfig.ConnectionConfig">
        function <span class="apidocSignatureSpan">mysql.</span>ConnectionConfig
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ConnectionConfig(options) {
  if (typeof options === 'string') {
    options = ConnectionConfig.parseUrl(options);
  }

  this.host               = options.host || 'localhost';
  this.port               = options.port || 3306;
  this.localAddress       = options.localAddress;
  this.socketPath         = options.socketPath;
  this.user               = options.user || undefined;
  this.password           = options.password || undefined;
  this.database           = options.database;
  this.connectTimeout     = (options.connectTimeout === undefined)
    ? (10 * 1000)
    : options.connectTimeout;
  this.insecureAuth       = options.insecureAuth || false;
  this.supportBigNumbers  = options.supportBigNumbers || false;
  this.bigNumberStrings   = options.bigNumberStrings || false;
  this.dateStrings        = options.dateStrings || false;
  this.debug              = options.debug;
  this.trace              = options.trace !== false;
  this.stringifyObjects   = options.stringifyObjects || false;
  this.timezone           = options.timezone || 'local';
  this.flags              = options.flags || '';
  this.queryFormat        = options.queryFormat;
  this.pool               = options.pool || undefined;
  this.ssl                = (typeof options.ssl === 'string')
    ? ConnectionConfig.getSSLProfile(options.ssl)
    : (options.ssl || false);
  this.multipleStatements = options.multipleStatements || false;
  this.typeCast           = (options.typeCast === undefined)
    ? true
    : options.typeCast;

  if (this.timezone[0] === ' ') {
    // "+" is a url encoded char for space so it
    // gets translated to space when giving a
    // connection string..
    this.timezone = '+' + this.timezone.substr(1);
  }

  if (this.ssl) {
    // Default rejectUnauthorized to true
    this.ssl.rejectUnauthorized = this.ssl.rejectUnauthorized !== false;
  }

  this.maxPacketSize = 0;
  this.charsetNumber = (options.charset)
    ? ConnectionConfig.getCharsetNumber(options.charset)
    : options.charsetNumber || Charsets.UTF8_GENERAL_CI;

  // Set the client flags
  var defaultFlags = ConnectionConfig.getDefaultFlags(options);
  this.clientFlags = ConnectionConfig.mergeFlags(defaultFlags, options.flags);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.ConnectionConfig.getCharsetNumber" id="apidoc.element.mysql.ConnectionConfig.getCharsetNumber">
        function <span class="apidocSignatureSpan">mysql.ConnectionConfig.</span>getCharsetNumber
        <span class="apidocSignatureSpan">(charset)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function getCharsetNumber(charset) {
  var num = Charsets[charset.toUpperCase()];

  if (num === undefined) {
    throw new TypeError('Unknown charset \'' + charset + '\'');
  }

  return num;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  callback = options;
  options = {};
}

this._implyConnect();

var charsetNumber = (options.charset)
  ? ConnectionConfig.<span class="apidocCodeKeywordSpan">getCharsetNumber</span>(options.charset)
  : this.config.charsetNumber;

return this._protocol.changeUser({
  user          : options.user || this.config.user,
  password      : options.password || this.config.password,
  database      : options.database || this.config.database,
  timeout       : options.timeout,
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.ConnectionConfig.getDefaultFlags" id="apidoc.element.mysql.ConnectionConfig.getDefaultFlags">
        function <span class="apidocSignatureSpan">mysql.ConnectionConfig.</span>getDefaultFlags
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function getDefaultFlags(options) {
  var defaultFlags = [
    '-COMPRESS',          // Compression protocol *NOT* supported
    '-CONNECT_ATTRS',     // Does *NOT* send connection attributes in Protocol::HandshakeResponse41
    '+CONNECT_WITH_DB',   // One can specify db on connect in Handshake Response Packet
    '+FOUND_ROWS',        // Send found rows instead of affected rows
    '+IGNORE_SIGPIPE',    // Don't issue SIGPIPE if network failures
    '+IGNORE_SPACE',      // Let the parser ignore spaces before '('
    '+LOCAL_FILES',       // Can use LOAD DATA LOCAL
    '+LONG_FLAG',         // Longer flags in Protocol::ColumnDefinition320
    '+LONG_PASSWORD',     // Use the improved version of Old Password Authentication
    '+MULTI_RESULTS',     // Can handle multiple resultsets for COM_QUERY
    '+ODBC',              // Special handling of ODBC behaviour
    '-PLUGIN_AUTH',       // Does *NOT* support auth plugins
    '+PROTOCOL_41',       // Uses the 4.1 protocol
    '+PS_MULTI_RESULTS',  // Can handle multiple resultsets for COM_STMT_EXECUTE
    '+RESERVED',          // Unused
    '+SECURE_CONNECTION', // Supports Authentication::Native41
    '+TRANSACTIONS'       // Expects status flags
  ];

  if (options &amp;&amp; options.multipleStatements) {
    // May send multiple statements per COM_QUERY and COM_STMT_PREPARE
    defaultFlags.push('+MULTI_STATEMENTS');
  }

  return defaultFlags;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

this.maxPacketSize = 0;
this.charsetNumber = (options.charset)
  ? ConnectionConfig.getCharsetNumber(options.charset)
  : options.charsetNumber || Charsets.UTF8_GENERAL_CI;

// Set the client flags
var defaultFlags = ConnectionConfig.<span class="apidocCodeKeywordSpan">getDefaultFlags</span>(options);
this.clientFlags = ConnectionConfig.mergeFlags(defaultFlags, options.flags);
}

ConnectionConfig.mergeFlags = function mergeFlags(defaultFlags, userFlags) {
var allFlags = ConnectionConfig.parseFlagList(defaultFlags);
var newFlags = ConnectionConfig.parseFlagList(userFlags);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.ConnectionConfig.getSSLProfile" id="apidoc.element.mysql.ConnectionConfig.getSSLProfile">
        function <span class="apidocSignatureSpan">mysql.ConnectionConfig.</span>getSSLProfile
        <span class="apidocSignatureSpan">(name)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function getSSLProfile(name) {
  if (!SSLProfiles) {
    SSLProfiles = require('./protocol/constants/ssl_profiles');
  }

  var ssl = SSLProfiles[name];

  if (ssl === undefined) {
    throw new TypeError('Unknown SSL profile \'' + name + '\'');
  }

  return ssl;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
this.trace              = options.trace !== false;
this.stringifyObjects   = options.stringifyObjects || false;
this.timezone           = options.timezone || 'local';
this.flags              = options.flags || '';
this.queryFormat        = options.queryFormat;
this.pool               = options.pool || undefined;
this.ssl                = (typeof options.ssl === 'string')
  ? ConnectionConfig.<span class="apidocCodeKeywordSpan">getSSLProfile</span>(options.ssl)
  : (options.ssl || false);
this.multipleStatements = options.multipleStatements || false;
this.typeCast           = (options.typeCast === undefined)
  ? true
  : options.typeCast;

if (this.timezone[0] === ' ') {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.ConnectionConfig.mergeFlags" id="apidoc.element.mysql.ConnectionConfig.mergeFlags">
        function <span class="apidocSignatureSpan">mysql.ConnectionConfig.</span>mergeFlags
        <span class="apidocSignatureSpan">(defaultFlags, userFlags)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function mergeFlags(defaultFlags, userFlags) {
  var allFlags = ConnectionConfig.parseFlagList(defaultFlags);
  var newFlags = ConnectionConfig.parseFlagList(userFlags);

  // Merge the new flags
  for (var flag in newFlags) {
    if (allFlags[flag] !== false) {
      allFlags[flag] = newFlags[flag];
    }
  }

  // Build flags
  var flags = 0x0;
  for (var flag in allFlags) {
    if (allFlags[flag]) {
      // TODO: Throw here on some future release
      flags |= ClientConstants['CLIENT_' + flag] || 0x0;
    }
  }

  return flags;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
this.maxPacketSize = 0;
this.charsetNumber = (options.charset)
  ? ConnectionConfig.getCharsetNumber(options.charset)
  : options.charsetNumber || Charsets.UTF8_GENERAL_CI;

// Set the client flags
var defaultFlags = ConnectionConfig.getDefaultFlags(options);
this.clientFlags = ConnectionConfig.<span class="apidocCodeKeywordSpan">mergeFlags</span>(defaultFlags, options.flags);
}

ConnectionConfig.mergeFlags = function mergeFlags(defaultFlags, userFlags) {
var allFlags = ConnectionConfig.parseFlagList(defaultFlags);
var newFlags = ConnectionConfig.parseFlagList(userFlags);

// Merge the new flags
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.ConnectionConfig.parseFlagList" id="apidoc.element.mysql.ConnectionConfig.parseFlagList">
        function <span class="apidocSignatureSpan">mysql.ConnectionConfig.</span>parseFlagList
        <span class="apidocSignatureSpan">(flagList)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function parseFlagList(flagList) {
  var allFlags = Object.create(null);

  if (!flagList) {
    return allFlags;
  }

  var flags = !Array.isArray(flagList)
    ? String(flagList || '').toUpperCase().split(/\s*,+\s*/)
    : flagList;

  for (var i = 0; i &lt; flags.length; i++) {
    var flag   = flags[i];
    var offset = 1;
    var state  = flag[0];

    if (state === undefined) {
      // TODO: throw here on some future release
      continue;
    }

    if (state !== '-' &amp;&amp; state !== '+') {
      offset = 0;
      state  = '+';
    }

    allFlags[flag.substr(offset)] = state === '+';
  }

  return allFlags;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

// Set the client flags
var defaultFlags = ConnectionConfig.getDefaultFlags(options);
this.clientFlags = ConnectionConfig.mergeFlags(defaultFlags, options.flags);
}

ConnectionConfig.mergeFlags = function mergeFlags(defaultFlags, userFlags) {
var allFlags = ConnectionConfig.<span class="apidocCodeKeywordSpan">parseFlagList</span>(defaultFlags);
var newFlags = ConnectionConfig.parseFlagList(userFlags);

// Merge the new flags
for (var flag in newFlags) {
  if (allFlags[flag] !== false) {
    allFlags[flag] = newFlags[flag];
  }
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.ConnectionConfig.parseUrl" id="apidoc.element.mysql.ConnectionConfig.parseUrl">
        function <span class="apidocSignatureSpan">mysql.ConnectionConfig.</span>parseUrl
        <span class="apidocSignatureSpan">(url)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parseUrl = function (url) {
  url = urlParse(url, true);

  var options = {
    host     : url.hostname,
    port     : url.port,
    database : url.pathname.substr(1)
  };

  if (url.auth) {
    var auth = url.auth.split(':');
    options.user     = auth.shift();
    options.password = auth.join(':');
  }

  if (url.query) {
    for (var key in url.query) {
      var value = url.query[key];

      try {
        // Try to parse this as a JSON expression first
        options[key] = JSON.parse(value);
      } catch (err) {
        // Otherwise assume it is a plain string
        options[key] = value;
      }
    }
  }

  return options;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var ClientConstants = require('./protocol/constants/client');
var Charsets        = require('./protocol/constants/charsets');
var SSLProfiles     = null;

module.exports = ConnectionConfig;
function ConnectionConfig(options) {
if (typeof options === 'string') {
  options = ConnectionConfig.<span class="apidocCodeKeywordSpan">parseUrl</span>(options);
}

this.host               = options.host || 'localhost';
this.port               = options.port || 3306;
this.localAddress       = options.localAddress;
this.socketPath         = options.socketPath;
this.user               = options.user || undefined;
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql.Pool" id="apidoc.module.mysql.Pool">module mysql.Pool</a></h1>


    <h2>
        <a href="#apidoc.element.mysql.Pool.Pool" id="apidoc.element.mysql.Pool.Pool">
        function <span class="apidocSignatureSpan">mysql.</span>Pool
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Pool(options) {
  EventEmitter.call(this);
  this.config = options.config;
  this.config.connectionConfig.pool = this;

  this._acquiringConnections = [];
  this._allConnections       = [];
  this._freeConnections      = [];
  this._connectionQueue      = [];
  this._closed               = false;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Pool.super_" id="apidoc.element.mysql.Pool.super_">
        function <span class="apidocSignatureSpan">mysql.Pool.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function EventEmitter() {
  EventEmitter.init.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql.Pool.prototype" id="apidoc.module.mysql.Pool.prototype">module mysql.Pool.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mysql.Pool.prototype._enqueueCallback" id="apidoc.element.mysql.Pool.prototype._enqueueCallback">
        function <span class="apidocSignatureSpan">mysql.Pool.prototype.</span>_enqueueCallback
        <span class="apidocSignatureSpan">(callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _enqueueCallback(callback) {

  if (this.config.queueLimit &amp;&amp; this._connectionQueue.length &gt;= this.config.queueLimit) {
    process.nextTick(function () {
      var err = new Error('Queue limit reached.');
      err.code = 'POOL_ENQUEUELIMIT';
      callback(err);
    });
    return;
  }

  // Bind to domain, as dequeue will likely occur in a different domain
  var cb = process.domain
    ? process.domain.bind(callback)
    : callback;

  this._connectionQueue.push(cb);
  this.emit('enqueue');
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    var err = new Error('No connections available.');
    err.code = 'POOL_CONNLIMIT';
    cb(err);
  });
  return;
}

this.<span class="apidocCodeKeywordSpan">_enqueueCallback</span>(cb);
};

Pool.prototype.acquireConnection = function acquireConnection(connection, cb) {
if (connection._pool !== this) {
  throw new Error('Connection acquired from wrong pool.');
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Pool.prototype._needsChangeUser" id="apidoc.element.mysql.Pool.prototype._needsChangeUser">
        function <span class="apidocSignatureSpan">mysql.Pool.prototype.</span>_needsChangeUser
        <span class="apidocSignatureSpan">(connection)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _needsChangeUser(connection) {
  var connConfig = connection.config;
  var poolConfig = this.config.connectionConfig;

  // check if changeUser values are different
  return connConfig.user !== poolConfig.user
    || connConfig.database !== poolConfig.database
    || connConfig.password !== poolConfig.password
    || connConfig.charsetNumber !== poolConfig.charsetNumber;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
};

Pool.prototype.acquireConnection = function acquireConnection(connection, cb) {
if (connection._pool !== this) {
  throw new Error('Connection acquired from wrong pool.');
}

var changeUser = this.<span class="apidocCodeKeywordSpan">_needsChangeUser</span>(connection);
var pool       = this;

this._acquiringConnections.push(connection);

function onOperationComplete(err) {
  spliceConnection(pool._acquiringConnections, connection);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Pool.prototype._purgeConnection" id="apidoc.element.mysql.Pool.prototype._purgeConnection">
        function <span class="apidocSignatureSpan">mysql.Pool.prototype.</span>_purgeConnection
        <span class="apidocSignatureSpan">(connection, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _purgeConnection(connection, callback) {
  var cb = callback || function () {};

  if (connection.state === 'disconnected') {
    connection.destroy();
  }

  this._removeConnection(connection);

  if (connection.state !== 'disconnected' &amp;&amp; !connection._protocol._quitSequence) {
    connection._realEnd(cb);
    return;
  }

  process.nextTick(cb);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

if (pool._closed) {
  err = new Error('Pool is closed.');
  err.code = 'POOL_CLOSED';
}

if (err) {
  pool.<span class="apidocCodeKeywordSpan">_purgeConnection</span>(connection);
  cb(err);
  return;
}

pool.emit('connection', connection);
pool.emit('acquire', connection);
cb(null, connection);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Pool.prototype._removeConnection" id="apidoc.element.mysql.Pool.prototype._removeConnection">
        function <span class="apidocSignatureSpan">mysql.Pool.prototype.</span>_removeConnection
        <span class="apidocSignatureSpan">(connection)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_removeConnection = function (connection) {
  connection._pool = null;

  // Remove connection from all connections
  spliceConnection(this._allConnections, connection);

  // Remove connection from free connections
  spliceConnection(this._freeConnections, connection);

  this.releaseConnection(connection);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
Pool.prototype._purgeConnection = function _purgeConnection(connection, callback) {
var cb = callback || function () {};

if (connection.state === 'disconnected') {
  connection.destroy();
}

this.<span class="apidocCodeKeywordSpan">_removeConnection</span>(connection);

if (connection.state !== 'disconnected' &amp;&amp; !connection._protocol._quitSequence) {
  connection._realEnd(cb);
  return;
}

process.nextTick(cb);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Pool.prototype.acquireConnection" id="apidoc.element.mysql.Pool.prototype.acquireConnection">
        function <span class="apidocSignatureSpan">mysql.Pool.prototype.</span>acquireConnection
        <span class="apidocSignatureSpan">(connection, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function acquireConnection(connection, cb) {
  if (connection._pool !== this) {
    throw new Error('Connection acquired from wrong pool.');
  }

  var changeUser = this._needsChangeUser(connection);
  var pool       = this;

  this._acquiringConnections.push(connection);

  function onOperationComplete(err) {
    spliceConnection(pool._acquiringConnections, connection);

    if (pool._closed) {
      err = new Error('Pool is closed.');
      err.code = 'POOL_CLOSED';
    }

    if (err) {
      pool._connectionQueue.unshift(cb);
      pool._purgeConnection(connection);
      return;
    }

    if (changeUser) {
      pool.emit('connection', connection);
    }

    pool.emit('acquire', connection);
    cb(null, connection);
  }

  if (changeUser) {
    // restore user back to pool configuration
    connection.config = this.config.newConnectionConfig();
    connection.changeUser({timeout: this.config.acquireTimeout}, onOperationComplete);
  } else {
    // ping connection
    connection.ping({timeout: this.config.acquireTimeout}, onOperationComplete);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  }

  var connection;
  var pool = this;

  if (this._freeConnections.length &gt; 0) {
connection = this._freeConnections.shift();
this.<span class="apidocCodeKeywordSpan">acquireConnection</span>(connection, cb);
return;
  }

  if (this.config.connectionLimit === 0 || this._allConnections.length &lt; this.config.connectionLimit) {
connection = new PoolConnection(this, { config: this.config.newConnectionConfig() });

this._acquiringConnections.push(connection);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Pool.prototype.end" id="apidoc.element.mysql.Pool.prototype.end">
        function <span class="apidocSignatureSpan">mysql.Pool.prototype.</span>end
        <span class="apidocSignatureSpan">(cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">end = function (cb) {
  this._closed = true;

  if (typeof cb !== 'function') {
    cb = function (err) {
      if (err) throw err;
    };
  }

  var calledBack   = false;
  var waitingClose = 0;

  function onEnd(err) {
    if (!calledBack &amp;&amp; (err || --waitingClose &lt;= 0)) {
      calledBack = true;
      cb(err);
    }
  }

  while (this._allConnections.length !== 0) {
    waitingClose++;
    this._purgeConnection(this._allConnections[0], onEnd);
  }

  if (waitingClose === 0) {
    process.nextTick(onEnd);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
connection.connect();

connection.query('SELECT 1 + 1 AS solution', function (error, results, fields) {
if (error) throw error;
console.log('The solution is: ', results[0].solution);
});

connection.<span class="apidocCodeKeywordSpan">end</span>();
```

From this example, you can learn the following:

* Every method you invoke on a connection is queued and executed in sequence.
* Closing the connection is done using `end()` which makes sure all remaining
queries are executed before sending a quit packet to the mysql server.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Pool.prototype.escape" id="apidoc.element.mysql.Pool.prototype.escape">
        function <span class="apidocSignatureSpan">mysql.Pool.prototype.</span>escape
        <span class="apidocSignatureSpan">(value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">escape = function (value) {
  return mysql.escape(value, this.config.connectionConfig.stringifyObjects, this.config.connectionConfig.timezone);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
);
```

## Escaping query values

In order to avoid SQL Injection attacks, you should always escape any user
provided data before using it inside a SQL query. You can do so using the
`mysql.<span class="apidocCodeKeywordSpan">escape</span>()`, `connection.escape()` or `pool.escape()` methods:

```js
var userId = 'some user provided value';
var sql    = 'SELECT * FROM users WHERE id = ' + connection.escape(userId);
connection.query(sql, function (error, results, fields) {
if (error) throw error;
// ...
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Pool.prototype.escapeId" id="apidoc.element.mysql.Pool.prototype.escapeId">
        function <span class="apidocSignatureSpan">mysql.Pool.prototype.</span>escapeId
        <span class="apidocSignatureSpan">(value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function escapeId(value) {
  return mysql.escapeId(value, false);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

console.log(query); // SELECT * FROM posts WHERE title='Hello MySQL'
```

## Escaping query identifiers

If you can't trust an SQL identifier (database / table / column name) because it is
provided by a user, you should escape it with `mysql.<span class="apidocCodeKeywordSpan">escapeId</span>(identifier)`,
`connection.escapeId(identifier)` or `pool.escapeId(identifier)` like this:

```js
var sorter = 'date';
var sql    = 'SELECT * FROM posts ORDER BY ' + connection.escapeId(sorter);
connection.query(sql, function (error, results, fields) {
if (error) throw error;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Pool.prototype.getConnection" id="apidoc.element.mysql.Pool.prototype.getConnection">
        function <span class="apidocSignatureSpan">mysql.Pool.prototype.</span>getConnection
        <span class="apidocSignatureSpan">(cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getConnection = function (cb) {

  if (this._closed) {
    var err = new Error('Pool is closed.');
    err.code = 'POOL_CLOSED';
    process.nextTick(function () {
      cb(err);
    });
    return;
  }

  var connection;
  var pool = this;

  if (this._freeConnections.length &gt; 0) {
    connection = this._freeConnections.shift();
    this.acquireConnection(connection, cb);
    return;
  }

  if (this.config.connectionLimit === 0 || this._allConnections.length &lt; this.config.connectionLimit) {
    connection = new PoolConnection(this, { config: this.config.newConnectionConfig() });

    this._acquiringConnections.push(connection);
    this._allConnections.push(connection);

    connection.connect({timeout: this.config.acquireTimeout}, function onConnect(err) {
      spliceConnection(pool._acquiringConnections, connection);

      if (pool._closed) {
        err = new Error('Pool is closed.');
        err.code = 'POOL_CLOSED';
      }

      if (err) {
        pool._purgeConnection(connection);
        cb(err);
        return;
      }

      pool.emit('connection', connection);
      pool.emit('acquire', connection);
      cb(null, connection);
    });
    return;
  }

  if (!this.config.waitForConnections) {
    process.nextTick(function(){
      var err = new Error('No connections available.');
      err.code = 'POOL_CONNLIMIT';
      cb(err);
    });
    return;
  }

  this._enqueueCallback(cb);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var pool  = mysql.createPool({
  host     : 'example.org',
  user     : 'bob',
  password : 'secret',
  database : 'my_db'
});

pool.<span class="apidocCodeKeywordSpan">getConnection</span>(function(err, connection) {
  // connected! (unless `err` is set)
});
```

When you are done with a connection, just call `connection.release()` and the
connection will return to the pool, ready to be used again by someone else.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Pool.prototype.query" id="apidoc.element.mysql.Pool.prototype.query">
        function <span class="apidocSignatureSpan">mysql.Pool.prototype.</span>query
        <span class="apidocSignatureSpan">(sql, values, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">query = function (sql, values, cb) {
  var query = Connection.createQuery(sql, values, cb);

  if (!(typeof sql === 'object' &amp;&amp; 'typeCast' in sql)) {
    query.typeCast = this.config.connectionConfig.typeCast;
  }

  if (this.config.connectionConfig.trace) {
    // Long stack trace support
    query._callSite = new Error();
  }

  this.getConnection(function (err, conn) {
    if (err) {
      query.on('error', function () {});
      query.end(err);
      return;
    }

    // Release connection based off event
    query.once('end', function() {
      conn.release();
    });

    conn.query(query);
  });

  return query;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  user     : 'me',
  password : 'secret',
  database : 'my_db'
});

connection.connect();

connection.<span class="apidocCodeKeywordSpan">query</span>('SELECT 1 + 1 AS solution', function (error, results, fields
) {
  if (error) throw error;
  console.log('The solution is: ', results[0].solution);
});

connection.end();
```
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.Pool.prototype.releaseConnection" id="apidoc.element.mysql.Pool.prototype.releaseConnection">
        function <span class="apidocSignatureSpan">mysql.Pool.prototype.</span>releaseConnection
        <span class="apidocSignatureSpan">(connection)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function releaseConnection(connection) {

  if (this._acquiringConnections.indexOf(connection) !== -1) {
    // connection is being acquired
    return;
  }

  if (connection._pool) {
    if (connection._pool !== this) {
      throw new Error('Connection released to wrong pool');
    }

    if (this._freeConnections.indexOf(connection) !== -1) {
      // connection already in free connection pool
      // this won't catch all double-release cases
      throw new Error('Connection already released');
    } else {
      // add connection to end of free queue
      this._freeConnections.push(connection);
      this.emit('release', connection);
    }
  }

  if (this._closed) {
    // empty the connection queue
    this._connectionQueue.splice(0).forEach(function (cb) {
      var err = new Error('Pool is closed.');
      err.code = 'POOL_CLOSED';
      process.nextTick(function () {
        cb(err);
      });
    });
  } else if (this._connectionQueue.length) {
    // get connection with next waiting callback
    this.getConnection(this._connectionQueue.shift());
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

  // Remove connection from all connections
  spliceConnection(this._allConnections, connection);

  // Remove connection from free connections
  spliceConnection(this._freeConnections, connection);

  this.<span class="apidocCodeKeywordSpan">releaseConnection</span>(connection);
};

Pool.prototype.escape = function(value) {
  return mysql.escape(value, this.config.connectionConfig.stringifyObjects, this.config.connectionConfig.timezone);
};

Pool.prototype.escapeId = function escapeId(value) {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql.PoolCluster" id="apidoc.module.mysql.PoolCluster">module mysql.PoolCluster</a></h1>


    <h2>
        <a href="#apidoc.element.mysql.PoolCluster.PoolCluster" id="apidoc.element.mysql.PoolCluster.PoolCluster">
        function <span class="apidocSignatureSpan">mysql.</span>PoolCluster
        <span class="apidocSignatureSpan">(config)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function PoolCluster(config) {
  EventEmitter.call(this);

  config = config || {};
  this._canRetry = typeof config.canRetry === 'undefined' ? true : config.canRetry;
  this._defaultSelector = config.defaultSelector || 'RR';
  this._removeNodeErrorCount = config.removeNodeErrorCount || 5;
  this._restoreNodeTimeout = config.restoreNodeTimeout || 0;

  this._closed = false;
  this._findCaches = Object.create(null);
  this._lastId = 0;
  this._namespaces = Object.create(null);
  this._nodes = Object.create(null);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.PoolCluster.super_" id="apidoc.element.mysql.PoolCluster.super_">
        function <span class="apidocSignatureSpan">mysql.PoolCluster.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function EventEmitter() {
  EventEmitter.init.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql.PoolCluster.prototype" id="apidoc.module.mysql.PoolCluster.prototype">module mysql.PoolCluster.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mysql.PoolCluster.prototype._clearFindCaches" id="apidoc.element.mysql.PoolCluster.prototype._clearFindCaches">
        function <span class="apidocSignatureSpan">mysql.PoolCluster.prototype.</span>_clearFindCaches
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _clearFindCaches() {
  this._findCaches = Object.create(null);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
this._nodes[nodeId] = {
  id            : nodeId,
  errorCount    : 0,
  pool          : new Pool({config: poolConfig}),
  _offlineUntil : 0
};

this.<span class="apidocCodeKeywordSpan">_clearFindCaches</span>();
};

PoolCluster.prototype.end = function end(callback) {
var cb = callback !== undefined
  ? callback
  : _cb;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.PoolCluster.prototype._decreaseErrorCount" id="apidoc.element.mysql.PoolCluster.prototype._decreaseErrorCount">
        function <span class="apidocSignatureSpan">mysql.PoolCluster.prototype.</span>_decreaseErrorCount
        <span class="apidocSignatureSpan">(node)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _decreaseErrorCount(node) {
  var errorCount = node.errorCount;

  if (errorCount &gt; this._removeNodeErrorCount) {
    errorCount = this._removeNodeErrorCount;
  }

  if (errorCount &lt; 1) {
    errorCount = 1;
  }

  node.errorCount = errorCount - 1;

  if (node._offlineUntil) {
    node._offlineUntil = 0;
    this.emit('online', node.id);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

  node.pool.getConnection(function (err, connection) {
    if (err) {
      self._increaseErrorCount(node);
      cb(err);
      return;
    } else {
      self.<span class="apidocCodeKeywordSpan">_decreaseErrorCount</span>(node);
    }

    connection._clusterId = node.id;

    cb(null, connection);
  });
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.PoolCluster.prototype._findNodeIds" id="apidoc.element.mysql.PoolCluster.prototype._findNodeIds">
        function <span class="apidocSignatureSpan">mysql.PoolCluster.prototype.</span>_findNodeIds
        <span class="apidocSignatureSpan">(pattern, includeOffline)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _findNodeIds(pattern, includeOffline) {
  var currentTime  = 0;
  var foundNodeIds = this._findCaches[pattern];

  if (foundNodeIds === undefined) {
    var expression = patternRegExp(pattern);
    var nodeIds    = Object.keys(this._nodes);

    foundNodeIds = nodeIds.filter(function (id) {
      return id.match(expression);
    });

    this._findCaches[pattern] = foundNodeIds;
  }

  if (includeOffline) {
    return foundNodeIds;
  }

  return foundNodeIds.filter(function (nodeId) {
    var node = this._getNode(nodeId);

    if (!node._offlineUntil) {
      return true;
    }

    if (!currentTime) {
      currentTime = getMonotonicMilliseconds();
    }

    return node._offlineUntil &lt;= currentTime;
  }, this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
this._namespaces[key] = new PoolNamespace(this, pattern, selector);
  }

  return this._namespaces[key];
};

PoolCluster.prototype.remove = function remove(pattern) {
  var foundNodeIds = this.<span class="apidocCodeKeywordSpan">_findNodeIds</span>(pattern, true);

  for (var i = 0; i &lt; foundNodeIds.length; i++) {
var node = this._getNode(foundNodeIds[i]);

if (node) {
  this._removeNode(node);
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.PoolCluster.prototype._getConnection" id="apidoc.element.mysql.PoolCluster.prototype._getConnection">
        function <span class="apidocSignatureSpan">mysql.PoolCluster.prototype.</span>_getConnection
        <span class="apidocSignatureSpan">(node, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_getConnection = function (node, cb) {
  var self = this;

  node.pool.getConnection(function (err, connection) {
    if (err) {
      self._increaseErrorCount(node);
      cb(err);
      return;
    } else {
      self._decreaseErrorCount(node);
    }

    connection._clusterId = node.id;

    cb(null, connection);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  err.code = 'POOL_NOEXIST';
}

cb(err);
return;
  }

  cluster.<span class="apidocCodeKeywordSpan">_getConnection</span>(clusterNode, function(err, connection) {
var retry = err &amp;&amp; cluster._canRetry
  &amp;&amp; cluster._findNodeIds(namespace._pattern).length !== 0;

if (retry) {
  namespace.getConnection(cb);
  return;
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.PoolCluster.prototype._getNode" id="apidoc.element.mysql.PoolCluster.prototype._getNode">
        function <span class="apidocSignatureSpan">mysql.PoolCluster.prototype.</span>_getNode
        <span class="apidocSignatureSpan">(id)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _getNode(id) {
  return this._nodes[id] || null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  return this._namespaces[key];
};

PoolCluster.prototype.remove = function remove(pattern) {
  var foundNodeIds = this._findNodeIds(pattern, true);

  for (var i = 0; i &lt; foundNodeIds.length; i++) {
    var node = this.<span class="apidocCodeKeywordSpan">_getNode</span>(foundNodeIds[i]);

    if (node) {
      this._removeNode(node);
    }
  }
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.PoolCluster.prototype._increaseErrorCount" id="apidoc.element.mysql.PoolCluster.prototype._increaseErrorCount">
        function <span class="apidocSignatureSpan">mysql.PoolCluster.prototype.</span>_increaseErrorCount
        <span class="apidocSignatureSpan">(node)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _increaseErrorCount(node) {
  var errorCount = ++node.errorCount;

  if (this._removeNodeErrorCount &gt; errorCount) {
    return;
  }

  if (this._restoreNodeTimeout &gt; 0) {
    node._offlineUntil = getMonotonicMilliseconds() + this._restoreNodeTimeout;
    this.emit('offline', node.id);
    return;
  }

  this._removeNode(node);
  this.emit('remove', node.id);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
};

PoolCluster.prototype._getConnection = function(node, cb) {
  var self = this;

  node.pool.getConnection(function (err, connection) {
if (err) {
  self.<span class="apidocCodeKeywordSpan">_increaseErrorCount</span>(node);
  cb(err);
  return;
} else {
  self._decreaseErrorCount(node);
}

connection._clusterId = node.id;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.PoolCluster.prototype._removeNode" id="apidoc.element.mysql.PoolCluster.prototype._removeNode">
        function <span class="apidocSignatureSpan">mysql.PoolCluster.prototype.</span>_removeNode
        <span class="apidocSignatureSpan">(node)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _removeNode(node) {
  delete this._nodes[node.id];

  this._clearFindCaches();

  node.pool.end(_noop);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
PoolCluster.prototype.remove = function remove(pattern) {
var foundNodeIds = this._findNodeIds(pattern, true);

for (var i = 0; i &lt; foundNodeIds.length; i++) {
  var node = this._getNode(foundNodeIds[i]);

  if (node) {
    this.<span class="apidocCodeKeywordSpan">_removeNode</span>(node);
  }
}
};

PoolCluster.prototype.getConnection = function(pattern, selector, cb) {
var namespace;
if (typeof pattern === 'function') {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.PoolCluster.prototype.add" id="apidoc.element.mysql.PoolCluster.prototype.add">
        function <span class="apidocSignatureSpan">mysql.PoolCluster.prototype.</span>add
        <span class="apidocSignatureSpan">(id, config)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function add(id, config) {
  if (this._closed) {
    throw new Error('PoolCluster is closed.');
  }

  var nodeId = typeof id === 'object'
    ? 'CLUSTER::' + (++this._lastId)
    : String(id);

  if (this._nodes[nodeId] !== undefined) {
    throw new Error('Node ID "' + nodeId + '" is already defined in PoolCluster.');
  }

  var poolConfig = typeof id !== 'object'
    ? new PoolConfig(config)
    : new PoolConfig(id);

  this._nodes[nodeId] = {
    id            : nodeId,
    errorCount    : 0,
    pool          : new Pool({config: poolConfig}),
    _offlineUntil : 0
  };

  this._clearFindCaches();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
PoolCluster provides multiple hosts connection. (group &amp; retry &amp; selector)

```js
// create
var poolCluster = mysql.createPoolCluster();

// add configurations (the config is a pool config object)
poolCluster.<span class="apidocCodeKeywordSpan">add</span>(config); // add configuration with automatic name
poolCluster.add('MASTER', masterConfig); // add a named configuration
poolCluster.add('SLAVE1', slave1Config);
poolCluster.add('SLAVE2', slave2Config);

// remove configurations
poolCluster.remove('SLAVE2'); // By nodeId
poolCluster.remove('SLAVE*'); // By target group : SLAVE1-2
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.PoolCluster.prototype.end" id="apidoc.element.mysql.PoolCluster.prototype.end">
        function <span class="apidocSignatureSpan">mysql.PoolCluster.prototype.</span>end
        <span class="apidocSignatureSpan">(callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function end(callback) {
  var cb = callback !== undefined
    ? callback
    : _cb;

  if (typeof cb !== 'function') {
    throw TypeError('callback argument must be a function');
  }

  if (this._closed) {
    process.nextTick(cb);
    return;
  }

  this._closed = true;

  var calledBack   = false;
  var nodeIds      = Object.keys(this._nodes);
  var waitingClose = 0;

  function onEnd(err) {
    if (!calledBack &amp;&amp; (err || --waitingClose &lt;= 0)) {
      calledBack = true;
      cb(err);
    }
  }

  for (var i = 0; i &lt; nodeIds.length; i++) {
    var nodeId = nodeIds[i];
    var node = this._nodes[nodeId];

    waitingClose++;
    node.pool.end(onEnd);
  }

  if (waitingClose === 0) {
    process.nextTick(onEnd);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
connection.connect();

connection.query('SELECT 1 + 1 AS solution', function (error, results, fields) {
if (error) throw error;
console.log('The solution is: ', results[0].solution);
});

connection.<span class="apidocCodeKeywordSpan">end</span>();
```

From this example, you can learn the following:

* Every method you invoke on a connection is queued and executed in sequence.
* Closing the connection is done using `end()` which makes sure all remaining
queries are executed before sending a quit packet to the mysql server.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.PoolCluster.prototype.getConnection" id="apidoc.element.mysql.PoolCluster.prototype.getConnection">
        function <span class="apidocSignatureSpan">mysql.PoolCluster.prototype.</span>getConnection
        <span class="apidocSignatureSpan">(pattern, selector, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getConnection = function (pattern, selector, cb) {
  var namespace;
  if (typeof pattern === 'function') {
    cb = pattern;
    namespace = this.of();
  } else {
    if (typeof selector === 'function') {
      cb = selector;
      selector = this._defaultSelector;
    }

    namespace = this.of(pattern, selector);
  }

  namespace.getConnection(cb);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var pool  = mysql.createPool({
  host     : 'example.org',
  user     : 'bob',
  password : 'secret',
  database : 'my_db'
});

pool.<span class="apidocCodeKeywordSpan">getConnection</span>(function(err, connection) {
  // connected! (unless `err` is set)
});
```

When you are done with a connection, just call `connection.release()` and the
connection will return to the pool, ready to be used again by someone else.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.PoolCluster.prototype.of" id="apidoc.element.mysql.PoolCluster.prototype.of">
        function <span class="apidocSignatureSpan">mysql.PoolCluster.prototype.</span>of
        <span class="apidocSignatureSpan">(pattern, selector)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">of = function (pattern, selector) {
  pattern = pattern || '*';

  selector = selector || this._defaultSelector;
  selector = selector.toUpperCase();
  if (typeof PoolSelector[selector] === 'undefined') {
    selector = this._defaultSelector;
  }

  var key = pattern + selector;

  if (typeof this._namespaces[key] === 'undefined') {
    this._namespaces[key] = new PoolNamespace(this, pattern, selector);
  }

  return this._namespaces[key];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// A pattern can be passed with *  as wildcard
poolCluster.getConnection('SLAVE*', 'ORDER', function (err, connection) {});

// The pattern can also be a regular expression
poolCluster.getConnection(/^SLAVE[12]$/, function (err, connection) {});

// of namespace : of(pattern, selector)
poolCluster.<span class="apidocCodeKeywordSpan">of</span>('*').getConnection(function (err, connection) {});

var pool = poolCluster.of('SLAVE*', 'RANDOM');
pool.getConnection(function (err, connection) {});
pool.getConnection(function (err, connection) {});
pool.query(function (error, results, fields) {});

// close all connections
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.PoolCluster.prototype.remove" id="apidoc.element.mysql.PoolCluster.prototype.remove">
        function <span class="apidocSignatureSpan">mysql.PoolCluster.prototype.</span>remove
        <span class="apidocSignatureSpan">(pattern)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function remove(pattern) {
  var foundNodeIds = this._findNodeIds(pattern, true);

  for (var i = 0; i &lt; foundNodeIds.length; i++) {
    var node = this._getNode(foundNodeIds[i]);

    if (node) {
      this._removeNode(node);
    }
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// add configurations (the config is a pool config object)
poolCluster.add(config); // add configuration with automatic name
poolCluster.add('MASTER', masterConfig); // add a named configuration
poolCluster.add('SLAVE1', slave1Config);
poolCluster.add('SLAVE2', slave2Config);

// remove configurations
poolCluster.<span class="apidocCodeKeywordSpan">remove</span>('SLAVE2'); // By nodeId
poolCluster.remove('SLAVE*'); // By target group : SLAVE1-2

// Target Group : ALL(anonymous, MASTER, SLAVE1-2), Selector : round-robin(default)
poolCluster.getConnection(function (err, connection) {});

// Target Group : MASTER, Selector : round-robin
poolCluster.getConnection('MASTER', function (err, connection) {});
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql.PoolConfig" id="apidoc.module.mysql.PoolConfig">module mysql.PoolConfig</a></h1>


    <h2>
        <a href="#apidoc.element.mysql.PoolConfig.PoolConfig" id="apidoc.element.mysql.PoolConfig.PoolConfig">
        function <span class="apidocSignatureSpan">mysql.</span>PoolConfig
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function PoolConfig(options) {
  if (typeof options === 'string') {
    options = ConnectionConfig.parseUrl(options);
  }

  this.acquireTimeout     = (options.acquireTimeout === undefined)
    ? 10 * 1000
    : Number(options.acquireTimeout);
  this.connectionConfig   = new ConnectionConfig(options);
  this.waitForConnections = (options.waitForConnections === undefined)
    ? true
    : Boolean(options.waitForConnections);
  this.connectionLimit    = (options.connectionLimit === undefined)
    ? 10
    : Number(options.connectionLimit);
  this.queueLimit         = (options.queueLimit === undefined)
    ? 0
    : Number(options.queueLimit);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql.PoolConfig.prototype" id="apidoc.module.mysql.PoolConfig.prototype">module mysql.PoolConfig.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mysql.PoolConfig.prototype.newConnectionConfig" id="apidoc.element.mysql.PoolConfig.prototype.newConnectionConfig">
        function <span class="apidocSignatureSpan">mysql.PoolConfig.prototype.</span>newConnectionConfig
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function newConnectionConfig() {
  var connectionConfig = new ConnectionConfig(this.connectionConfig);

  connectionConfig.clientFlags   = this.connectionConfig.clientFlags;
  connectionConfig.maxPacketSize = this.connectionConfig.maxPacketSize;

  return connectionConfig;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  if (this._freeConnections.length &gt; 0) {
connection = this._freeConnections.shift();
this.acquireConnection(connection, cb);
return;
  }

  if (this.config.connectionLimit === 0 || this._allConnections.length &lt; this.config.connectionLimit) {
connection = new PoolConnection(this, { config: this.config.<span class="apidocCodeKeywordSpan">newConnectionConfig</span>() });

this._acquiringConnections.push(connection);
this._allConnections.push(connection);

connection.connect({timeout: this.config.acquireTimeout}, function onConnect(err) {
  spliceConnection(pool._acquiringConnections, connection);
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql.PoolConnection" id="apidoc.module.mysql.PoolConnection">module mysql.PoolConnection</a></h1>


    <h2>
        <a href="#apidoc.element.mysql.PoolConnection.PoolConnection" id="apidoc.element.mysql.PoolConnection.PoolConnection">
        function <span class="apidocSignatureSpan">mysql.</span>PoolConnection
        <span class="apidocSignatureSpan">(pool, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function PoolConnection(pool, options) {
  Connection.call(this, options);
  this._pool  = pool;

  // Bind connection to pool domain
  if (Events.usingDomains) {
    this.domain = pool.domain;
  }

  // When a fatal error occurs the connection's protocol ends, which will cause
  // the connection to end as well, thus we only need to watch for the end event
  // and we will be notified of disconnects.
  this.on('end', this._removeFromPool);
  this.on('error', function (err) {
    if (err.fatal) {
      this._removeFromPool();
    }
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.PoolConnection.super_" id="apidoc.element.mysql.PoolConnection.super_">
        function <span class="apidocSignatureSpan">mysql.PoolConnection.</span>super_
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Connection(options) {
  Events.EventEmitter.call(this);

  this.config = options.config;

  this._socket        = options.socket;
  this._protocol      = new Protocol({config: this.config, connection: this});
  this._connectCalled = false;
  this.state          = 'disconnected';
  this.threadId       = null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql.PoolConnection.prototype" id="apidoc.module.mysql.PoolConnection.prototype">module mysql.PoolConnection.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mysql.PoolConnection.prototype._realEnd" id="apidoc.element.mysql.PoolConnection.prototype._realEnd">
        function <span class="apidocSignatureSpan">mysql.PoolConnection.prototype.</span>_realEnd
        <span class="apidocSignatureSpan">(options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function end(options, callback) {
  var cb   = callback;
  var opts = options;

  if (!callback &amp;&amp; typeof options === 'function') {
    cb   = options;
    opts = null;
  }

  // create custom options reference
  opts = Object.create(opts || null);

  if (opts.timeout === undefined) {
    // default timeout of 30 seconds
    opts.timeout = 30000;
  }

  this._implyConnect();
  this._protocol.quit(opts, bindToCurrentDomain(cb));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  if (connection.state === 'disconnected') {
    connection.destroy();
  }

  this._removeConnection(connection);

  if (connection.state !== 'disconnected' &amp;&amp; !connection._protocol._quitSequence) {
    connection.<span class="apidocCodeKeywordSpan">_realEnd</span>(cb);
    return;
  }

  process.nextTick(cb);
};

Pool.prototype._removeConnection = function(connection) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.PoolConnection.prototype._removeFromPool" id="apidoc.element.mysql.PoolConnection.prototype._removeFromPool">
        function <span class="apidocSignatureSpan">mysql.PoolConnection.prototype.</span>_removeFromPool
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _removeFromPool() {
  if (!this._pool || this._pool._closed) {
    return;
  }

  var pool = this._pool;
  this._pool = null;

  pool._purgeConnection(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

// When a fatal error occurs the connection's protocol ends, which will cause
// the connection to end as well, thus we only need to watch for the end event
// and we will be notified of disconnects.
this.on('end', this._removeFromPool);
this.on('error', function (err) {
  if (err.fatal) {
    this.<span class="apidocCodeKeywordSpan">_removeFromPool</span>();
  }
});
}

PoolConnection.prototype.release = function release() {
var pool = this._pool;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.PoolConnection.prototype.destroy" id="apidoc.element.mysql.PoolConnection.prototype.destroy">
        function <span class="apidocSignatureSpan">mysql.PoolConnection.prototype.</span>destroy
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">destroy = function () {
  Connection.prototype.destroy.apply(this, arguments);
  this._removeFromPool(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

An alternative way to end the connection is to call the `destroy()` method.
This will cause an immediate termination of the underlying socket.
Additionally `destroy()` guarantees that no more events or callbacks will be
triggered for the connection.

```js
connection.<span class="apidocCodeKeywordSpan">destroy</span>();
```

Unlike `end()` the `destroy()` method does not take a callback argument.

## Pooling connections

Rather than creating and managing connections one-by-one, this module also
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.PoolConnection.prototype.end" id="apidoc.element.mysql.PoolConnection.prototype.end">
        function <span class="apidocSignatureSpan">mysql.PoolConnection.prototype.</span>end
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">end = function () {
  console.warn( 'Calling conn.end() to release a pooled connection is '
              + 'deprecated. In next version calling conn.end() will be '
              + 'restored to default conn.end() behavior. Use '
              + 'conn.release() instead.'
              );
  this.release();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
connection.connect();

connection.query('SELECT 1 + 1 AS solution', function (error, results, fields) {
if (error) throw error;
console.log('The solution is: ', results[0].solution);
});

connection.<span class="apidocCodeKeywordSpan">end</span>();
```

From this example, you can learn the following:

* Every method you invoke on a connection is queued and executed in sequence.
* Closing the connection is done using `end()` which makes sure all remaining
queries are executed before sending a quit packet to the mysql server.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.PoolConnection.prototype.release" id="apidoc.element.mysql.PoolConnection.prototype.release">
        function <span class="apidocSignatureSpan">mysql.PoolConnection.prototype.</span>release
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function release() {
  var pool = this._pool;

  if (!pool || pool._closed) {
    return undefined;
  }

  return pool.releaseConnection(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
});

pool.getConnection(function(err, connection) {
  // connected! (unless `err` is set)
});
```

When you are done with a connection, just call `connection.<span class="apidocCodeKeywordSpan">release</span>()` and the
connection will return to the pool, ready to be used again by someone else.

```js
var mysql = require('mysql');
var pool  = mysql.createPool(...);

pool.getConnection(function(err, connection) {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql.PoolNamespace" id="apidoc.module.mysql.PoolNamespace">module mysql.PoolNamespace</a></h1>


    <h2>
        <a href="#apidoc.element.mysql.PoolNamespace.PoolNamespace" id="apidoc.element.mysql.PoolNamespace.PoolNamespace">
        function <span class="apidocSignatureSpan">mysql.</span>PoolNamespace
        <span class="apidocSignatureSpan">(cluster, pattern, selector)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function PoolNamespace(cluster, pattern, selector) {
  this._cluster = cluster;
  this._pattern = pattern;
  this._selector = new PoolSelector[selector]();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql.PoolNamespace.prototype" id="apidoc.module.mysql.PoolNamespace.prototype">module mysql.PoolNamespace.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mysql.PoolNamespace.prototype._getClusterNode" id="apidoc.element.mysql.PoolNamespace.prototype._getClusterNode">
        function <span class="apidocSignatureSpan">mysql.PoolNamespace.prototype.</span>_getClusterNode
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _getClusterNode() {
  var foundNodeIds = this._cluster._findNodeIds(this._pattern);
  var nodeId;

  switch (foundNodeIds.length) {
    case 0:
      nodeId = null;
      break;
    case 1:
      nodeId = foundNodeIds[0];
      break;
    default:
      nodeId = this._selector(foundNodeIds);
      break;
  }

  return nodeId !== null
    ? this._cluster._getNode(nodeId)
    : null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
function PoolNamespace(cluster, pattern, selector) {
  this._cluster = cluster;
  this._pattern = pattern;
  this._selector = new PoolSelector[selector]();
}

PoolNamespace.prototype.getConnection = function(cb) {
  var clusterNode = this.<span class="apidocCodeKeywordSpan">_getClusterNode</span>();
  var cluster     = this._cluster;
  var namespace   = this;

  if (clusterNode === null) {
var err = null;

if (this._cluster._findNodeIds(this._pattern, true).length !== 0) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.PoolNamespace.prototype.getConnection" id="apidoc.element.mysql.PoolNamespace.prototype.getConnection">
        function <span class="apidocSignatureSpan">mysql.PoolNamespace.prototype.</span>getConnection
        <span class="apidocSignatureSpan">(cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getConnection = function (cb) {
  var clusterNode = this._getClusterNode();
  var cluster     = this._cluster;
  var namespace   = this;

  if (clusterNode === null) {
    var err = null;

    if (this._cluster._findNodeIds(this._pattern, true).length !== 0) {
      err = new Error('Pool does not have online node.');
      err.code = 'POOL_NONEONLINE';
    } else {
      err = new Error('Pool does not exist.');
      err.code = 'POOL_NOEXIST';
    }

    cb(err);
    return;
  }

  cluster._getConnection(clusterNode, function(err, connection) {
    var retry = err &amp;&amp; cluster._canRetry
      &amp;&amp; cluster._findNodeIds(namespace._pattern).length !== 0;

    if (retry) {
      namespace.getConnection(cb);
      return;
    }

    if (err) {
      cb(err);
      return;
    }

    cb(null, connection);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var pool  = mysql.createPool({
  host     : 'example.org',
  user     : 'bob',
  password : 'secret',
  database : 'my_db'
});

pool.<span class="apidocCodeKeywordSpan">getConnection</span>(function(err, connection) {
  // connected! (unless `err` is set)
});
```

When you are done with a connection, just call `connection.release()` and the
connection will return to the pool, ready to be used again by someone else.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.PoolNamespace.prototype.query" id="apidoc.element.mysql.PoolNamespace.prototype.query">
        function <span class="apidocSignatureSpan">mysql.PoolNamespace.prototype.</span>query
        <span class="apidocSignatureSpan">(sql, values, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">query = function (sql, values, cb) {
  var cluster     = this._cluster;
  var clusterNode = this._getClusterNode();
  var query       = Connection.createQuery(sql, values, cb);
  var namespace   = this;

  if (clusterNode === null) {
    var err = null;

    if (this._cluster._findNodeIds(this._pattern, true).length !== 0) {
      err = new Error('Pool does not have online node.');
      err.code = 'POOL_NONEONLINE';
    } else {
      err = new Error('Pool does not exist.');
      err.code = 'POOL_NOEXIST';
    }

    process.nextTick(function () {
      query.on('error', function () {});
      query.end(err);
    });
    return query;
  }

  if (!(typeof sql === 'object' &amp;&amp; 'typeCast' in sql)) {
    query.typeCast = clusterNode.pool.config.connectionConfig.typeCast;
  }

  if (clusterNode.pool.config.connectionConfig.trace) {
    // Long stack trace support
    query._callSite = new Error();
  }

  cluster._getConnection(clusterNode, function (err, conn) {
    var retry = err &amp;&amp; cluster._canRetry
      &amp;&amp; cluster._findNodeIds(namespace._pattern).length !== 0;

    if (retry) {
      namespace.query(query);
      return;
    }

    if (err) {
      query.on('error', function () {});
      query.end(err);
      return;
    }

    // Release connection based off event
    query.once('end', function() {
      conn.release();
    });

    conn.query(query);
  });

  return query;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  user     : 'me',
  password : 'secret',
  database : 'my_db'
});

connection.connect();

connection.<span class="apidocCodeKeywordSpan">query</span>('SELECT 1 + 1 AS solution', function (error, results, fields
) {
  if (error) throw error;
  console.log('The solution is: ', results[0].solution);
});

connection.end();
```
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql.PoolSelector" id="apidoc.module.mysql.PoolSelector">module mysql.PoolSelector</a></h1>


    <h2>
        <a href="#apidoc.element.mysql.PoolSelector.ORDER" id="apidoc.element.mysql.PoolSelector.ORDER">
        function <span class="apidocSignatureSpan">mysql.PoolSelector.</span>ORDER
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function PoolSelectorOrder() {
  return function(clusterIds) {
    return clusterIds[0];
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.PoolSelector.RANDOM" id="apidoc.element.mysql.PoolSelector.RANDOM">
        function <span class="apidocSignatureSpan">mysql.PoolSelector.</span>RANDOM
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function PoolSelectorRandom() {
  return function(clusterIds) {
    return clusterIds[Math.floor(Math.random() * clusterIds.length)];
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql.PoolSelector.RR" id="apidoc.element.mysql.PoolSelector.RR">
        function <span class="apidocSignatureSpan">mysql.PoolSelector.</span>RR
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function PoolSelectorRoundRobin() {
  var index = 0;

  return function(clusterIds) {
    if (index &gt;= clusterIds.length) {
      index = 0;
    }

    var clusterId = clusterIds[index++];

    return clusterId;
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
</body></html>